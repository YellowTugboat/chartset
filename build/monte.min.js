// https://github.com/YellowTugboat/monte#readme Version 0.0.0-alpha28 Copyright 2017 Yellow Tugboat
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.monte=t.monte||{})}(this,function(t){"use strict";function e(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function n(t,n,r){var i=t.length;return r=void 0===r?i:r,!n&&r>=i?t:e(t,n,r)}function r(t){return ln.test(t)}function i(t){return t.split("")}function o(t){return t.match(vn)||[]}function a(t){return r(t)?o(t):i(t)}function s(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function l(t){var e=xn.call(t,On),n=t[On];try{t[On]=void 0;var r=!0}catch(t){}var i=An.call(t);return r&&(e?t[On]=n:delete t[On]),i}function u(t){return In.call(t)}function c(t){return null==t?void 0===t?En:Cn:Pn&&Pn in Object(t)?l(t):u(t)}function p(t){return null!=t&&"object"==(void 0===t?"undefined":Xe(t))}function h(t){return"symbol"==(void 0===t?"undefined":Xe(t))||p(t)&&c(t)==Rn}function d(t){if("string"==typeof t)return t;if(kn(t))return s(t,d)+"";if(h(t))return Tn?Tn.call(t):"";var e=t+"";return"0"==e&&1/t==-wn?"-0":e}function f(t){return null==t?"":d(t)}function y(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function v(t){return(t=f(t))&&t.replace(Ln,Dn).replace(Fn,"")}function _(t){return t.match(Bn)||[]}function g(t){return Un.test(t)}function b(t){return t.match(Zn)||[]}function m(t,e,n){return t=f(t),void 0===(e=n?void 0:e)?g(t)?b(t):_(t):t.match(e)||[]}function k(t){return function(e){return y(m(v(e).replace($n,"")),t,"")}}function S(t){return zn(f(t).toLowerCase())}function x(t,e){return t===e||t!==t&&e!==e}function A(t,e){for(var n=t.length;n--;)if(x(t[n][0],e))return n;return-1}function O(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function I(t){var e=void 0===t?"undefined":Xe(t);return null!=t&&("object"==e||"function"==e)}function C(t){if(!I(t))return!1;var e=c(t);return e==nr||e==rr||e==er||e==ir}function E(t){return!!ar&&ar in t}function P(t){if(null!=t){try{return sr.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function R(t){return!(!I(t)||E(t))&&(C(t)?fr:ur).test(P(t))}function w(t,e){return null==t?void 0:t[e]}function j(t,e){var n=w(t,e);return R(n)?n:void 0}function T(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function z(t){var e=void 0===t?"undefined":Xe(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function D(t,e){var n=t.__data__;return z(e)?n["string"==typeof e?"string":"hash"]:n.map}function L(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function F(t){var e=this.__data__=new O(t);this.size=e.size}function B(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new L;++e<n;)this.add(t[e])}function U(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function M(t,e){return t.has(e)}function N(t,e,n,r,i,o){var a=n&xr,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var c=-1,p=!0,h=n&Ar?new B:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var d=t[c],f=e[c];if(r)var y=a?r(f,d,c,e,t,o):r(d,f,c,t,e,o);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!U(e,function(t,e){if(!M(h,e)&&(d===t||i(d,t,n,r,o)))return h.push(e)})){p=!1;break}}else if(d!==f&&!i(d,f,n,r,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function Y(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function H(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function W(t,e,n,r,i,o,a){switch(n){case Br:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Fr:return!(t.byteLength!=e.byteLength||!o(new Or(t),new Or(e)));case Er:case Pr:case jr:return x(+t,+e);case Rr:return t.name==e.name&&t.message==e.message;case Tr:case Dr:return t==e+"";case wr:var s=Y;case zr:var l=r&Ir;if(s||(s=H),t.size!=e.size&&!l)return!1;var u=a.get(t);if(u)return u==e;r|=Cr,a.set(t,e);var c=N(s(t),s(e),r,i,o,a);return a.delete(t),c;case Lr:if(Mr)return Mr.call(t)==Mr.call(e)}return!1}function V(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function X(t,e,n){var r=e(t);return kn(t)?r:V(r,n(t))}function G(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function K(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Z(t){return p(t)&&c(t)==Wr}function $(t,e){return!!(e=null==e?Qr:e)&&("number"==typeof t||ti.test(t))&&t>-1&&t%1==0&&t<e}function q(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ei}function J(t,e){var n=kn(t),r=!n&&Kr(t),i=!n&&!r&&Jr(t),o=!n&&!r&&!i&&li(t),a=n||r||i||o,s=a?K(t.length,String):[],l=s.length;for(var u in t)!e&&!ui.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||$(u,l))||s.push(u);return s}function Q(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ci)}function tt(t,e){return function(n){return t(e(n))}}function et(t){if(!Q(t))return pi(t);var e=[];for(var n in Object(t))hi.call(t,n)&&"constructor"!=n&&e.push(n);return e}function nt(t){return null!=t&&q(t.length)&&!C(t)}function rt(t){return nt(t)?J(t):et(t)}function it(t){return X(t,rt,Hr)}function ot(t,e,n,r,i,o){var a=n&di,s=it(t),l=s.length;if(l!=it(e).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in e:fi.call(e,c)))return!1}var p=o.get(t);if(p&&o.get(e))return p==e;var h=!0;o.set(t,e),o.set(e,t);for(var d=a;++u<l;){var f=t[c=s[u]],y=e[c];if(r)var v=a?r(y,f,c,e,t,o):r(f,y,c,t,e,o);if(!(void 0===v?f===y||i(f,y,n,r,o):v)){h=!1;break}d||(d="constructor"==c)}if(h&&!d){var _=t.constructor,g=e.constructor;_!=g&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof g&&g instanceof g)&&(h=!1)}return o.delete(t),o.delete(e),h}function at(t,e,n,r,i,o){var a=kn(t),s=kn(e),l=a?Ei:Oi(t),u=s?Ei:Oi(e),c=(l=l==Ci?Pi:l)==Pi,p=(u=u==Ci?Pi:u)==Pi,h=l==u;if(h&&Jr(t)){if(!Jr(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new F),a||li(t)?N(t,e,n,r,i,o):W(t,e,l,n,r,i,o);if(!(n&Ii)){var d=c&&Ri.call(t,"__wrapped__"),f=p&&Ri.call(e,"__wrapped__");if(d||f){var y=d?t.value():t,v=f?e.value():e;return o||(o=new F),i(y,v,n,r,o)}}return!!h&&(o||(o=new F),ot(t,e,n,r,i,o))}function st(t,e,n,r,i){return t===e||(null==t||null==e||!p(t)&&!p(e)?t!==t&&e!==e:at(t,e,n,r,st,i))}function lt(t){return kn(t)||Kr(t)||!!(wi&&t&&t[wi])}function ut(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=lt),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ut(s,e-1,n,r,i):V(i,s):r||(i[i.length]=s)}return i}function ct(t,e){return null!=t&&Ti.call(t,e)}function pt(t,e){if(kn(t))return!1;var n=void 0===t?"undefined":Xe(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!h(t))||(Di.test(t)||!zi.test(t)||null!=e&&t in Object(e))}function ht(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Li);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(ht.Cache||L),n}function dt(t,e){return kn(t)?t:pt(t,e)?[t]:Ni(f(t))}function ft(t){if("string"==typeof t||h(t))return t;var e=t+"";return"0"==e&&1/t==-Yi?"-0":e}function yt(t,e,n){for(var r=-1,i=(e=dt(e,t)).length,o=!1;++r<i;){var a=ft(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&q(i)&&$(a,i)&&(kn(t)||Kr(t))}function vt(t,e){for(var n=0,r=(e=dt(e,t)).length;null!=t&&n<r;)t=t[ft(e[n++])];return n&&n==r?t:void 0}function _t(t,e,n){"__proto__"==e&&Hi?Hi(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function gt(t,e,n){var r=t[e];Wi.call(t,e)&&x(r,n)&&(void 0!==n||e in t)||_t(t,e,n)}function bt(t,e,n,r){if(!I(t))return t;for(var i=-1,o=(e=dt(e,t)).length,a=o-1,s=t;null!=s&&++i<o;){var l=ft(e[i]),u=n;if(i!=a){var c=s[l];void 0===(u=r?r(c,l,s):void 0)&&(u=I(c)?c:$(e[i+1])?[]:{})}gt(s,l,u),s=s[l]}return t}function mt(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function kt(t){return t}function St(t,e,n){return e=Vi(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Vi(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),mt(t,this,s)}}function xt(t){return function(){return t}}function At(t,e){return $i(St(t,e,kt),t+"")}function Ot(t,e,n){(void 0===n||x(t[e],n))&&(void 0!==n||e in t)||_t(t,e,n)}function It(t,e){if(e)return t.slice();var n=t.length,r=eo?eo(n):new t.constructor(n);return t.copy(r),r}function Ct(t){var e=new t.constructor(t.byteLength);return new Or(e).set(new Or(t)),e}function Et(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Pt(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function Rt(t){return"function"!=typeof t.constructor||Q(t)?{}:ro(io(t))}function wt(t){return p(t)&&nt(t)}function jt(t){if(!p(t)||c(t)!=oo)return!1;var e=io(t);if(null===e)return!0;var n=uo.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&lo.call(n)==co}function Tt(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],l=r?r(n[s],t[s],s,n,t):void 0;void 0===l&&(l=t[s]),i?_t(n,s,l):gt(n,s,l)}return n}function zt(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function Dt(t){if(!I(t))return zt(t);var e=Q(t),n=[];for(var r in t)("constructor"!=r||!e&&po.call(t,r))&&n.push(r);return n}function Lt(t){return nt(t)?J(t,!0):Dt(t)}function Ft(t){return Tt(t,Lt(t))}function Bt(t,e,n,r,i,o,a){var s=t[n],l=e[n],u=a.get(l);if(u)Ot(t,n,u);else{var c=o?o(s,l,n+"",t,e,a):void 0,p=void 0===c;if(p){var h=kn(l),d=!h&&Jr(l),f=!h&&!d&&li(l);c=l,h||d||f?kn(s)?c=s:wt(s)?c=Pt(s):d?(p=!1,c=It(l,!0)):f?(p=!1,c=Et(l,!0)):c=[]:jt(l)||Kr(l)?(c=s,Kr(s)?c=Ft(s):(!I(s)||r&&C(s))&&(c=Rt(l))):p=!1}p&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),Ot(t,n,c)}}function Ut(t,e,n,r,i){t!==e&&qi(e,function(o,a){if(I(o))i||(i=new F),Bt(t,e,a,n,Ut,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):void 0;void 0===s&&(s=o),Ot(t,a,s)}},Lt)}function Mt(t,e,n,r,i,o){return I(t)&&I(e)&&(o.set(e,t),Ut(t,e,void 0,Mt,o),o.delete(e)),t}function Nt(t,e,n){if(!I(n))return!1;var r=void 0===e?"undefined":Xe(e);return!!("number"==r?nt(n)&&$(e,n.length):"string"==r&&e in n)&&x(n[e],t)}function Yt(){}function Ht(t){return"number"==typeof t&&isFinite(t)}function Wt(t){return Ht(t)||Vt(t)&&Ht(+t)}function Vt(t){return"string"==typeof t}function Xt(t){return"function"==typeof t}function Gt(t){return t===Yt}function Kt(t){return null!==t&&"object"===(void 0===t?"undefined":Xe(t))&&!Zt(t)}function Zt(t){return Array.isArray(t)}function $t(t){return null!==t&&t!==Ao}function qt(t,e,n,r){if(t){for(var i=e.length-1;i>=0;i--){var o=e.slice(0,i+1).join(".");if(o&&(o+="."),o+=n,_o(t,o))return vo(t,o)}for(var a=0;a<e.length;a++){var s=e.slice(a+1).join(".");if(s&&(s+="."),s+=n,_o(t,s))return vo(t,s)}}return r}function Jt(t){return t instanceof Fo?t.value:t}function Qt(t){var e=null;if(Array.isArray(t)){for(var n=-1,r=t.length-1;r>=0;r--)if(t[r]instanceof Bo){n=r;break}e=-1!==n?t.slice(n):t;for(var i=0;i<e.length;i++)e[i]=Jt(e[i])}else e=Jt(t);return e}function te(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=fo.apply(void 0,[{}].concat(e));for(var i in r)r.hasOwnProperty(i)&&(r[i]=Qt(r[i]));return r}function ee(t){var e=+t;if(!Ht(e))throw new Io("Cannot get chart clipPath ID. The chart ID must be numeric.");return Yo+e}function ne(t,e){return t&&t.id||e}function re(){for(var t=[],e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i],a=!0,s=!1,l=void 0;try{for(var u,c=tn[Symbol.iterator]();!(a=(u=c.next()).done);a=!0){var p=u.value;t.push(o+":"+p)}}catch(t){s=!0,l=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw l}}}return t}function ie(t){t&&t.domain&&t.domain([])}function oe(t){return xo(mo(t))}function ae(t){return[0,t[1]]}function se(t){var e=t[0],n=t[1];if(e>=0)return[0,n];if(e<0&&n<0)return[e,0];var r=Math.abs(e),i=Math.abs(n),o=i>r?i:r;return[-o,o]}function le(t,e){var n=[];for(var r in t)t.hasOwnProperty(r)&&r!==e&&n.push(t[r]);return n}function ue(t,e,n){var r=this.tryInvoke(this.opts.arrangement.columnIndex,t,e,n),i=this.tryInvoke(this.opts.arrangement.rowIndex,t,e,n);return"translate("+this.getScaledProp("x",r)+", "+this.getScaledProp("y",i)+")"}function ce(t,e,n){var r=this.tryInvoke(this.opts.arrangement.columnIndex,t,e,n),i=this.tryInvoke(this.opts.arrangement.rowIndex,t,e,n),o=this.getScaledProp("x",r),a=this.getScaledProp("y",i);return"translate("+(o-this.opts.iconSvgWidth/2)+", "+(a-this.opts.iconSvgHeight/2)+")"}function pe(t,e){var n=(t-e)/Da;return Number.isInteger(n)}function he(t,e){var n=e-za;return[Math.cos(n)*t,Math.sin(n)*t]}function de(t){return t*(180/Ta)}function fe(t,e){return(t+e)/2}function ye(t){return fe(t.startAngle,t.endAngle)}function ve(t,e,n){var r=d3.interpolate(e,n);return function(e){return t(r(e))}}function _e(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t||(t={angle:0,radius:n,rotate:0});var r=d3.interpolateObject(t,e);return function(t){var e=r(t);return"translate("+he(e.radius,e.angle)+") rotate("+(e.rotate||0)+")"}}function ge(){return Ba.CENTROID}function be(){return Ba.INNER}function me(){return Ba.OUTER}function ke(t){return Ht(+t)?{startAngle:t,endAngle:t}:t}function Se(t){return t}function xe(t){var e=Math.abs(t);return e>za&&e<=3*za&&(t-=Ta),t}function Ae(t){return t-za}function Oe(t){return t-za-Ta}function Ie(t){return t<=0&&t>=-Ta||t>Ta?t+za:t>0&&t<=Ta||t<-Ta?t-za:t}function Ce(){return 0}function Ee(t){return xe(ye(ke(t)))}function Pe(t){return xe(ke(t).endAngle)}function Re(){return Ce()}function we(t,e){var n=t/2,r=e/2;return n<r?n:r}function je(t){$t(t)||(t="");var e=/(.*?\(.*?\))/,n={},r=/(.*?)\((.*?)\)\s*/;return t.split(e).filter(function(t){return!!t}).forEach(function(t){var e=r.exec(t.trim());if(e)for(var i=1;i<e.length;i+=2){var o=e[i],a=e[i+1].trim();if((a.indexOf(" ")>-1||a.indexOf(",")>-1)&&(a=a.split(/,\s*|\s+/)),Zt(a))for(var s=0;s<a.length;s++)a[s]=Wt(a[s])?+a[s]:a[s];else Wt(a)&&(a=+a);n[o]=a}}),n}function Te(t){var e=[],n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r);return n.sort(),n.forEach(function(n){var r=Zt(t[n])?t[n].join(", "):t[n];e.push(n+"("+r+")")}),e.join(" ")}function ze(t,e){var n=t.node().getAttribute("class").trim().split(/^|\s+/),r=void 0;if("string"==typeof e)r=new RegExp(e);else{if(!(e instanceof RegExp))throw Io.InvalidArgumentType("removeClassByPattern","pattern","String or RegExp",e);r=e}n.forEach(function(e){r.test(e)&&t.classed(e,!1)})}function De(){return function(t,e){var n=e/2;return["M","-"+n+" 0","0 -"+t,n+" 0","A",[n+" "+n,0,0,1,"-"+n+" 0"].join(","),"Z"].join(" ")}}function Le(t,e,n,r){for(var i=null,o=0;o<t.length;o++)if(t[o]&&t[o][e]===n){i=t[o][r];break}return i}function Fe(t,e,n){t.each(function(){for(var t=d3.select(this),r=t.text().split(/\s+/).reverse(),i=t.attr("y"),o=parseFloat(t.attr("dy")),a=[],s=t.text(null).append("tspan").attr("x",0).attr("y",i).attr("dy",o+"em"),l=0,u=r.pop();u;)a.push(u),s.text(a.join(" ")),s.node().getComputedTextLength()>e&&(a.pop(),s.text(a.join(" ")),a=[u],++l,s=t.append("tspan").attr("x",0).attr("y",i).attr("dy",l*n+o+"em").text(u)),u=r.pop()})}function Be(t,e,n){t.each(function(){for(var t=d3.select(this),r=t.node(),i=e<1?1:e,o=t.text(),a=t.text(),s=!1;r.getComputedTextLength()>i;)a=a.slice(0,-1),t.text(a+n),s=!0;s&&t.append("title").text(o)})}function Ue(t){var e=window.getComputedStyle(t,null);return parseFloat(e.getPropertyValue("font-size"),10)}function Me(t,e){return(t+e)/2}function Ne(t){var e=this.width||0;t.attr("transform","translate("+e/2+", 30)").style("text-anchor","middle")}function Ye(t){var e=this.height||0;t.attr("transform","translate(-30, "+e/2+"), rotate(-90)").style("text-anchor","middle")}function He(t,e){var n=parseFloat(t.getPropertyValue(e),10);return isNaN(n)?0:n}function We(t){var e=window.getComputedStyle(t,null);return{rect:t.getBoundingClientRect(),style:e,pl:He(e,"padding-left"),pr:He(e,"padding-right"),pt:He(e,"padding-top"),pb:He(e,"padding-bottom")}}var Ve,Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},Ge=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Ke=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Ze=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},$e=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},qe=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Je=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Qe=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},tn=["click","touchstart","touchend","mouseover","mouseout"],en=["touchstart","mouseover"],nn=["touchend","mouseout"],rn=["suppressedError","extension"],on=["beforeRender","rendered","beforeUpdate","updated","beforeBoundsUpdate","boundsUpdated","beforeClear","cleared","beforeStyleDomainsReset","styleDomainsReset","beforeOptionChange","optionChanged","beforeDestroy","destroyed"],an=["beforeUpdate","updated","beforeClear","cleared","beforeOptionChange","optionChanged","beforeDestroy","destroyed"],sn=(Ve={},Ze(Ve,"mouseover",{action:"add",css:"over"}),Ze(Ve,"mouseout",{action:"remove",css:"over"}),Ze(Ve,"touchstart",{action:"add",css:"touch"}),Ze(Ve,"touchend",{action:"remove",css:"touch"}),Ve),ln=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),un="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",cn="\\ud83c[\\udffb-\\udfff]",pn="(?:\\ud83c[\\udde6-\\uddff]){2}",hn="[\\ud800-\\udbff][\\udc00-\\udfff]",dn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fn="[\\ufe0e\\ufe0f]?"+dn+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",pn,hn].join("|")+")[\\ufe0e\\ufe0f]?"+dn+")*"),yn="(?:"+["[^\\ud800-\\udfff]"+un+"?",un,pn,hn,"[\\ud800-\\udfff]"].join("|")+")",vn=RegExp(cn+"(?="+cn+")|"+yn+fn,"g"),_n="object"==("undefined"==typeof global?"undefined":Xe(global))&&global&&global.Object===Object&&global,gn="object"==("undefined"==typeof self?"undefined":Xe(self))&&self&&self.Object===Object&&self,bn=_n||gn||Function("return this")(),mn=bn.Symbol,kn=Array.isArray,Sn=Object.prototype,xn=Sn.hasOwnProperty,An=Sn.toString,On=mn?mn.toStringTag:void 0,In=Object.prototype.toString,Cn="[object Null]",En="[object Undefined]",Pn=mn?mn.toStringTag:void 0,Rn="[object Symbol]",wn=1/0,jn=mn?mn.prototype:void 0,Tn=jn?jn.toString:void 0,zn=function(t){return function(e){var i=r(e=f(e))?a(e):void 0,o=i?i[0]:e.charAt(0),s=i?n(i,1).join(""):e.slice(1);return o[t]()+s}}("toUpperCase"),Dn=function(t){return function(e){return null==t?void 0:t[e]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ln=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fn=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Bn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Un=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mn="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nn="["+Mn+"]",Yn="[a-z\\xdf-\\xf6\\xf8-\\xff]",Hn="[^\\ud800-\\udfff"+Mn+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Wn="[A-Z\\xc0-\\xd6\\xd8-\\xde]",Vn="(?:"+Yn+"|"+Hn+")",Xn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Gn="[\\ufe0e\\ufe0f]?"+Xn+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]","(?:\\ud83c[\\udde6-\\uddff]){2}","[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")[\\ufe0e\\ufe0f]?"+Xn+")*"),Kn="(?:"+["[\\u2700-\\u27bf]","(?:\\ud83c[\\udde6-\\uddff]){2}","[\\ud800-\\udbff][\\udc00-\\udfff]"].join("|")+")"+Gn,Zn=RegExp([Wn+"?"+Yn+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Nn,Wn,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Nn,Wn+Vn,"$"].join("|")+")",Wn+"?"+Vn+"+(?:['’](?:d|ll|m|re|s|t|ve))?",Wn+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)","\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)","\\d+",Kn].join("|"),"g"),$n=RegExp("['’]","g"),qn=k(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Jn=k(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Qn=k(function(t,e,n){return e=e.toLowerCase(),t+(n?S(e):e)}),tr=Array.prototype.splice;O.prototype.clear=function(){this.__data__=[],this.size=0},O.prototype.delete=function(t){var e=this.__data__,n=A(e,t);return!(n<0||(n==e.length-1?e.pop():tr.call(e,n,1),--this.size,0))},O.prototype.get=function(t){var e=this.__data__,n=A(e,t);return n<0?void 0:e[n][1]},O.prototype.has=function(t){return A(this.__data__,t)>-1},O.prototype.set=function(t,e){var n=this.__data__,r=A(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};var er="[object AsyncFunction]",nr="[object Function]",rr="[object GeneratorFunction]",ir="[object Proxy]",or=bn["__core-js_shared__"],ar=function(){var t=/[^.]+$/.exec(or&&or.keys&&or.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),sr=Function.prototype.toString,lr=/[\\^$.*+?()[\]{}|]/g,ur=/^\[object .+?Constructor\]$/,cr=Function.prototype,pr=Object.prototype,hr=cr.toString,dr=pr.hasOwnProperty,fr=RegExp("^"+hr.call(dr).replace(lr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yr=j(bn,"Map"),vr=j(Object,"create"),_r="__lodash_hash_undefined__",gr=Object.prototype.hasOwnProperty,br=Object.prototype.hasOwnProperty,mr="__lodash_hash_undefined__";T.prototype.clear=function(){this.__data__=vr?vr(null):{},this.size=0},T.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},T.prototype.get=function(t){var e=this.__data__;if(vr){var n=e[t];return n===_r?void 0:n}return gr.call(e,t)?e[t]:void 0},T.prototype.has=function(t){var e=this.__data__;return vr?void 0!==e[t]:br.call(e,t)},T.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=vr&&void 0===e?mr:e,this},L.prototype.clear=function(){this.size=0,this.__data__={hash:new T,map:new(yr||O),string:new T}},L.prototype.delete=function(t){var e=D(this,t).delete(t);return this.size-=e?1:0,e},L.prototype.get=function(t){return D(this,t).get(t)},L.prototype.has=function(t){return D(this,t).has(t)},L.prototype.set=function(t,e){var n=D(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};var kr=200;F.prototype.clear=function(){this.__data__=new O,this.size=0},F.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},F.prototype.get=function(t){return this.__data__.get(t)},F.prototype.has=function(t){return this.__data__.has(t)},F.prototype.set=function(t,e){var n=this.__data__;if(n instanceof O){var r=n.__data__;if(!yr||r.length<kr-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new L(r)}return n.set(t,e),this.size=n.size,this};var Sr="__lodash_hash_undefined__";B.prototype.add=B.prototype.push=function(t){return this.__data__.set(t,Sr),this},B.prototype.has=function(t){return this.__data__.has(t)};var xr=1,Ar=2,Or=bn.Uint8Array,Ir=1,Cr=2,Er="[object Boolean]",Pr="[object Date]",Rr="[object Error]",wr="[object Map]",jr="[object Number]",Tr="[object RegExp]",zr="[object Set]",Dr="[object String]",Lr="[object Symbol]",Fr="[object ArrayBuffer]",Br="[object DataView]",Ur=mn?mn.prototype:void 0,Mr=Ur?Ur.valueOf:void 0,Nr=Object.prototype.propertyIsEnumerable,Yr=Object.getOwnPropertySymbols,Hr=Yr?function(t){return null==t?[]:(t=Object(t),G(Yr(t),function(e){return Nr.call(t,e)}))}:function(){return[]},Wr="[object Arguments]",Vr=Object.prototype,Xr=Vr.hasOwnProperty,Gr=Vr.propertyIsEnumerable,Kr=Z(function(){return arguments}())?Z:function(t){return p(t)&&Xr.call(t,"callee")&&!Gr.call(t,"callee")},Zr="object"==(void 0===t?"undefined":Xe(t))&&t&&!t.nodeType&&t,$r=Zr&&"object"==("undefined"==typeof module?"undefined":Xe(module))&&module&&!module.nodeType&&module,qr=$r&&$r.exports===Zr?bn.Buffer:void 0,Jr=(qr?qr.isBuffer:void 0)||function(){return!1},Qr=9007199254740991,ti=/^(?:0|[1-9]\d*)$/,ei=9007199254740991,ni={};ni["[object Float32Array]"]=ni["[object Float64Array]"]=ni["[object Int8Array]"]=ni["[object Int16Array]"]=ni["[object Int32Array]"]=ni["[object Uint8Array]"]=ni["[object Uint8ClampedArray]"]=ni["[object Uint16Array]"]=ni["[object Uint32Array]"]=!0,ni["[object Arguments]"]=ni["[object Array]"]=ni["[object ArrayBuffer]"]=ni["[object Boolean]"]=ni["[object DataView]"]=ni["[object Date]"]=ni["[object Error]"]=ni["[object Function]"]=ni["[object Map]"]=ni["[object Number]"]=ni["[object Object]"]=ni["[object RegExp]"]=ni["[object Set]"]=ni["[object String]"]=ni["[object WeakMap]"]=!1;var ri="object"==(void 0===t?"undefined":Xe(t))&&t&&!t.nodeType&&t,ii=ri&&"object"==("undefined"==typeof module?"undefined":Xe(module))&&module&&!module.nodeType&&module,oi=ii&&ii.exports===ri&&_n.process,ai=function(){try{return oi&&oi.binding&&oi.binding("util")}catch(t){}}(),si=ai&&ai.isTypedArray,li=si?function(t){return function(e){return t(e)}}(si):function(t){return p(t)&&q(t.length)&&!!ni[c(t)]},ui=Object.prototype.hasOwnProperty,ci=Object.prototype,pi=tt(Object.keys,Object),hi=Object.prototype.hasOwnProperty,di=1,fi=Object.prototype.hasOwnProperty,yi=j(bn,"DataView"),vi=j(bn,"Promise"),_i=j(bn,"Set"),gi=j(bn,"WeakMap"),bi=P(yi),mi=P(yr),ki=P(vi),Si=P(_i),xi=P(gi),Ai=c;(yi&&"[object DataView]"!=Ai(new yi(new ArrayBuffer(1)))||yr&&"[object Map]"!=Ai(new yr)||vi&&"[object Promise]"!=Ai(vi.resolve())||_i&&"[object Set]"!=Ai(new _i)||gi&&"[object WeakMap]"!=Ai(new gi))&&(Ai=function(t){var e=c(t),n="[object Object]"==e?t.constructor:void 0,r=n?P(n):"";if(r)switch(r){case bi:return"[object DataView]";case mi:return"[object Map]";case ki:return"[object Promise]";case Si:return"[object Set]";case xi:return"[object WeakMap]"}return e});var Oi=Ai,Ii=1,Ci="[object Arguments]",Ei="[object Array]",Pi="[object Object]",Ri=Object.prototype.hasOwnProperty,wi=mn?mn.isConcatSpreadable:void 0,ji=1/0,Ti=Object.prototype.hasOwnProperty,zi=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Di=/^\w*$/,Li="Expected a function";ht.Cache=L;var Fi=500,Bi=/^\./,Ui=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Mi=/\\(\\)?/g,Ni=function(t){var e=ht(t,function(t){return n.size===Fi&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return Bi.test(t)&&e.push(""),t.replace(Ui,function(t,n,r,i){e.push(r?i.replace(Mi,"$1"):n||t)}),e}),Yi=1/0,Hi=function(){try{var t=j(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Wi=Object.prototype.hasOwnProperty,Vi=Math.max,Xi=Hi?function(t,e){return Hi(t,"toString",{configurable:!0,enumerable:!1,value:xt(e),writable:!0})}:kt,Gi=800,Ki=16,Zi=Date.now,$i=function(t){var e=0,n=0;return function(){var r=Zi(),i=Ki-(r-n);if(n=r,i>0){if(++e>=Gi)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(Xi),qi=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var l=a[t?s:++i];if(!1===n(o[l],l,o))break}return e}}(),Ji="object"==(void 0===t?"undefined":Xe(t))&&t&&!t.nodeType&&t,Qi=Ji&&"object"==("undefined"==typeof module?"undefined":Xe(module))&&module&&!module.nodeType&&module,to=Qi&&Qi.exports===Ji?bn.Buffer:void 0,eo=to?to.allocUnsafe:void 0,no=Object.create,ro=function(){function t(){}return function(e){if(!I(e))return{};if(no)return no(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),io=tt(Object.getPrototypeOf,Object),oo="[object Object]",ao=Function.prototype,so=Object.prototype,lo=ao.toString,uo=so.hasOwnProperty,co=lo.call(Object),po=Object.prototype.hasOwnProperty,ho=function(t){return At(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&Nt(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}(function(t,e,n,r){Ut(t,e,n,r)}),fo=At(function(t){return t.push(void 0,Mt),mt(ho,void 0,t)}),yo=function(t,e,n){return null==t?t:bt(t,e,n)},vo=function(t,e,n){var r=null==t?void 0:vt(t,e);return void 0===r?n:r},_o=function(t,e){return null!=t&&yt(t,e,ct)},go=function(t){return(null==t?0:t.length)?ut(t,ji):[]},bo=function(t,e){return st(t,e)},mo=Qn,ko=Jn,So=qn,xo=zn,Ao=void 0,Oo="An error has occurred, but no specific message was provided. Please use the stacktrace to debug.",Io=function(t){function e(t){Ge(this,e);for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=[t||Oo].concat(r).join(" "),a=Je(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return a.name=a.constructor.name,a.message=o,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(a,a.constructor):a.stack=new Error(t).stack,a}return qe(e,t),Ke(e,null,[{key:"UnimplementedMethod",value:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chart",i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return new(Function.prototype.bind.apply(e,[null].concat([t+" (`"+n+"`) needs to be defined in order for the "+r+" to be useful."],o)))}},{key:"InvalidArgumentType",value:function(t,n,r,i){for(var o=arguments.length,a=Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];return new(Function.prototype.bind.apply(e,[null].concat(["Method ("+t+') argument "'+n+'" of unexpected type. Expected '+r+", but was given "+i+"."],a)))}}]),e}(Error),Co=function(){function t(e,n){var r=this;Ge(this,t),this._instances=[];for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];this._methodsToProxy=n.concat(go.apply(void 0,o)),this._methodsToProxy.forEach(function(t){return r.addProxyMethod(t)}),e.forEach(function(t){return r.addInstance(t)})}return Ke(t,[{key:"addProxyMethod",value:function(t){this[t]=this.invokeProxyMethod.bind(this,t)}},{key:"removeProxyMethod",value:function(t){var e=this._methodsToProxy.indexOf(t);e>-1&&this._methodsToProxy.splice(e,1)}},{key:"addInstance",value:function(t){t&&this._instances.push(t)}},{key:"removeChart",value:function(t){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1)}},{key:"invokeProxyMethod",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._instances.forEach(function(e){if(!(e&&e[t]&&Xt(e[t])))throw new Io("Cannot invoke "+t+" on "+e);e[t].apply(e,n)}),this}},{key:"getProxiedMethods",value:function(){return this._methodsToProxy}},{key:"destroy",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._instances.forEach(function(t){t&&t.destroy&&Xt(t.destroy)&&t.destroy.apply(t,e)}),this._instances.length=0}}]),t}(),Eo=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,null,[{key:"RequiredOption",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new(Function.prototype.bind.apply(e,[null].concat(['Option "'+t+'" is required.'],r)))}},{key:"InvalidEnumOption",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat(['Option "'+t+'" must be set to a valid option. The value "'+n+'" is not valid.'],i)))}},{key:"OptionMustBeFunction",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new(Function.prototype.bind.apply(e,[null].concat(['Option "'+t+'" must be a function.'],r)))}}]),e}(Io),Po=d3.easeCubic,Ro="enter",wo="update",jo="exit",To={ENTER:Ro,UPDATE:wo,EXIT:jo},zo=Object.freeze({AXIS_SHIFT:.5,TRANSITION_DURATION_MS:250,TRANSITION_DELAY_MS:0,TRANSITION_EASE:Po,TRANSITION_EASE_START_POSITION:0,TRANSITION_EASE_END_POSITION:1,ENTER:Ro,UPDATE:wo,EXIT:jo,UPDATE_PATTERN:To,BRUSH_HANDLE_SIZE:6,SYMBOL_SIZE:64}),Do={delay:0,duration:250,ease:Po},Lo={standard:Do,none:{delay:0,duration:0,ease:function(){return 1}}},Fo=function t(e){Ge(this,t),this.value=e},Bo=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),e}(Fo),Uo={timeoutDelayMs:{FPS_30:33,FPS_20:50,FPS_15:66,FPS_10:100,FPS_05:200}.FPS_15,target:window,eventName:"resize",documentLoadRun:!0},Mo=function(){function t(e){var n=this;if(Ge(this,t),this.opts=te(e,Uo),this.callbacks=[],this.running=!1,this.pendingFrame=null,this.pendingTimeout=null,this.listenerAttached=!1,this.documentReady=null,!this.opts.eventName)throw new t.EventWatcherException("An event name must be given!");this.opts.documentLoadRun&&function(){var t=n,e=function e(){setTimeout(function(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t.documentReady=!0,t.runCallbacks()},0)};n.documentReady=!1,document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e),"complete"===document.readyState&&e()}()}return Ke(t,[{key:"_fired",value:function(){if(!this.running){this.running=!0;var t=this._runCallbacks.bind(this);window.requestAnimationFrame?this.pendingFrame=window.requestAnimationFrame(t):this.pendingTimeout=setTimeout(t,this.opts.timeoutDelayMs)}}},{key:"_runCallbacks",value:function(){this.pendingFrame=this.pendingTimeout=null,this.runCallbacks(),this.running=!1}},{key:"runCallbacks",value:function(){this.callbacks.forEach(function(t){return t()})}},{key:"add",value:function(t){this.listenerAttached||(this.opts.target.addEventListener(this.opts.eventName,this._fired.bind(this)),this.listenerAttached=!0),t&&this.callbacks.push(t)}},{key:"remove",value:function(t){if(this.callbacks.length){var e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}return this}},{key:"destroy",value:function(){this.pendingFrame?window.cancelAnimationFrame(this.pendingFrame):this.pendingTimeout&&clearTimeout(this.pendingTimeout),this.listenerAttached&&this.opts.target.removeEventListener(this.opts.eventName,this._fired.bind(this))}},{key:"timeoutDelay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.opts.timeoutDelayMs:(this.opts.timeoutDelayMs=t,this)}}]),t}(),No=new(function(){function t(){Ge(this,t),this._developerMode=!1,this._developerModeEvents=null,this._resizeWatch=new Mo,this.extensionId=0,this.chartId=0}return Ke(t,[{key:"getNextChartId",value:function(){return this.chartId++}},{key:"resetChartCount",value:function(){this.chartId=0}},{key:"getNextExtensionId",value:function(){return this.extensionId++}},{key:"resetExtensionCount",value:function(){this.extensionId=0}},{key:"getResizeWatcher",value:function(){return this._resizeWatch}},{key:"isDeveloperMode",value:function(){return this._developerMode}},{key:"setDeveloperModeEvents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._developerModeEvents=go(e),this._developerMode=!0}},{key:"getDeveloperModeEvents",value:function(){return this._developerModeEvents}},{key:"clearDeveloperModeEvents",value:function(){this._developerModeEvents=null}},{key:"clearDeveloperMode",value:function(){this._developerMode=!1}},{key:"enableDeveloperMode",value:function(){this._developerMode=!0}}]),t}());"object"===("undefined"==typeof window?"undefined":Xe(window))&&(window.MonteGlobal=No);var Yo="drawPath",Ho={css:"",boundingWidth:250,boundingHeight:250,margin:{top:0,right:0,bottom:0,left:0},customEvents:[],extensions:[],transition:Do,resize:null,dataKey:ne,autoResetStyleDomains:!1,directUse:!1,developerOptions:{scales:!1,transitions:!1,listeners:!1}},Wo=function(){function t(e,n,r){Ge(this,t),this._constructed=!1,this._optsSet=!1,this.hasRendered=!1,this.layers=[],this.extensions=[],this._optionReaderCache={},this.__chartId=No.getNextChartId(),this.parentSelector=e,this._initOptions(n),this._initPublicEvents.apply(this,Qe(tn).concat(Qe(rn),Qe(on),Qe(this.opts.customEvents))),(this.opts.developerMode||No.isDeveloperMode())&&this._initDeveloperMode(),this._initCore(),this._initCustomize(),this._boundsUpdate(),this._bindExt(this.tryInvoke(this.opts.extensions)),this._initRender(),this._constructed=!0,this._resizeHandler&&No.getResizeWatcher().documentReady&&this._resizeHandler(),r&&this.data(r)}return Ke(t,[{key:"getChartId",value:function(){return this.__chartId}},{key:"_getChartAttr",value:function(){return"monte-chart-"+this.getChartId()}},{key:"_initOptions",value:function(){this.opts={};for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=te.apply(void 0,e.concat([Ho]));for(var i in r)r.hasOwnProperty(i)&&this.option(i,r[i]);this._optsSet=!0}},{key:"_initCore",value:function(){var t=this,e=d3.select(this.parentSelector);if(null===e.node())throw new Io('Invalid selector. "'+this.parentSelector+'" did not match any element."');"svg"===e.node().tagName.toLowerCase()?this.bound=e:this.bound=e.append("svg"),this.bound.attr(this._getChartAttr(),""),this.bound.node().monteChart=this,this.bound.classed(this._buildCss(["monte-chart",this.opts.css,this.opts.chartCss]),!0),this.defs=this.bound.append("defs"),this.clip=this.defs.append("clipPath").attr("id",ee(this.getChartId())),this.clipRect=this.clip.append("rect").attr("x",0).attr("y",0),this._initLayers();var n=this;tn.forEach(function(e){t.bound.on(e,function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];n.__notify.apply(n,[e,this].concat(r))})});var r=this.tryInvoke(this.opts.resize);r&&(this._resizeHandler=r.resize.bind(r,this),No.getResizeWatcher().add(this._resizeHandler))}},{key:"_initLayers",value:function(){this.addLayer("bg"),this.addLayer("support"),this.addLayer("selection"),this.addLayer("draw"),this.addLayer("overlay")}},{key:"_initPublicEvents",value:function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];this._events=n,this.dispatch=(t=d3).dispatch.apply(t,n)}},{key:"_initDeveloperMode",value:function(){var t=this,e=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o="(no arguments)";r&&r.length>0&&(o="\n",r.forEach(function(t,e){if($t(t)){var n=Xt(t)?"func: '"+(t.name||"anonymous")+"'":t;o+="\t"+e+": "+n+"\n"}})),console.log("["+t+'] "'+e+'": '+o)};this.developerMode=!0,(Zt(this.opts.developerMode)||No.getDeveloperModeEvents()?this.opts.developerMode||No.getDeveloperModeEvents():this._events).forEach(function(n){t.opts.developerOptions.listeners&&console.log("["+t+'] Adding listener for "'+n+'"'),t.on(n+".developerMode",e.bind(t,n))})}},{key:"_initCustomize",value:function(){}},{key:"_initRender",value:function(){}},{key:"_boundsUpdate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.__notify("beforeBoundsUpdate"),this.margin=this.opts.margin,this.width=this.opts.boundingWidth-this.margin.left-this.margin.right,this.height=this.opts.boundingHeight-this.margin.top-this.margin.bottom,this.layers.forEach(function(e){return e.attr("transform",t._getLayerTranslate())}),this.bound&&this.bound.attr("width",this.opts.boundingWidthAttr||this.opts.boundingWidth).attr("height",this.opts.boundingHeightAttr||this.opts.boundingHeight),this.clipRect&&this.clipRect.attr("width",this.width).attr("height",this.height);var r=function(){t._constructed&&t.__notify("boundsUpdated")},i=function(){t.hasRendered&&t.update()};return e||r(),n||i(),{notify:r,update:i}}},{key:"checkSize",value:function(){return this._resizeHandler&&this._resizeHandler(),this}},{key:"destroy",value:function(){this.__notify("beforeDestroy"),this._resizeHandler&&No.getResizeWatcher().remove(this._resizeHandler),this._destroy(),this.bound.node()===d3.select(this.parentSelector).node()?this.bound.node().innerHTML="":this.bound.remove(),this.__notify("destroyed")}},{key:"_destroy",value:function(){}},{key:"addLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"g",n=this.bound.append(e).attr("class","monte-"+t);return this[t]=n,this.layers.push(n),this}},{key:"layerUseClipPath",value:function(t,e){return $t(e)||(e=ee(this.getChartId())),this[t].attr("clip-path","url(#"+e+")"),this}},{key:"_getLayerTranslate",value:function(){return"translate("+this.margin.left+", "+this.margin.top+")"}},{key:"boundingRect",value:function(t,e){if(0===arguments.length)return[this.opts.boundingWidth,this.opts.boundingHeight];if(arguments.length>=1&&$t(t)){var n=this.option("margin.left")+this.option("margin.right");t<n&&(t=n),this.opts.boundingWidth=t}if(2===arguments.length&&$t(e)){var r=this.option("margin.top")+this.option("margin.bottom");e<r&&(e=r),this.opts.boundingHeight=e}return this._boundsUpdate(),this.update(),this}},{key:"on",value:function(t,e){return arguments.length<2?this.dispatch.on(t):(this.dispatch.on(t,e),this)}},{key:"onExt",value:function(t,e){if(arguments.length<2)return this.on(t);var n="extension."+t;return null===e?this.on(n,null):this.on(n,function(n){if(0===n.indexOf(t)){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e.call.apply(e,[this,n].concat(i))}}),this}},{key:"emit",value:function(t){if(t){if(!this.dispatch._[t])throw new Io("Unknown event "+t+". Double check the spelling or register the event. Custom events must registered at chart creation.");for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this.__notify.apply(this,[t].concat(n)),this}}},{key:"option",value:function(t,e){var n=vo(this.opts,t);if(e===Ao)return n;this._optsSet&&this.__notify("beforeOptionChange",t),yo(this.opts,t,e);var r=this.__handleMarginOptions(t,e,n);return this._optsSet&&(r&&this._boundsUpdate(),this.__notify("optionChanged",t)),this}},{key:"__handleMarginOptions",value:function(t,e,n){var r=!1;if("margin"===t)if(Kt(e))bo(n,e)||(r=!0);else{var i={top:e,left:e,right:e,bottom:e};bo(n,i)||(this.opts.margin=i,r=!0)}else/^margin\./.test(t)&&n!==e&&(r=!0);return r}},{key:"optionReaderFunc",value:function(t){var e=this;if(!Vt(t))throw Io.InvalidArgumentType("optionReaderFunc","optionKey","string",t);return this._optionReaderCache[t]||(this._optionReaderCache[t]=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.tryInvoke.apply(e,[e.opts[t]].concat(r))}),this._optionReaderCache[t]}},{key:"tryInvoke",value:function(t){if(null===t)return null;if(t===Ao)throw new Eo("Value not initialized.");try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Xt(t)?t.call.apply(t,[this].concat(n)):t}catch(t){return console&&console.error&&console.error(t),this.__notify("suppressedError",t),null}}},{key:"fnInvoke",value:function(t){if(null==t||!Xt(t))return null;try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.call.apply(t,[this].concat(n))}catch(t){return this.__notify("suppressedError",t),null}}},{key:"getPropKey",value:function(t){var e=t+"Prop";if(this.opts[e])return this.opts[e];if(this.opts[t]){var n=t.indexOf("Prop");if(n>-1){var r=t.substring(0,n);throw new Io('Property options should be accessed using short names without the "Prop" suffix. Given '+t+", but expected "+r+".")}}return null}},{key:"getProp",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.getPropKey(t);return r?e[r]:n}},{key:"getScaledProp",value:function(t,e,n){var r=void 0,i=void 0,o=void 0;if(2===arguments.length)i=t,o=e;else{if(3!==arguments.length)throw new Io("Incorrect number of arguments. Expected 2 or 3 recieved "+arguments.length);i=e,o=n}var a=vo(this,t);if(!a)throw new Io('Scale "'+t+'" is not defined.');return a===Yt?Ao:Xt(a)?(r=Kt(o)?o[this.opts[i+"Prop"]]:o,a(r)):a}},{key:"clear",value:function(){return this.__notify("beforeClear"),this.displayData=null,this._clearDataElements(),this.opts.autoResetStyleDomains&&this.resetStyleDomains(),this.__notify("cleared"),this}},{key:"_clearDataElements",value:function(){}},{key:"resetStyleDomains",value:function(){return this.__notify("beforeStyleDomainsReset"),this._resetStyleDomains(),this.__notify("styleDomainsReset"),this}},{key:"_resetStyleDomains",value:function(){}},{key:"_buildCss",value:function(t,e,n,r){var i=this,o=[];return(Array.isArray(t)?t:[t]).forEach(function(t){$t(t)&&o.push(i.tryInvoke(t,e,n,r))}),o.join(" ").replace(/\s+/," ")}},{key:"_transitionSetup",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=t._transitionSettings.apply(t,n),s=a.duration,l=a.delay,u=a.ease;t._transitionConfigureDuration.apply(t,[e,s].concat(i)),t._transitionConfigureDelay.apply(t,[e,l].concat(i)),e.ease(u)}}},{key:"_transitionConfigureDuration",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=null;Xt(e)&&r&&r.length&&(o=function(t,n,i){return e.apply(void 0,[t,n,i].concat(r))}),t.duration(o||e)}},{key:"_transitionConfigureDelay",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=null;Xt(e)&&r&&r.length&&(o=function(t,n,i){return e.apply(void 0,[t,n,i].concat(r))}),t.delay(o||e)}},{key:"_transitionConfigure",value:function(t,e,n,r,i){for(var o=e.duration,a=e.delay,s=e.ease,l=arguments.length,u=Array(l>5?l-5:0),c=5;c<l;c++)u[c-5]=arguments[c];t.duration(this.tryInvoke.apply(this,[o,n,r,i].concat(u))).delay(this.tryInvoke.apply(this,[a,n,r,i].concat(u))).ease(s)}},{key:"_transitionSettings",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.tryInvoke(this.opts.transition),i=qt(r,e,"duration",Do.duration),o=qt(r,e,"delay",Do.delay),a=qt(r,e,"ease",Do.ease);return this.developerMode&&this.opts.developerOptions.transitions&&(console.log("Transition: "+e.join(".")),console.log({levels:e,duration:i,delay:o,ease:a})),{duration:i,delay:o,ease:a}}},{key:"attr",value:function(t,e){return e===Ao?this.bound.attr(t):(this.bound.attr(t,e),this)}},{key:"style",value:function(t,e){return e===Ao?this.bound.style(t):(this.bound.style(t,e),this)}},{key:"classed",value:function(){var t;return(t=this.bound).classed.apply(t,arguments),this}},{key:"call",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.call.apply(t,[this].concat(n)),this}},{key:"updateData",value:function(t){return this.data(t,!0),this}},{key:"data",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t===Ao?this.displayData:(e||this.clear(),this._data(t),n||this.update(),this)}},{key:"_data",value:function(t){this.displayData=t}},{key:"getRawData",value:function(){return this.rawData?this.rawData:this.displayData}},{key:"addExt",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._bindExt(e),this}},{key:"_bindExt",value:function(t){var e=this;t.forEach(function(t){t.opts.binding?(t.setChart(e),e.extensions.push(t)):e.__notify("suppressedError","Extensions must have the `binding` option specified.")})}},{key:"__updateExt",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.extensions.forEach(function(e){e.opts.binding.indexOf(t)>-1&&e.fire.apply(e,[t].concat(n))})}},{key:"replaceScale",value:function(t,e){var n=e();return n.range(this[t].range()).domain(this[t].domain()),this[t]=n,this.update(),this}},{key:"update",value:function(){return this.data()?(this.hasRendered||(this.__notify("beforeRender"),this._render(),this.hasRendered=!0,this.__notify("rendered")),this.__notify("beforeUpdate"),this._update(),this.__notify("updated"),this):this}},{key:"_render",value:function(){}},{key:"_update",value:function(){if(!this.opts.directUse)throw Io.UnimplementedMethod("Update","_update")}},{key:"__bindCommonEvents",value:function(t){var e=this;return function(n){tn.forEach(function(r){return n.on(r,function(n,i,o){return e.__elemEvent(r,t+":"+r,n,i,o)})})}}},{key:"__notify",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.__updateExt.apply(this,[t].concat(r)),(e=this.dispatch).call.apply(e,[t,this].concat(r))}},{key:"__elemEvent",value:function(t,e,n,r,i){var o=i[r],a=sn[t];a&&("add"===a.action?d3.select(o).classed(a.css,!0):"remove"===a.action&&d3.select(o).classed(a.css,!1)),this.__notify(e,n,r,i)}},{key:"toString",value:function(){return this.constructor.name}}],[{key:"generateScaleAccessor",value:function(t,e){return e?function(n){var r="opts."+t,i=this.getScaledProp(r,e,n);return this.developerMode&&this.opts.developerOptions.scales&&i!==Ao&&console.log(r,i),i}:function(e,n){var r=vo(this,"opts."+t)(n);return this.developerMode&&console.log(r),r}}},{key:"createInstanceGroup",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new Co(t,Vo,n)}}]),t}(),Vo=["addExt","addLayer","boundingRect","call","checkSize","classed","clear","data","emit","layerUseClipPath","on","option","replaceScale","resetStyleDomains","update","updateData"],Xo=["beforeAxisRender","axisRendered"],Go={axes:["x","y"],suppressAxes:!1,xProp:"x",xScale:d3.scaleLinear,xAxisCustomize:null,xDomainCustomize:null,xRange:function(t,e){return[0,t]},xAxisConstructor:d3.axisBottom,xAxisTransform:function(t,e){return"translate(0,"+e+")"},xLabel:null,xLabelCustomize:Yt,xTickLabelCustomize:Yt,yProp:"y",yScale:d3.scaleLinear,yAxisCustomize:null,yDomainCustomize:null,yRange:function(t,e){return[e,0]},yAxisConstructor:d3.axisLeft,yAxisTransform:null,yLabel:null,yLabelCustomize:Yt,yTickLabelCustomize:Yt},Ko=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"__axisOpt",value:function(t,e){return this.opts[""+t+e]}},{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Go])),$t(this.opts.axes)||(this.opts.axes=[]),this.axes=this.tryInvoke(this.opts.axes)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Xo))}},{key:"_initCore",value:function(){var t=this;$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"Range")(t.width,t.height),r=t.__axisOpt(e,"Scale")().range(n);t[e]=r,t[e+"Axis"]=t.__axisOpt(e,"AxisConstructor")(r)})}},{key:"_initCustomize",value:function(){var t=this;this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"AxisCustomize");Zt(n)?function(){var r=t[e+"Axis"];n.forEach(function(e){return e.call(t,r)})}():Xt(n)&&n.call(t,t[e+"Axis"])})}},{key:"_initRender",value:function(){var t=this;this.forEachAxisScale(function(e){t.support.append("g").attr("class",e+"-axis axis")}),this.updateAxesTransforms(),$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initRender",this).call(this)}},{key:"_boundsUpdate",value:function(){var t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_boundsUpdate",this).call(this,!0,!0);this.updateAxesRanges(),this.updateAxesTransforms(),this.renderAxes(),t.notify(),t.update()}},{key:"_data",value:function(t){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t),this.updateAxesDomains(),this.renderAxes()}},{key:"replaceScale",value:function(t,n){return $e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceScale",this).call(this,t,n),this[t+"Axis"].scale(this[t]),this.renderAxes(),this}},{key:"updateAxesTransforms",value:function(){var t=this;return this.forEachAxisScale(function(e){var n=t.support.select("."+e+"-axis"),r=t.__axisOpt(e,"AxisTransform");r&&n.attr("transform",t.tryInvoke(r,t.width,t.height))}),this}},{key:"updateAxesRanges",value:function(){var t=this;return this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"Range").call(t,t.width,t.height);t[e].range(n)}),this}},{key:"updateAxesDomains",value:function(){var t=this,e=this.data();return this.forEachAxisScale(function(n){var r=t.opts[n+"DomainCustomize"],i=e?t._domainExtent(e,n):[];r&&(i=t.tryInvoke(r,i)),t[n].domain(i)}),this}},{key:"renderAxes",value:function(){var t=this,e=this.tryInvoke(this.opts.suppressAxes);if(!0!==e){var n=Zt(e),r=this.hasRendered?wo:Ro,i=this.bound.transition().call(this._transitionSetup("axis",r));return this.forEachAxisScale(function(r){if(!(n&&e.indexOf(r)>-1)){var o=t[r+"Axis"];t.emit("beforeAxisRender",r,o),t.support.select("."+r+"-axis").transition(i).call(o).call(t._setLabel.bind(t,r)).call(function(e){return t.emit("axisRendered",r,o,e)})}}),this}}},{key:"_domainExtent",value:function(t,e){if(this.opts.directUse)return[0,1];throw Io.UnimplementedMethod("Domain Extent","_domainExtent")}},{key:"forEachAxisScale",value:function(t){return this.axes.forEach(t),this}},{key:"_setLabel",value:function(t,e){var n=this,r=$t(this.opts[t+"Label"])?this.tryInvoke(this.opts[t+"Label"]):null,i=null===r?[]:[r],o=this.support.select("."+t+"-axis").selectAll(".monte-axis-label").data(i);o.enter().append("text").merge(o).attr("class","monte-axis-label").text(function(t){return t}).call(function(e){var r=t+"LabelCustomize",i=n.opts[r];if(i){if(!Xt(i))throw Eo.OptionMustBeFunction(r,"("+r+" is optional)");n.fnInvoke(i,e)}}),o.exit().remove()}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(Zo),(n=$e(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Wo);Ko.EVENTS=Xo;var Zo=["forEachAxisScale","renderAxes","replaceScale","updateAxesDomains","updateAxesRanges","updateAxesTransforms"],$o=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_getLayerTranslate",value:function(){var t=void 0,e=void 0;return this.opts.origin?(t=this.tryInvoke(this.opts.origin.left,this),e=this.tryInvoke(this.opts.origin.top,this)):(t=this.width/2+this.margin.left,e=this.height/2+this.margin.top),"translate("+t+", "+e+")"}}]),e}(Wo),qo={chartCss:"monte-line-chart",margin:{top:10,right:10,bottom:30,left:40},valuesProp:"values",lineProp:"",lineCustomize:null,lineStrokeScale:Yt,lineStrokeScaleAccessor:Ko.generateScaleAccessor("lineStrokeScale","lineProp"),lineCssScale:Yt,lineCssScaleAccessor:Ko.generateScaleAccessor("lineCssScale","lineProp"),lineCss:"line",includePoints:!1,pointProp:"",pointFillScale:Yt,pointFillScaleAccessor:Ko.generateScaleAccessor("pointFillScale","pointProp"),pointStrokeScale:Yt,pointStrokeScaleAccessor:Ko.generateScaleAccessor("pointStrokeScale","pointProp"),pointCssScale:Yt,pointCssScaleAccessor:Ko.generateScaleAccessor("pointCssScale","pointProp"),pointCss:"point",pointSize:64,pointSymbol:function(t){return t.type(d3.symbolCircle)},pointDataKey:Ko.defaultDataKey},Jo=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[qo]))}},{key:"_initCore",value:function(){var t=this;$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.line=d3.line().x(function(e){return t.getScaledProp("x",e)}).y(function(e){return t.getScaledProp("y",e)})}},{key:"_initCustomize",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.lineCustomize&&this.opts.lineCustomize(this.line)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("line")),Qe(re("point"))))}},{key:"_domainExtent",value:function(t,e){var n=this.opts.valuesProp,r=this.opts[e+"Prop"],i=t.map(function(t){return d3.extent(t[n],function(t){return t[r]})});return[d3.min(i,function(t){return t[0]}),d3.max(i,function(t){return t[1]})]}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.lineStrokeScale),ie(this.opts.lineCssScale),ie(this.opts.pointFillScale),ie(this.opts.pointStrokeScale),ie(this.opts.pointCssScale)}},{key:"_update",value:function(){var t=this,e=this._updateLines();return this.opts.includePoints&&e.each(function(e,n,r){return t._updateLinePoints(r[n],e,n)}),e}},{key:"_updateLines",value:function(){var t=this.draw.selectAll(".monte-line-grp").data(this.displayData,this.opts.dataKey),e=t.enter().append("g").attr("class","monte-line-grp").append("path").call(this.__bindCommonEvents("line"));this._updateLineSelection(e,Ro);var n=t.select(".monte-line");return this._updateLineSelection(n,wo),t.exit().transition().call(this._transitionSetup("line",jo)).style("opacity",0).remove(),t.merge(t.enter().selectAll(".monte-line-grp"))}},{key:"_updateLineSelection",value:function(t,e){var n=this,r="line"+xo(e)+"SelectionCustomize",i="line"+xo(e)+"TransitionCustomize";t.attr("class",function(t,e){return n._buildCss(["monte-line",n.opts.lineCss,n.opts.lineCssScaleAccessor,t.css],t,e)}).call(function(t){return n.fnInvoke(n.opts[r],t)}).transition().call(this._transitionSetup("line",e)).attr("d",function(t){return n.line(n.getProp("values",t))}).style("stroke",this.optionReaderFunc("lineStrokeScaleAccessor")).call(function(t){return n.fnInvoke(n.opts[i],t)})}},{key:"_updateLinePoints",value:function(t,e,n){var r=this,i=d3.select(t).selectAll(".monte-point").data(function(t){return r.getProp("values",t)},this.opts.pointDataKey),o=function(t,e){var n=r.tryInvoke(r.opts.pointSize,t,e),i=d3.symbol().size(n);return r.opts.pointSymbol(i,t,e)(t,e)};i.enter().append("path").call(this.__bindCommonEvents("point")).attr("d",o).attr("transform",function(t){return r._translatePoint(t)}).attr("class",function(t){return r._buildCss(["monte-point",e.css,r.opts.lineCssScaleAccessor,r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n)}).call(function(t){return r.fnInvoke(r.opts.pointEnterSelectionCustomize,t)}).transition().call(this._transitionSetup("point",Ro)).attr("transform",function(t){return r._translatePoint(t)}).call(function(t){return r.fnInvoke(r.opts.pointEnterTransitionCustomize,t)}),i.attr("class",function(t){return r._buildCss(["monte-point",e.css,r.opts.lineCssScaleAccessor,r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n)}).call(function(t){return r.fnInvoke(r.opts.pointUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup("point",wo)).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return r._translatePoint(t)}).attr("d",o).call(function(t){return r.fnInvoke(r.opts.pointUpdateTransitionCustomize,t)}),i.exit().call(function(t){return r.fnInvoke(r.opts.pointExitSelectionCustomize,t)}).transition().call(this._transitionSetup("point",jo)).style("opacity",0).call(function(t){return r.fnInvoke(r.opts.pointExitTransitionCustomize,t)}).remove()}},{key:"_translatePoint",value:function(t){return"translate("+this.getScaledProp("x",t)+", "+this.getScaledProp("y",t)+")"}}]),e}(Ko),Qo={chartCss:"monte-area-chart",margin:{top:10,right:10,bottom:30,left:40},areaProp:"",areaCustomize:null,areaFillScale:Yt,areaFillScaleAccessor:Jo.generateScaleAccessor("areaFillScale","areaProp"),areaCssScale:Yt,areaCssScaleAccessor:Jo.generateScaleAccessor("areaCssScale","areaProp"),areaCss:"area",yDomainCustomize:ae},ta=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Qo]))}},{key:"_initCore",value:function(){var t=this;$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.area=d3.area().x(function(e){return t.getScaledProp("x",e)}).y0(function(){return t.height}).y1(function(e){return t.getScaledProp("y",e)})}},{key:"_initCustomize",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.areaCustomize&&this.tryInvoke(this.opts.areaCustomize,this.area)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("area"))))}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.areaCssScale),ie(this.opts.areaFillScale)}},{key:"_update",value:function(){var t=this;$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this).each(function(e,n,r){t._updateLineArea(r[n],e,n,r)})}},{key:"_updateLineArea",value:function(t,e,n,r){var i=this,o=d3.select(t).selectAll(".monte-area").data(function(t){return[t]}),a=o.enter().insert("path",":first-child").call(this.__bindCommonEvents("area"));this._updateLineAreaSelections(a,Ro,e,n,r),this._updateLineAreaSelections(o,wo,e,n,r),o.exit().call(function(t){return i.fnInvoke(i.opts.areaExitSelectionCustomize,t)}).transition().call(this._transitionSetup("area",jo)).style("opacity",0).call(function(t){return i.fnInvoke(i.opts.areaExitTransitionCustomize,t)}).remove()}},{key:"_updateLineAreaSelections",value:function(t,e,n,r,i){var o=this,a="area"+xo(e)+"SelectionCustomize",s="area"+xo(e)+"TransitionCustomize";t.attr("class",function(t){return o._buildCss(["monte-area",n.css,o.opts.lineCssScaleAccessor,o.opts.areaCss,o.opts.areaCssScaleAccessor,t.css],n,r)}).call(function(t){return o.fnInvoke(o.opts[a],t)}).transition().call(this._transitionSetup("area",e),n,r,i).attr("d",function(t){return o.area(o.getProp("values",t))}).style("fill",this.optionReaderFunc("areaFillScaleAccessor")).call(function(t){return o.fnInvoke(o.opts[s],t)})}}]),e}(Jo),ea={chartCss:"monte-sparkline-chart",boundingWidth:80,boundingHeight:30,margin:{top:0,right:0,bottom:0,left:0},suppressAxes:!0,pointSize:24},na=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ea]))}},{key:"_data",value:function(t){var n;this.rawData=t;for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(n=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[t]].concat(i))}}]),e}(Jo),ra=["updatingLabels","updatedLabels"],ia={chartCss:"monte-bar-chart",margin:{top:0,right:0,bottom:30,left:40},barCssScale:Yt,barCssScaleAccessor:Ko.generateScaleAccessor("barCssScale","x"),barFillScale:Yt,barFillScaleAccessor:Ko.generateScaleAccessor("barFillScale","x"),barCss:"bar",barGrpCss:function(t){var e=this.getProp("y",t),n="monte-bar-zero";return e>0?n="monte-bar-pos":e<0&&(n="monte-bar-neg"),n},xProp:"id",yProp:"value",xScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},yDomainCustomize:se,includeLabels:!1,labelProp:"value",labelFillScale:Yt,labelFillScaleAccessor:Ko.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t)},labelXAdjust:"",labelX:function(t){return this._barX(t)+this.x.bandwidth()/2},labelYAdjust:function(t){return this.getProp("y",t)>0?"-0.05em":"1.05em"},labelY:function(t){return this.getProp("y",t)>0?this._barY(t):this._barY(t)+this._barHeight(t)}},oa=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ia]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("bar")),ra))}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;return"y"===e?r=d3.extent(t,function(t){return n.getProp("y",t)}):"x"===e&&(r=t.map(function(t){return n.getProp("x",t)})),r}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.barCssScale),ie(this.opts.barFillScale),ie(this.opts.labelFillScale)}},{key:"_update",value:function(){var t=this,e=this._updateBars();this.opts.includeLabels&&(this.emit("updatingLabels"),e.each(function(e,n,r){var i=d3.select(r[n]);t._updateBarLabel(i,e,n,r)}),this.emit("updatedLabels"))}},{key:"_updateBars",value:function(){var t=this,e=this.draw.selectAll(".monte-bar-grp").data(this.displayData,this.opts.dataKey),n=this._barX.bind(this),r=this._barY.bind(this),i=this._barWidth.bind(this),o=this._barHeight.bind(this);return e.enter().append("g").attr("class",function(e,n){return t._buildCss(["monte-bar-grp",t.opts.barGrpCss],e,n)}).append("rect").call(this.__bindCommonEvents("bar")).style("opacity",0).attr("x",n).attr("y",r).attr("width",i).attr("height",o).style("fill",this.optionReaderFunc("barFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-bar",t.opts.barCss,t.opts.barCssScaleAccessor,e.css],e,n)}).call(function(e){return t.fnInvoke(t.opts.barEnterSelectionCustomize,e)}).transition().call(this._transitionSetup("bar",Ro)).style("opacity",1).attr("x",n).attr("y",r).attr("width",i).attr("height",o).call(function(e){return t.fnInvoke(t.opts.barEnterTransitionCustomize,e)}),e.attr("class",function(e,n){return t._buildCss(["monte-bar-grp",t.opts.barGrpCss],e,n)}).select("rect").style("fill",this.optionReaderFunc("barFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-bar",t.opts.barCss,t.opts.barCssScaleAccessor,e.css],e,n)}).call(function(e){return t.fnInvoke(t.opts.barUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup("bar",wo)).attr("x",n).attr("y",r).attr("width",i).attr("height",o).style("opacity",1).call(function(e){return t.fnInvoke(t.opts.barUpdateTransitionCustomize,e)}),e.exit().call(function(e){return t.fnInvoke(t.opts.barExitSelectionCustomize,e)}).transition().call(this._transitionSetup("bar",jo)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.barExitTransitionCustomize,e)}).remove(),e.merge(e.enter().selectAll(".monte-bar-grp"))}},{key:"_updateBarLabel",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-bar-label").data([e]);o.enter().append("text").attr("class","monte-bar-label").style("opacity",0).style("fill",function(t){return i.tryInvoke(i.opts.labelFillScaleAccessor,t,n,r)}).attr("x",function(t){return i.tryInvoke(i.opts.labelX,t,n,r)}).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("y",function(t){return i.tryInvoke(i.opts.labelY,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelEnterSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",Ro);i._transitionConfigure(t,o,e,n,r)}).style("opacity",1).call(function(t){return i.fnInvoke(i.opts.labelEnterTransitionCustomize,t)}),o.style("fill",function(t){return i.tryInvoke(i.opts.labelFillScaleAccessor,t,n,r)}).attr("x",function(t){return i.tryInvoke(i.opts.labelX,t,n,r)}).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("y",function(t){return i.tryInvoke(i.opts.labelY,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",wo);i._transitionConfigure(t,o,e,n,r)}).style("opacity",1).call(function(t){return i.fnInvoke(i.opts.labelUpdateTransitionCustomize,t)}),o.exit().call(function(t){return i.fnInvoke(i.opts.labelExitSelectionCustomize,t)}).transition().call(this._transitionSetup("label",jo)).call(function(t){return i.fnInvoke(i.opts.labelExitTransitionCustomize,t)}).remove()}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barWidth",value:function(){return this.x.bandwidth()}},{key:"_barY",value:function(t){return this.getProp("y",t)<0?this.y(0):this.getScaledProp("y",t)}},{key:"_barHeight",value:function(t){return this.y.domain()[0]<0?Math.abs(this.height-this.getScaledProp("y",t)-this.y(0)):this.height-this.getScaledProp("y",t)}}]),e}(Ko);oa.EVENTS=ra;var aa,sa={chartCss:"monte-horizontal-bar-chart",margin:{top:0,right:0,bottom:40,left:40},barCssScaleAccessor:oa.generateScaleAccessor("barCssScale","y"),barFillScaleAccessor:oa.generateScaleAccessor("barFillScale","y"),xProp:"value",yProp:"id",xScale:d3.scaleLinear,yScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},xDomainCustomize:se,yDomainCustomize:null,barGrpCss:function(t){var e=this.getProp("x",t),n="monte-bar-zero";return e>0?n="monte-bar-pos":e<0&&(n="monte-bar-neg"),n},labelX:function(t){return this.getProp("x",t)>0?this._barWidth(t)+this._barX(t):this._barX(t)},labelXAdjust:"",labelY:function(t){return this._barY(t)+this.y.bandwidth()/2},labelYAdjust:"0.35em"},la=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[sa]))}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;return"x"===e?r=d3.extent(t,function(t){return t[n.opts.xProp]}):"y"===e&&(r=t.map(function(t){return t[n.opts.yProp]})),r}},{key:"_barX",value:function(t){return this.getProp("x",t)>0?this.x(0):this.x(0)-this._barWidth(t)}},{key:"_barWidth",value:function(t){return Math.abs(this.getScaledProp("x",t)-this.x(0))}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barHeight",value:function(){return this.y.bandwidth()}}]),e}(oa),ua={chartCss:"monte-simple-bar-chart",boundingWidth:10,boundingHeight:100,margin:{top:1,right:1,bottom:1,left:1},suppressAxes:!0,xScale:function(){return d3.scaleBand().paddingInner(0).round(!0)},yDomainCustomize:[0,100]},ca=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ua]))}},{key:"_data",value:function(t){var n,r=this.tryInvoke(this.opts.yProp),i=Kt(t)?t:Ze({},r,t);i.css||(i.css="monte-simple-bar-value"),this.rawData=t;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(n=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[i]].concat(a))}},{key:"_update",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this),this._updateSupport()}},{key:"_updateSupport",value:function(){var t=this,e={bottom:this.y.domain()[1],top:this.y.domain()[0]},n=this.bg.selectAll(".monte-bar-bg").data([e]),r=this.draw.selectAll(".monte-frame").data([e]);n.enter().append("rect").attr("class","monte-simple-bar-bg").merge(n).attr("x",0).attr("y",function(e){return t.y(e.bottom)}).attr("width",this.x.bandwidth()).attr("height",function(e){return t.y(e.top)}),n.exit().remove(),r.enter().append("rect").attr("class","monte-simple-bar-frame").merge(r).attr("x",0).attr("y",function(e){return t.y(e.bottom)}).attr("width",this.x.bandwidth()).attr("height",function(e){return t.y(e.top)}),r.exit().remove()}}]),e}(oa),pa={chartCss:"monte-simple-horizontal-bar-chart",boundingWidth:100,boundingHeight:10,margin:{top:1,right:1,bottom:1,left:1},suppressAxes:!0,xDomainCustomize:[0,100],yScale:function(){return d3.scaleBand().paddingInner(0).round(!0)}},ha=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[pa]))}},{key:"_data",value:function(t){var n,r=this.tryInvoke(this.opts.xProp),i=Kt(t)?t:Ze({},r,t);i.css||(i.css="monte-simple-hort-bar-value"),this.rawData=t;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(n=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[i]].concat(a))}},{key:"_update",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this),this._updateSupport()}},{key:"_updateSupport",value:function(){var t=this,e={left:this.x.domain()[0],right:this.x.domain()[1]},n=this.bg.selectAll(".monte-bar-bg").data([e]),r=this.draw.selectAll(".monte-frame").data([e]);n.enter().append("rect").attr("class","monte-simple-bar-bg").merge(n).attr("x",function(e){return t.y(e.left)}).attr("y",0).attr("width",function(e){return t.x(e.right)}).attr("height",this.y.bandwidth()),n.exit().remove(),r.enter().append("rect").attr("class","monte-simple-bar-frame").merge(r).attr("x",function(e){return t.y(e.left)}).attr("y",0).attr("width",function(e){return t.x(e.right)}).attr("height",this.y.bandwidth()),r.exit().remove()}}]),e}(la),da={GROUPED:"grouped",STACKED:"stacked"},fa=(aa={},Ze(aa,da.GROUPED,"monte-segment-mode-grouped"),Ze(aa,da.STACKED,"monte-segment-mode-stacked"),aa),ya=["modeChanging","modeChanged"],va={chartCss:"monte-segment-bar-chart",barSegmentCss:"bar-segment",margin:{top:10,right:0,bottom:30,left:40},segmentBarMode:da.STACKED,xProp:"id",yProp:"values",xInnerProp:"id",yInnerProp:"value",xInnerScale:function(){return d3.scaleBand().paddingInner(.1).paddingOuter(.1).round(!0)},barSegCssScale:Yt,barSegCssScaleAccessor:Ko.generateScaleAccessor("barSegCssScale","x"),barSegFillScale:Yt,barSegFillScaleAccessor:Ko.generateScaleAccessor("barSegFillScale","x"),xScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},yDomainCustomize:se,includeLabels:!1,labelProp:"value",labelFillScale:Yt,labelFillScaleAccessor:Ko.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t)},labelXAdjust:"",labelX:function(t){var e=this.option("segmentBarMode");return e===da.STACKED?this.x.bandwidth()/2:e===da.GROUPED?this._barXInnerGrouped(t)+this.xInner.bandwidth()/2:void 0},labelYAdjust:"1.05em",labelY:function(t,e,n,r){var i=this.option("segmentBarMode");return i===da.STACKED?this._barYInnerStacked(t,e,n,r):i===da.GROUPED?this._barYInnerGrouped(t):void 0},innerDataKey:ne},_a=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[va]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("bargrp")),Qe(re("barseg")),ya))}},{key:"_initCore",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this._initInnerScales()}},{key:"_initInnerScales",value:function(){this.xInner=this.opts.xInnerScale()}},{key:"_extentInner",value:function(t,e){var n=this,r=[];return t.forEach(function(t){n.getProp(e,t).forEach(function(t){return r.push(n.getProp(e+"Inner",t))})}),d3.extent(r)}},{key:"_extentMaxes",value:function(t,e){var n=this,r=t.map(function(t){return d3.sum(n.getProp(e,t),function(t){return n.getProp(e+"Inner",t)})});return[0,d3.max(r)]}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;if("x"===e)r=t.map(function(t){return n.getProp("x",t)});else if("y"===e){var i=this.tryInvoke(this.opts.segmentBarMode);if(i===da.GROUPED)r=this._extentInner(t,"y");else{if(i!==da.STACKED)throw Eo.InvalidEnumOption("segmentBarMode",i);r=this._extentMaxes(t,"y")}}return r}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.barSegCssScale),ie(this.opts.barSegFillScale),ie(this.opts.labelFillScale)}},{key:"setMode",value:function(t){return this.option("segmentBarMode",t),this.emit("modeChanging"),this.updateAxesDomains(),this.renderAxes(),this.update(),this.emit("modeChanged"),this}},{key:"mode",value:function(t){return t?this.setMode(t):this.tryInvoke(this.opts.segmentBarMode)}},{key:"updateAxesRanges",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateAxesRanges",this).call(this),this._updateXInnerRange(),this._updateYInnerRange()}},{key:"_updateXInnerRange",value:function(){this.xInner.range([0,this.x.bandwidth()])}},{key:"_updateXInnerDomain",value:function(){var t=this.data(),e=this.tryInvoke(this.opts.yProp),n=this.tryInvoke(this.opts.xInnerProp),r=t[0][e].map(function(t){return t[n]});this.xInner.domain(r)}},{key:"_updateYInnerRange",value:function(){}},{key:"_updateYInnerDomain",value:function(){}},{key:"_data",value:function(t){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t),this._updateXInnerDomain(),this._updateXInnerRange(),this._updateYInnerDomain(),this._updateYInnerRange()}},{key:"_render",value:function(){var t=this.tryInvoke(this.opts.segmentBarMode),e=fa[t];this.classed(e,!0)}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.segmentBarMode),n=le(fa,e),r=fa[e],i=void 0;if(this.classed(r,!0),e===da.STACKED)i=this._updateStackedBars();else{if(e!==da.GROUPED)throw Eo.InvalidEnumOption("segmentBarMode",e);i=this._updateGroupedBars()}this.opts.includeLabels&&i&&i.size()&&this._updateLabels(i),n.forEach(function(e){return t.classed(e,!1)})}},{key:"_updateStackedBars",value:function(){var t=this._barXInnerStacked.bind(this),e=this._barYInnerStacked.bind(this),n=this._barWidthStacked.bind(this),r=this._barHeightStacked.bind(this);return this._updateBars(t,e,n,r)}},{key:"_updateGroupedBars",value:function(){var t=this._barXInnerGrouped.bind(this),e=this._barYInnerGrouped.bind(this),n=this._barWidthGrouped.bind(this),r=this._barHeightGrouped.bind(this);return this._updateBars(t,e,n,r)}},{key:"_updateBars",value:function(t,e,n,r){var i=this,o=this.draw.selectAll(".monte-segment-bar-grp").data(this.displayData,this.opts.dataKey),a={barXInner:t,barYInner:e,barWidth:n,barHeight:r},s=o.enter().append("g").attr("class","monte-segment-bar-grp").call(this.__bindCommonEvents("bargrp"));return this._updateBarSelection(o.merge(s),a),o.exit().call(function(t){return i.fnInvoke(i.opts.bargrpExitSelectionCustomize,t)}).transition().call(function(t){var e=i._transitionSettings("bargrp",jo);t.delay(i.tryInvoke(e.delay))}).call(function(t){return i.fnInvoke(i.opts.bargrpExitTransitionCustomize,t)}).remove(),o.merge(o.enter().selectAll(".monte-segment-bar-grp"))}},{key:"_updateBarSelection",value:function(t,e){var n=this,r=this._barGroupTranslate.bind(this);t.attr("transform",function(t){return"translate("+r(t)+")"}).each(function(t,r,i){var o=t[n._barProp()],a=d3.select(i[r]).selectAll(".monte-segment-bar-seg").data(o,n.opts.innerDataKey),s=a.enter().append("rect"),l=a.merge(s);s.call(n.__bindCommonEvents("barseg")).style("opacity",0).style("fill",n.optionReaderFunc("barSegFillScaleAccessor")).attr("class",function(t,e){return n._buildCss(["monte-segment-bar-seg",n.opts.barSegCss,n.opts.barSegCssScaleAccessor,t.css],t,e)}).attr("x",0).attr("y",0).attr("width",0).attr("height",0).call(function(t){return n.fnInvoke(n.opts.barsegEnterSelectionCustomize,t)}).transition().call(n._transitionSetup("barseg",Ro),t,r,i).attr("x",function(t,n,r){return e.barXInner(t,n,r,l.nodes())}).attr("y",function(t,n,r){return e.barYInner(t,n,r,l.nodes())}).attr("width",e.barWidth).attr("height",e.barHeight).style("opacity",1).call(function(t){return n.fnInvoke(n.opts.barsegEnterTransitionCustomize,t)}),a.attr("class",function(t,e){return n._buildCss(["monte-segment-bar-seg",n.opts.barSegCss,n.opts.barSegCssScaleAccessor,t.css],t,e)}).call(function(t){return n.fnInvoke(n.opts.barsegUpdateSelectionCustomize,t)}).transition().call(n._transitionSetup("barseg",wo),t,r,i).style("fill",n.optionReaderFunc("barSegFillScaleAccessor")).attr("x",function(t,n,r){return e.barXInner(t,n,r,l.nodes())}).attr("y",function(t,n,r){return e.barYInner(t,n,r,l.nodes())}).attr("width",e.barWidth).attr("height",e.barHeight).style("opacity",1).call(function(t){return n.fnInvoke(n.opts.barsegUpdateTransitionCustomize,t)}),a.exit().call(function(t){return n.fnInvoke(n.opts.barsegExitSelectionCustomize,t)}).transition().call(n._transitionSetup("barseg",jo),t,r,i).call(function(t){return n.fnInvoke(n.opts.barsegExitTransitionCustomize,t)}).remove()})}},{key:"_segLabels",value:function(t){return this.getProp("y",t)}},{key:"_updateLabels",value:function(t){var e=this;t.each(function(t,n,r){var i=d3.select(r[n]);e._updateBarSegLabels(i,t,n,r)})}},{key:"_updateBarSegLabels",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-bar-label").data(this._segLabels(e)),a=o.enter().append("text").attr("class","monte-bar-label"),s=a.merge(o),l=function(t,o){t.text(function(t,e,n){return i.tryInvoke(i.opts.label,t,e,n)}).call(function(t){return t.raise()}).call(function(t){return i.fnInvoke(i.opts.labelUpdateSelectionCustomize,t)}).transition().call(i._transitionSetup("label",o),e,n,r).style("fill",i.optionReaderFunc("labelFillScaleAccessor")).attr("x",function(t,e,n){return i.tryInvoke(i.opts.labelX,t,e,n,s.nodes())}).attr("y",function(t,e,n){return i.tryInvoke(i.opts.labelY,t,e,n,s.nodes())}).attr("dx",i.optionReaderFunc("labelXAdjust")).attr("dy",i.optionReaderFunc("labelYAdjust")).call(function(t){return i.fnInvoke(i.opts.labelUpdateTransitionCustomize,t)})};l(a,Ro),l(o,wo),o.exit().call(function(t){return i.fnInvoke(i.opts.labelUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup("label",jo),e,n,r).style("opacity",0).call(function(t){return i.fnInvoke(i.opts.labelUpdateTransitionCustomize,t)}).remove()}},{key:"_barProp",value:function(){return this.tryInvoke(this.opts.yProp)}},{key:"_barGroupTranslate",value:function(t){return this._barX(t)+", 0"}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barXInnerGrouped",value:function(t){return this.getScaledProp("xInner",t)}},{key:"_barXInnerStacked",value:function(){return 0}},{key:"_barWidthStacked",value:function(){return this.x.bandwidth()}},{key:"_barWidthGrouped",value:function(){return this.xInner.bandwidth()}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barYInnerGrouped",value:function(t){return this.height-this._barHeightGrouped(t)}},{key:"_barYInnerStacked",value:function(t,e,n,r){for(var i=this.getScaledProp("y","yInner",t),o=0,a=0;a<e;a++){var s=d3.select(r[a]).datum();o-=this._barHeightStacked(s)}return i+o}},{key:"_barHeightGrouped",value:function(t){return this.height-this.getScaledProp("y","yInner",t)}},{key:"_barHeightStacked",value:function(t){return this.height-this.getScaledProp("y","yInner",t)}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(ga),(n=$e(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Ko);_a.EVENTS=ya;var ga=["setMode","updateAxesRanges"],ba={chartCss:"monte-horizontal-segment-bar-chart",barSegmentCss:"bar-segment",margin:{top:0,right:10,bottom:20,left:40},segmentBarMode:da.STACKED,barSegCssScaleAccessor:_a.generateScaleAccessor("barSegCssScale","y"),barSegFillScaleAccessor:_a.generateScaleAccessor("barSegFillScale","y"),yProp:"id",xProp:"values",yInnerProp:"id",xInnerProp:"value",xScale:d3.scaleLinear,yInnerScale:function(){return d3.scaleBand().paddingInner(.1).paddingOuter(.1).round(!0)},yScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},xDomainCustomize:se,yDomainCustomize:null,labelXAdjust:"-0.1em",labelX:function(t,e,n,r){var i=this.option("segmentBarMode");return i===da.STACKED?this._barXInnerStacked(t,e,n,r)+this._barWidthStacked(t):i===da.GROUPED?this._barWidthGrouped(t):void 0},labelYAdjust:"0.35em",labelY:function(t){var e=this.option("segmentBarMode");return e===da.STACKED?this.y.bandwidth()/2:e===da.GROUPED?this._barYInnerGrouped(t)+this.yInner.bandwidth()/2:void 0}},ma=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ba]))}},{key:"_initInnerScales",value:function(){this.yInner=this.opts.yInnerScale()}},{key:"_updateXInnerRange",value:function(){}},{key:"_updateXInnerDomain",value:function(){}},{key:"_updateYInnerRange",value:function(){this.yInner.range([0,this.y.bandwidth()])}},{key:"_updateYInnerDomain",value:function(){var t=this.data(),e=this.tryInvoke(this.opts.xProp),n=this.tryInvoke(this.opts.yInnerProp),r=t[0][e].map(function(t){return t[n]});this.yInner.domain(r)}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;if("y"===e)r=t.map(function(t){return n.getProp("y",t)});else if("x"===e){var i=this.tryInvoke(this.opts.segmentBarMode);if(i===da.GROUPED)r=this._extentInner(t,"x");else{if(i!==da.STACKED)throw Eo.InvalidEnumOption("segmentBarMode",i);r=this._extentMaxes(t,"x")}}return r}},{key:"_segLabels",value:function(t){return this.getProp("x",t)}},{key:"_barProp",value:function(){return this.tryInvoke(this.opts.xProp)}},{key:"_barGroupTranslate",value:function(t){return"0, "+this._barY(t)}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barXInnerGrouped",value:function(){return 0}},{key:"_barXInnerStacked",value:function(t,e,n,r){for(var i=0,o=0;o<e;o++){var a=d3.select(r[o]).datum();i+=this._barWidthStacked(a)}return 0+i}},{key:"_barWidthGrouped",value:function(t){return this.getScaledProp("x","xInner",t)}},{key:"_barWidthStacked",value:function(t){return this.getScaledProp("x","xInner",t)}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barYInnerGrouped",value:function(t){return this.getScaledProp("yInner",t)}},{key:"_barYInnerStacked",value:function(){return 0}},{key:"_barHeightGrouped",value:function(){return this.yInner.bandwidth()}},{key:"_barHeightStacked",value:function(){return this.y.bandwidth()}}]),e}(_a),ka=["updatingLabels","updatedLabels"],Sa={chartCss:"monte-vertical-span-chart",margin:{top:0,right:0,bottom:30,left:40},spanCssScale:Yt,spanCssScaleAccessor:Ko.generateScaleAccessor("spanCssScale","x"),spanFillScale:Yt,spanFillScaleAccessor:Ko.generateScaleAccessor("spanFillScale","x"),spanCss:"span",spanGrpCss:Yt,xProp:"id",valuesProp:"values",y1Prop:"startValue",y2Prop:"endValue",xScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},yDomainCustomize:se,includeLabels:!1,labelStartProp:"startValue",labelStartFillScale:Yt,labelStartFillScaleAccessor:Ko.generateScaleAccessor("labelStartFillScale","labelStart"),labelStart:function(t){return this.getProp("labelStart",t)},labelStartXAdjust:"",labelStartX:function(t,e,n,r){return this._spanX(r,t)+this.x.bandwidth()/2},labelStartYAdjustProp:"y2",labelStartYAdjust:function(t){return this.getProp("y2",t)>0?"-0.05em":"1.05em"},labelStartY:function(t,e,n,r){return this.getProp("y2",t)>0?this._spanY(r,t)+this._spanHeight(r,t):this._spanY(r,t)},labelEndProp:"endValue",labelEndFillScale:Yt,labelEndFillScaleAccessor:Ko.generateScaleAccessor("labelEndFillScale","labelEnd"),labelEnd:function(t){return this.getProp("labelEnd",t)},labelEndXAdjust:"",labelEndX:function(t,e,n,r){return this._spanX(r,t)+this.x.bandwidth()/2},labelEndYAdjustProp:"y2",labelEndYAdjust:function(t){return this.getProp("y2",t)>0?"-0.05em":"1.05em"},labelEndY:function(t,e,n,r){return this.getProp("y2",t)>0?this._spanY(r,t):this._spanY(r,t)+this._spanHeight(r,t)},innerDataKey:ne,transition:Ze({},"cat",{duration:0,delay:0})},xa=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Sa]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("span")),ka))}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;return"y"===e?function(){var e=[],i=[];t.forEach(function(t){return n.getProp("values",t).forEach(function(t){e.push(n.getProp("y1",t)),i.push(n.getProp("y2",t))})}),r=d3.extent([d3.min(e),d3.min(e),d3.max(i),d3.max(i)])}():"x"===e&&(r=t.map(function(t){return n.getProp("x",t)})),r}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.spanCssScale),ie(this.opts.spanFillScale),ie(this.opts.labelFillScale)}},{key:"_update",value:function(){var t=this,e=this,n=this.draw.selectAll(".monte-span-cat").data(this.displayData,this.opts.dataKey),r=function(n,r,i){var o=d3.select(i[r]);e._updateSpans(o,n),t.opts.includeLabels&&(t.emit("updatingLabels"),o.selectAll(".monte-span-grp").each(function(e,n,r){var i=d3.select(r[n]);!0!==t.opts.includeLabels&&"start"!==t.opts.includeLabels||t._updateSpanLabel(i,e,n,r,"labelStart"),!0!==t.opts.includeLabels&&"end"!==t.opts.includeLabels||t._updateSpanLabel(i,e,n,r,"labelEnd")}),t.emit("updatedLabels"))};return n.enter().append("g").attr("class",function(e,n){return t._buildCss(["monte-span-cat",t.opts.spanGrpCss],e,n)}).call(function(e){return t.fnInvoke(t.opts.catEnterSelectionCustomize,e)}).transition().call(this._transitionSetup("cat",Ro)).call(function(e){return t.fnInvoke(t.opts.catEnterTransitionCustomize,e)}).each(function(t,e,n){d3.active(this)?d3.active(this).on("end",r):r(t,e,n)}),n.each(r),n.exit().call(function(e){return t.fnInvoke(t.opts.catExitSelectionCustomize,e)}).transition().call(this._transitionSetup("cat",jo)).call(function(e){return t.fnInvoke(t.opts.catExitTransitionCustomize,e)}).remove(),n.merge(n.enter().selectAll(".monte-span-cat"))}},{key:"_updateSpans",value:function(t,e){var n=this,r=this.getProp("values",e),i=t.selectAll(".monte-span-grp").data(r),o=this._spanX.bind(this,e),a=this._spanY.bind(this,e),s=this._spanWidth.bind(this,e),l=this._spanHeight.bind(this,e);return i.enter().append("g").attr("class",function(t,e){return n._buildCss(["monte-span-grp",n.opts.spanGrpCss],t,e)}).append("rect").call(this.__bindCommonEvents("span")).style("opacity",0).attr("x",o).attr("y",a).attr("width",s).attr("height",l).style("fill",this.optionReaderFunc("spanFillScaleAccessor")).attr("class",function(t,e){return n._buildCss(["monte-span",n.opts.spanCss,n.opts.spanCssScaleAccessor,t.css],t,e)}).call(function(t){return n.fnInvoke(n.opts.spanEnterSelectionCustomize,t)}).transition().call(this._transitionSetup("span",Ro)).style("opacity",1).attr("x",o).attr("y",a).attr("width",s).attr("height",l).call(function(t){return n.fnInvoke(n.opts.spanEnterTransitionCustomize,t)}),i.attr("class",function(t,e){return n._buildCss(["monte-span-grp",n.opts.spanGrpCss],t,e)}).select("rect").style("fill",this.optionReaderFunc("spanFillScaleAccessor")).attr("class",function(t,e){return n._buildCss(["monte-span",n.opts.spanCss,n.opts.spanCssScaleAccessor,t.css],t,e)}).call(function(t){return n.fnInvoke(n.opts.spanUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup("span",wo)).attr("x",o).attr("y",a).attr("width",s).attr("height",l).style("opacity",1).call(function(t){return n.fnInvoke(n.opts.spanUpdateTransitionCustomize,t)}),i.exit().call(function(t){return n.fnInvoke(n.opts.spanExitSelectionCustomize,t)}).transition().call(this._transitionSetup("span",jo)).style("opacity",0).call(function(t){return n.fnInvoke(n.opts.spanExitTransitionCustomize,t)}).remove(),i.merge(i.enter().selectAll(".monte-span-grp"))}},{key:"_updateSpanLabel",value:function(t,e,n,r,i){var o=this,a=ko(i),s=t.selectAll(".monte-span-label."+a).data([e]),l=d3.select(t.node().parentNode).datum();s.enter().append("text").attr("class","monte-span-label").classed(a,!0).style("opacity",0).style("fill",function(t){return o.tryInvoke(o.opts[i+"FillScaleAccessor"],t,n,r,l)}).attr("x",function(t){return o.tryInvoke(o.opts[i+"X"],t,n,r,l)}).attr("dx",function(t){return o.tryInvoke(o.opts[i+"XAdjust"],t,n,r,l)}).attr("y",function(t){return o.tryInvoke(o.opts[i+"Y"],t,n,r,l)}).attr("dy",function(t){return o.tryInvoke(o.opts[i+"YAdjust"],t,n,r,l)}).text(function(t){return o.tryInvoke(o.opts[i],t,n,r,l)}).call(function(t){return o.fnInvoke(o.opts[i+"EnterSelectionCustomize"],t)}).transition().call(function(t){var i=o._transitionSettings("label",Ro);o._transitionConfigure(t,i,e,n,r)}).style("opacity",1).call(function(t){return o.fnInvoke(o.opts[i+"EnterTransitionCustomize"],t)}),s.style("fill",function(t){return o.tryInvoke(o.opts[i+"FillScaleAccessor"],t,n,r,l)}).attr("x",function(t){return o.tryInvoke(o.opts[i+"X"],t,n,r,l)}).attr("dx",function(t){return o.tryInvoke(o.opts[i+"XAdjust"],t,n,r,l)}).attr("y",function(t){return o.tryInvoke(o.opts[i+"Y"],t,n,r,l)}).attr("dy",function(t){return o.tryInvoke(o.opts[i+"YAdjust"],t,n,r,l)}).text(function(t){return o.tryInvoke(o.opts[i],t,n,r,l)}).call(function(t){return o.fnInvoke(o.opts[i+"UpdateSelectionCustomize"],t)}).transition().call(function(t){var i=o._transitionSettings("label",wo);o._transitionConfigure(t,i,e,n,r)}).style("opacity",1).call(function(t){return o.fnInvoke(o.opts[i+"UpdateTransitionCustomize"],t)}),s.exit().call(function(t){return o.fnInvoke(o.opts[i+"ExitSelectionCustomize"],t)}).transition().call(this._transitionSetup("label",jo)).call(function(t){return o.fnInvoke(o.opts[i+"ExitTransitionCustomize"],t)}).remove()}},{key:"_spanX",value:function(t){return this.getScaledProp("x",t)}},{key:"_spanWidth",value:function(){return this.x.bandwidth()}},{key:"_spanY",value:function(t,e){return this.getScaledProp("y","y2",e)}},{key:"_spanHeight",value:function(t,e){return this.getScaledProp("y","y1",e)-this.getScaledProp("y","y2",e)}}]),e}(Ko);xa.EVENTS=ka;var Aa={chartCss:"monte-horizontal-span-chart",margin:{top:0,right:0,bottom:40,left:40},spanCssScaleAccessor:xa.generateScaleAccessor("spanCssScale","y"),spanFillScaleAccessor:xa.generateScaleAccessor("spanFillScale","y"),x1Prop:"startValue",x2Prop:"endValue",yProp:"id",yProp1:null,yProp2:null,xScale:d3.scaleLinear,yScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},xDomainCustomize:se,yDomainCustomize:null,labelStartX:function(t,e,n,r){return this.getProp("x",t)>0?this._spanWidth(r,t)+this._spanX(r,t):this._spanX(r,t)},labelStartXAdjust:"",labelStartY:function(t,e,n,r){return this._spanY(r,t)+this.y.bandwidth()/2},labelStartYAdjust:"0.35em",labelEndX:function(t,e,n,r){return this.getProp("x",t)>0?this._spanX(r,t):this._spanWidth(r,t)+this._spanX(r,t)},labelEndXAdjust:"",labelEndY:function(t,e,n,r){return this._spanY(r,t)+this.y.bandwidth()/2},labelEndYAdjust:"0.35em"},Oa=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Aa]))}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;return"x"===e?function(){var e=[],i=[];t.forEach(function(t){return n.getProp("values",t).forEach(function(t){e.push(n.getProp("x1",t)),i.push(n.getProp("x2",t))})}),r=d3.extent([d3.min(e),d3.min(e),d3.max(i),d3.max(i)])}():"y"===e&&(r=t.map(function(t){return n.getProp("y",t)})),r}},{key:"_spanX",value:function(t,e){return this.getScaledProp("x","x1",e)}},{key:"_spanWidth",value:function(t,e){return this.getScaledProp("x","x2",e)-this.getScaledProp("x","x1",e)}},{key:"_spanY",value:function(t){return this.getScaledProp("y",t)}},{key:"_spanHeight",value:function(){return this.y.bandwidth()}}]),e}(xa),Ia={chartCss:"monte-scatter-plot",margin:{top:10,right:10,bottom:30,left:40},pointSize:64,pointProp:"",pointFillScale:Yt,pointFillScaleAccessor:Ko.generateScaleAccessor("pointFillScale","point"),pointStrokeScale:Yt,pointStrokeScaleAccessor:Ko.generateScaleAccessor("pointStrokeScale","point"),pointCssScale:Yt,pointCssScaleAccessor:Ko.generateScaleAccessor("pointCssScale","point"),pointCss:"monte-point",pointSymbol:function(t){return t.type(d3.symbolCircle)}},Ca=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ia]))}},{key:"_initCore",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.symbol=d3.symbol()}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("point"))))}},{key:"_domainExtent",value:function(t,e){var n=this.opts[e+"Prop"];return d3.extent(t,function(t){return t[n]})}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.pointCssScale),ie(this.opts.pointFillScale),ie(this.opts.pointStrokeScale)}},{key:"_update",value:function(){return this._updatePoints()}},{key:"_updatePoints",value:function(){var t=this,e=this.draw.selectAll(".monte-point").data(this.displayData,this.opts.dataKey),n=e.enter().append("path").call(this.__bindCommonEvents("point"));return this._updatePointsSelection(n,Ro),this._updatePointsSelection(e,wo),e.exit().call(function(e){return t.fnInvoke(t.opts.pointExitSelectionCustomize,e)}).transition().call(this._transitionSetup("point",jo)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.pointExitTransitionCustomize,e)}).remove(),e.merge(e.enter().selectAll(".point"))}},{key:"_updatePointsSelection",value:function(t,e){var n=this,r="point"+xo(e)+"SelectionCustomize",i="point"+xo(e)+"TransitionCustomize";t.attr("d",function(t,e){var r=d3.symbol().size(n.opts.pointSize);return n.opts.pointSymbol(r,t,e)(t,e)}).attr("class",function(t,e){return n._buildCss(["monte-point",n.opts.pointCss,n.opts.pointCssScaleAccessor,t.css],t,e)}).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).call(function(t){return n.fnInvoke(n.opts[r],t)}).transition().call(this._transitionSetup("point",e)).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return"translate("+n.getScaledProp("x",t)+", "+n.getScaledProp("y",t)+")"}).call(function(t){return n.fnInvoke(n.opts[i],t)})}}]),e}(Ko),Ea={D3_SYMBOL:"d3Symbol",SVG_USE_DEF:"svgUseDef",SVG_USE_EXTERNAL:"svgUseExternal"},Pa={rowIndex:function(t,e){return Math.floor(e/this.opts.columns)},columnIndex:function(t,e){return e%this.opts.columns}},Ra={rowIndex:function(t,e){return this.opts.rows-Math.floor(e/this.opts.columns)-1},columnIndex:function(t,e){return e%this.opts.columns}},wa={chartCss:"monte-icon-array",boundingWidth:100,boundingHeight:100,margin:{top:0,right:0,bottom:0,left:0},suppressAxes:!0,xScale:function(){return d3.scalePoint().padding(.5)},yScale:function(){return d3.scalePoint().padding(.5)},iconProp:"",iconFillScale:Yt,iconFillScaleAccessor:Ko.generateScaleAccessor("iconFillScale","icon"),iconStrokeScale:Yt,iconStrokeScaleAccessor:Ko.generateScaleAccessor("iconStrokeScale","icon"),iconCssScale:Yt,iconCssScaleAccessor:Ko.generateScaleAccessor("iconCssScale","icon"),iconCss:"icon",iconSize:64,iconSymbol:function(t){return t.type(d3.symbolCircle)},iconMode:Ea.D3_SYMBOL,iconDefId:"svgIcon",iconSvgWidth:24,iconSvgHeight:24,iconHref:"",iconSvgSymbol:function(t){t.attr("viewbox","0 0 24 24").append("path").attr("d","m 0,0 24,24 m -24,0 24,-24")},rows:10,columns:10,arrangement:Ra,svgVersion:1},ja=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[wa]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("icon"))))}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.iconCssScale),ie(this.opts.iconFillScale),ie(this.opts.iconStrokeScale)}},{key:"_domainExtent",value:function(t,e){var n=null;return"y"===e?n=new Array(this.opts.rows):"x"===e&&(n=new Array(this.opts.columns)),n.fill().map(function(t,e){return e})}},{key:"_render",value:function(){var t=this;this.opts.iconMode===Ea.SVG_USE_DEF&&function(){var e=t;t.defs.append("symbol").attr("id","svgIcon").each(function(){e.opts.iconSvgSymbol(d3.select(this))})}()}},{key:"_update",value:function(){var t=this.opts.rows*this.opts.columns;if(t<this.displayData.length)throw new Io("Maximum number of items is "+t+". Data contains "+this.displayData.length+".");this._updateIcons()}},{key:"_updateIcons",value:function(){var t,e=(t={},Ze(t,Ea.D3_SYMBOL,this._updateD3Symbol),Ze(t,Ea.SVG_USE_DEF,this._updateSvgUse),Ze(t,Ea.SVG_USE_EXTERNAL,this._updateSvgUse),t),n=this.draw.selectAll(".monte-icon").data(this.displayData,this.opts.dataKey);e[this.opts.iconMode].call(this,n,this.opts.iconMode),n.exit().transition().call(this._transitionSetup("icon",jo)).style("opacity",0).remove()}},{key:"_updateD3Symbol",value:function(t){var e=this;this._updateCommon("path",t,ue).attr("d",function(t,n){var r=e.tryInvoke(e.opts.iconSize,t,n),i=d3.symbol().size(r);return e.opts.iconSymbol(i,t,n)(t,n)})}},{key:"_updateSvgUse",value:function(t,e){var n=this,r=e===Ea.SVG_USE_DEF?function(t,e,r){return"#"+n.tryInvoke(n.opts.iconDefId,t,e,r)}:function(t,e,r){return n.tryInvoke(n.opts.iconHref,t,e,r)},i=2===this.tryInvoke(this.opts.svgVersion)?"href":"xlink:href";this._updateCommon("use",t,ce,function(t,e,r){d3.select(r[e]).attr("width",n.opts.iconSvgWidth).attr("height",n.opts.iconSvgHeight)}).attr(i,r)}},{key:"_updateCommon",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Yt;return e.enter().append(t).call(this.__bindCommonEvents("icon")).merge(e).each(i).attr("transform",function(t,e,i){return n.call(r,t,e,i)}).attr("class",function(t,e){return r._buildCss(["monte-icon",r.opts.iconCss,r.opts.iconCssScaleAccessor,t.css],t,e)}).call(function(t){return r.fnInvoke(r.opts.iconUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup("icon",wo)).style("fill",this.optionReaderFunc("iconFillScaleAccessor")).style("stroke",this.optionReaderFunc("iconStrokeScaleAccessor")).call(function(t){return r.fnInvoke(r.opts.iconUpdateTransitionCustomize,t)})}}]),e}(Ko),Ta=Math.PI,za=Ta/2,Da=2*Ta,La=Object.freeze({EPSILON:1e-12,PI:Ta,HALF_PI:za,TAU:Da}),Fa="monte-polar-label-",Ba={CENTROID:{css:Fa+"centroid",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("innerRadius"),t,e),i=this.tryInvoke(this.option("outerRadius"),t,e);return function(t,e,o){return(n.tryInvoke(r,t,e,o)+n.tryInvoke(i,t,e,o))/2}}},INNER:{css:Fa+"inner",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("innerRadius"),t,e);return function(t,e,i){return.9*n.tryInvoke(r,t,e,i)}}},INNER_EDGE:{css:Fa+"inner-edge",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("innerRadius"),t,e);return function(t,e,i){return n.tryInvoke(r,t,e,i)}}},OUTER:{css:Fa+"outer",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("outerRadius"),t,e);return function(t,e,i){return 1.1*n.tryInvoke(r,t,e,i)}}},OUTER_EDGE:{css:Fa+"outer-edge",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("outerRadius"),t,e);return function(t,e,i){return n.tryInvoke(r,t,e,i)}}}},Ua=new RegExp("^"+Fa+"*"),Ma=["updatingLabels","updatedLabels"],Na={chartCss:"monte-arc-chart",cornerRadius:0,innerRadius:0,outerRadius:we,arcCustomize:null,arcCss:"arc",arcWedgeCss:"wedge",arcWedgeCssScale:Yt,arcWedgeCssScaleAccessor:$o.generateScaleAccessor("arcWedgeCssScale","itemValue"),arcWedgeFillScale:Yt,arcWedgeFillScaleAccessor:$o.generateScaleAccessor("arcWedgeFillScale","itemValue"),arcWedgeStrokeScale:Yt,arcWedgeStrokeScaleAccessor:$o.generateScaleAccessor("arcWedgeStrokeScale","itemValue"),arcWedgeEnter:function(t){return{startAngle:t.endAngle,endAngle:t.endAngle,value:t.value,padAngle:t.padAngle,index:t.index}},arcBgWedgeCssScale:Yt,arcBgWedgeCssScaleAccessor:$o.generateScaleAccessor("arcBgWedgeCssScale","itemValue"),arcBgWedgeFillScale:Yt,arcBgWedgeFillScaleAccessor:$o.generateScaleAccessor("arcBgWedgeFillScale","itemValue"),itemValueProp:"value",pieStartAngle:0,pieEndAngle:Da,piePadAngle:.02,includeLabels:!1,labelPlacement:ge,labelRotation:Ee,labelAngle:function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},labelProp:"value",labelFillScale:Yt,labelFillScaleAccessor:$o.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t.data)},labelXAdjust:"",labelYAdjust:"0.35em",dataKey:function(t,e){return t&&t.data&&t.data.id||e}},Ya=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Na]))}},{key:"_initCore",value:function(){var t=this;$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.arc=d3.arc().cornerRadius(this.tryInvoke(this.opts.cornerRadius)),this.pie=d3.pie().value(function(e){return t.getProp("itemValue",e)}).sortValues(null).startAngle(this.tryInvoke(this.opts.pieStartAngle)).endAngle(this.tryInvoke(this.opts.pieEndAngle)).padAngle(this.tryInvoke(this.opts.piePadAngle))}},{key:"_initCustomize",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.arcCustomize&&this.opts.arcCustomize(this.arc),this.opts.pieCustomize&&this.opts.pieCustomize(this.pie)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("wedge")),Ma))}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.arcWedgeCssScale),ie(this.opts.arcWedgeFillScale),ie(this.opts.arcWedgeStrokeScale),ie(this.opts.arcBgWedgeCssScale),ie(this.opts.arcBgWedgeFillScale),ie(this.opts.labelFillScale)}},{key:"_boundsUpdate",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_boundsUpdate",this).call(this),this.arc.innerRadius(this.tryInvoke(this.opts.innerRadius,this.width,this.height)).outerRadius(this.tryInvoke(this.opts.outerRadius,this.width,this.height))}},{key:"_data",value:function(t){this.pieDisplayData=this.pie(t),$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t)}},{key:"_render",value:function(){this.hasRendered||($e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_render",this).call(this),this._updateBackground())}},{key:"_update",value:function(){var t=this._updateArcs();this.opts.includeLabels&&this._updateLabels(t)}},{key:"_updateArcs",value:function(){var t=this,e=this.draw.selectAll(".monte-arc").data(this.pieDisplayData,this.opts.dataKey),n=this.arc;return e.enter().append("g").attr("class","monte-arc "+this.opts.arcCss).append("path").attr("class",function(e,n){return t._buildCss(["monte-arc-wedge",t.opts.arcWedgeCss,t.opts.arcWedgeCssScaleAccessor,e.data.css],e,n)}).call(this.__bindCommonEvents("wedge")).call(function(e){return t.fnInvoke(t.opts.wedgeEnterSelectionCustomize,e)}).transition().call(this._transitionSetup("wedge",Ro)).attrTween("d",function(e){var r=t.tryInvoke(t.opts.arcWedgeEnter,e);return ve(n,r,e)}).style("stroke",this.optionReaderFunc("arcWedgeStrokeScaleAccessor")).style("fill",this.optionReaderFunc("arcWedgeFillScaleAccessor")).call(function(e){return t.fnInvoke(t.opts.wedgeEnterTransitionCustomize,e)}),e.selectAll(".monte-arc-wedge").each(function(){var t=d3.select(this.parentElement).datum(),e=d3.select(this),n=e.datum();t.prev=n,e.datum(t),delete n.prev}).attr("class",function(e,n){return t._buildCss(["monte-arc-wedge",t.opts.arcWedgeCss,t.opts.arcWedgeCssScaleAccessor,e.data.css],e,n)}).call(function(e){return t.fnInvoke(t.opts.wedgeUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup("wedge",wo)).attrTween("d",function(t){return ve(n,t.prev,t)}).style("stroke",this.optionReaderFunc("arcWedgeStrokeScaleAccessor")).style("fill",this.optionReaderFunc("arcWedgeFillScaleAccessor")).call(function(e){return t.fnInvoke(t.opts.wedgeUpdateTransitionCustomize,e)}),e.exit().call(function(e){return t.fnInvoke(t.opts.wedgeExitSelectionCustomize,e)}).transition().call(this._transitionSetup("wedge",jo)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.wedgeExitTransitionCustomize,e)}).remove(),e.merge(e.enter().selectAll(".monte-arc"))}},{key:"_updateBackground",value:function(){var t=this,e=this.displayData.reduce(function(t,e){return t+e.value},0),n=this.arc({index:0,startAngle:this.opts.pieStartAngle,endAngle:this.opts.pieEndAngle,value:e}),r=this.bg.selectAll(".monte-arc-bg").data([n]);r.enter().append("path").merge(r).attr("d",function(t){return t}).style("fill",this.optionReaderFunc("arcBgWedgeFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-arc-bg",t.opts.arcBgWedgeCssScaleAccessor],e,n)}).call(function(e){return t.fnInvoke(t.opts.bgUpdateSelectionCustomize,e)})}},{key:"_updateLabels",value:function(t){var e=this;this.emit("updatingLabels");var n=this.tryInvoke(this.opts.labelPlacement),r=this.tryInvoke(n.css);ze(this.bound,Ua),this.classed(r,!0),t.each(function(t,n,r){var i=d3.select(r[n]);e._updateArcLabel(i,t,n,r)}),this.emit("updatedLabels")}},{key:"_updateArcLabel",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-arc-label").data([e]),a=this.tryInvoke(this.opts.labelPlacement),s=this.tryInvoke(a.radius,this.width,this.height),l=this.tryInvoke(s,e,n,r),u=this.tryInvoke(this.opts.labelAngle,e,n,r),c=de(this.tryInvoke(this.opts.labelRotation,e,n,r)),p=he(l,u);o.enter().append("text").attr("class","monte-arc-label").attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).attr("transform",function(){return"translate("+p+") rotate("+c+")"}).attr("angle",u).attr("radius",s).style("opacity",0).style("fill",this.optionReaderFunc("labelFillScaleAccessor")).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelEnterSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",Ro);i._transitionConfigure(t,o,e,n,r)}).style("opacity",1).call(function(t){return i.fnInvoke(i.opts.labelEnterTransitionCustomize,t)}),o.style("fill",this.optionReaderFunc("labelFillScaleAccessor")).style("opacity",1).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",wo);i._transitionConfigure(t,o,e,n,r)}).attrTween("transform",function(){var t=je(o.attr("transform"));return _e({angle:+o.attr("angle"),radius:+o.attr("radius"),rotate:t.rotate||0},{angle:u,radius:l,rotate:c},l)}).attr("angle",u).attr("radius",s).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateTransitionCustomize,t)}),o.exit().call(function(t){return i.fnInvoke(i.opts.labelExitSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",jo);i._transitionConfigure(t,o,e,n,r)}).attr("opacity",0).call(function(t){return i.fnInvoke(i.opts.labelExitTransitionCustomize,t)}).remove()}}]),e}($o);Ya.EVENTS=Ma;var Ha={smallNeedleHeight:0,smallNeedleRatio:.05},Wa=["updatingBackgroundArc","updatedBackgroundArc","updatingNeedle","updatedNeedle"],Va={chartCss:"monte-arc-chart monte-gauge-chart",piePadAngle:0,pieStartAngle:-za,pieEndAngle:za,arcBgCssScale:Yt,arcBgCssScaleAccessor:Ya.generateScaleAccessor("arcBgCssScale","itemValue"),arcBgFillScale:Yt,arcBgFillScaleAccessor:Ya.generateScaleAccessor("arcBgFillScale","itemValue"),needleBase:20,needleHeight:function(t,e){return(t+e)/2},needlePath:De(),innerRadius:function(t,e){return.9*we(t,e)},labelPlacement:be,labelRotation:Re,segmentsProp:"segments",itemValueProp:"interval",startValueProp:"start",startLabelProp:"startLabel",needleValueProp:"value",labelProp:"label",labelAngle:function(t){return t.endAngle},suppressLabels:!1,includeLabels:function(){return!this.tryInvoke(this.opts.suppressLabels)}},Xa=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Va]))}},{key:"_initCore",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this._prevNeedleAngleValueData=0,this.needleValueData=0,this.needleValueAngleData=0}},{key:"_initRender",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initRender",this).call(this),this.bgArc=d3.arc().startAngle(this.tryInvoke(this.opts.pieStartAngle)).endAngle(this.tryInvoke(this.opts.pieEndAngle)).innerRadius(0).outerRadius(this.tryInvoke(this.opts.outerRadius,this.width,this.height)).cornerRadius(this.tryInvoke(this.opts.cornerRadius)),this.angleScale=d3.scaleLinear().range([this.opts.pieStartAngle,this.opts.pieEndAngle])}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Wa))}},{key:"_getLayerTranslate",value:function(){var t=this.tryInvoke(this.opts.outerRadius,this.width,this.height);return"translate("+(this.width/2+this.margin.left)+", "+(this.height-(this.height-t)+this.margin.top)+")"}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.arcBgCssScale),ie(this.opts.arcBgFillScale)}},{key:"_data",value:function(t){this.rawData=t;var n=this.tryInvoke(this.opts.segmentsProp),r=this.tryInvoke(this.opts.startValueProp),i=this.tryInvoke(this.opts.startLabelProp),o=this.tryInvoke(this.opts.itemValueProp),a=this.tryInvoke(this.opts.needleValueProp);$t(t[i])&&t[n].unshift({interval:0,label:t[i]}),$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t[n]);var s=this.displayData.reduce(function(t,e){return t+Math.abs(e[o])},0),l=t[r]||0;this.angleScale.domain([l,l+s]),this.needleValue(t[a],!0)}},{key:"needleValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t===Ao?this.needleValueData:(this._prevNeedleAngleValueData=this.needleValueAngleData,this.needleValueData=t,this.needleValueAngleData=this.angleScale(t),e||this.update(),this)}},{key:"needleValueAngle",value:function(t){return t===Ao?this.needleValueAngleData:(this.needleValue(this.angleScale.invert(t)),this)}},{key:"_render",value:function(){this.hasRendered||($e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_render",this).call(this),this._updateBackgroundArc())}},{key:"_update",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this),this._updateNeedle()}},{key:"_updateBackgroundArc",value:function(){var t=this;this.emit("updatingBackgroundArc"),this.bg.append("path").style("fill",this.optionReaderFunc("arcBgFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-gauge-bg",t.opts.arcBgCssScaleAccessor],e,n)}).attr("d",this.bgArc()),this.emit("updatedBackgroundArc")}},{key:"_updateNeedle",value:function(){var t=this,e=this.tryInvoke(this.opts.needleBase),n=this.tryInvoke(this.opts.outerRadius,this.width,this.height),r=this.tryInvoke(this.opts.innerRadius,this.width,this.height),i=this.tryInvoke(this.opts.needleHeight,r,n),o=this.tryInvoke(this.opts.needlePath,i,e),a=this.overlay.selectAll(".monte-gauge-needle").data([this.needleValueAngleData||0]);this.emit("updatingNeedle"),a.enter().append("path").attr("class","monte-gauge-needle").attr("d",o).call(function(e){return t.fnInvoke(t.opts.needleEnterSelectionCustomize,e)}).transition().call(this._transitionSetup("needle",Ro)).style("transform",function(t){return"rotate("+t+"rad)"}).call(function(e){return t.fnInvoke(t.opts.needleEnterTransitionCustomize,e)}),a.call(function(e){return t.fnInvoke(t.opts.needleExitSelectionCustomize,e)}).transition().call(this._transitionSetup("needle",wo)).styleTween("transform",function(e){var n=t._prevNeedleAngleValueData,r=e;return function(t){return"rotate("+(n*(1-t)+r*t)+"rad)"}}).call(function(e){return t.fnInvoke(t.opts.needleExitTransitionCustomize,e)}),a.exit().call(function(e){return t.fnInvoke(t.opts.needleExitSelectionCustomize,e)}).transition().call(this._transitionSetup("needle",jo)).call(function(e){return t.fnInvoke(t.opts.needleExitTransitionCustomize,e)}).remove(),this.emit("updatedNeedle")}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(Ga),(n=$e(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Ya);Xa.EVENTS=Wa;var Ga=["needleValue"],Ka={chartCss:"monte-arc-chart monte-polar-area-chart",innerRadius:30,outerRadiusProp:"",outerRadiusScale:d3.scaleSqrt,outerRadiusRange:function(t,e){var n=d3.min([t,e])/2;return[this.tryInvoke(this.opts.innerRadius,t,e),n]},outerRadiusDomainCustomize:function(t){return[0,t[1]]},outerRadius:function(){var t=this;return function(e){return t.getScaledProp("outerRadius","itemValue",e.data)}}},Za=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ka]))}},{key:"_initCore",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.outerRadius=this.opts.outerRadiusScale(),this.updateRadiusRange(),this.pie.value(function(){return 1})}},{key:"_boundsUpdate",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_boundsUpdate",this).call(this),this.updateRadiusRange()}},{key:"_data",value:function(t){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t),this.updateRadiusDomain()}},{key:"updateRadiusRange",value:function(){var t=this.tryInvoke(this.opts.outerRadiusRange,this.width,this.height);$t(t)&&Zt(t)&&this.outerRadius.range(t)}},{key:"updateRadiusDomain",value:function(){var t=this.data(),e=this.opts.outerRadiusDomainCustomize,n=t?this._domainExtent(t):[];e&&(n=this.tryInvoke(e,n)),this.outerRadius.domain(n)}},{key:"_domainExtent",value:function(t){var e=this;return d3.extent(t,function(t){return e.getProp("itemValue",t)})}}]),e}(Ya),$a=new RegExp("^"+Fa+"*"),qa=["updatingLabels","updatedLabels"],Ja="web",Qa={chartCss:"monte-radar-chart",outerRadius:we,areaCustomize:null,areaProp:"value",areaCssScale:Yt,areaCssScaleAccessor:$o.generateScaleAccessor("areaCssScale","area"),areaFillScale:Yt,areaFillScaleAccessor:$o.generateScaleAccessor("areaFillScale","area"),areaStrokeScale:Yt,areaStrokeScaleAccessor:$o.generateScaleAccessor("areaStrokeScale","area"),startAngle:0,endAngle:Da,radiusScale:d3.scaleLinear,radiusDomainCustomize:null,suppressRadiusLabels:!1,radiusLabelLayer:"support",radiusLabelRotation:Pe,radiusLabelAngle:0,radiusLabelFillScale:Yt,radiusLabelFillScaleAccessor:function(t){return this.opts.radiusLabelFillScale(t)},radiusLabel:function(t){return t},radiusLabelXAdjust:"",radiusLabelYAdjust:"0.35em",suppressWeb:!1,webArcCustomize:null,webLevels:function(){return this.radius.ticks()},webInnerLevels:[],webMode:"line",suppressLabels:!1,labelPlacement:me,labelRotation:Pe,labelAngle:0,labelProp:"value",labelFillScale:Yt,labelFillScaleAccessor:$o.generateScaleAccessor("labelFillScale","label"),label:function(t){return t.prop},labelXAdjust:"",labelYAdjust:"0.35em",suppressPoints:!1,pointProp:"",pointFillScale:Yt,pointFillScaleAccessor:$o.generateScaleAccessor("pointFillScale","pointProp"),pointStrokeScale:Yt,pointStrokeScaleAccessor:$o.generateScaleAccessor("pointStrokeScale","pointProp"),pointCssScale:Yt,pointCssScaleAccessor:$o.generateScaleAccessor("pointCssScale","pointProp"),pointCss:"point",pointSize:64,pointSymbol:function(t){return t.type(d3.symbolCircle)},areaValuesProp:"values",rayIdProp:"id",rayValueProp:"value"},ts=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Qa]))}},{key:"_initCore",value:function(){var t=this;$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.radius=this.tryInvoke(this.opts.radiusScale),this.areaRadialLine=d3.radialLine().radius(function(e){return t.radius(e.radius)}).angle(function(t){return t.angle}).curve(d3.curveLinearClosed),this.webArc=d3.arc().innerRadius(function(e){return t.radius(e.radius)}).outerRadius(function(e){return t.radius(e.radius)})}},{key:"_initCustomize",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.webArcCustomize&&this.fnInvoke(this.opts.webArcCustomize,this.webArc),this.opts.areaRadialLineCustomize&&this.fnInvoke(this.opts.areaRadialLineCustomize,this.areaRadialLine)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Qe(re("area")),Qe(re("point")),qa))}},{key:"_resetStyleDomains",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),ie(this.opts.areaCssScale),ie(this.opts.areaFillScale),ie(this.opts.areaStrokeScale),ie(this.opts.labelFillScale),ie(this.opts.radiusLabelFillScale),ie(this.opts.pointFillScale),ie(this.opts.pointStrokeScale),ie(this.opts.pointCssScale)}},{key:"_boundsUpdate",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_boundsUpdate",this).call(this);var t=this.tryInvoke(this.opts.outerRadius,this.width,this.height);this.radius.range([0,t])}},{key:"_data",value:function(t){var n=this;$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t);var r={};this.displayData.forEach(function(t){n.getProp("areaValues",t).forEach(function(t){var e=n.getProp("rayId",t);r[e]?r[e]++:r[e]=1})});var i=Object.keys(r),o=0;i.forEach(function(e){t.forEach(function(t){o<t[e]&&(o=t[e])})});var a=$t(this.opts.radiusDomainCustomize)?this.tryInvoke(this.opts.radiusDomainCustomize,[0,o]):[0,o];this.radius.domain(a);var s=this.__rayData(i),l=s.rayAngleMap,u=s.rayData;this.rayAngleMap=l,this.rayData=u,this.props=i}},{key:"__rayData",value:function(t){for(var e=this.tryInvoke(this.opts.startAngle),n=this.tryInvoke(this.opts.endAngle),r=t.length,i=(n-e)/r,o={},a=[],s=e,l=0;l<r;l++)o[t[l]]=s,a.push({prop:t[l],angle:s}),s+=i;return{rayAngleMap:o,rayData:a}}},{key:"_update",value:function(){var t=this._updateRays(),e=this._updateAreas();this._updateWeb(),this.tryInvoke(this.opts.suppressPoints)||this._updatePoints(e),this.opts.suppressLabels||this._updateRayLabels(t),this.opts.suppressRadiusLabels||this._updateRadiusLabels(t)}},{key:"_updateAreas",value:function(){var t=this,e=this.draw.selectAll(".monte-radar-area-grp").data(this.displayData,this.opts.dataKey),n=e.enter().append("g").classed("monte-radar-area-grp",!0).append("path").classed("monte-radar-area",!0).call(this.__bindCommonEvents("area"));return this._updateAreaSelections(n,Ro),this._updateAreaSelections(e.selectAll(".monte-radar-area"),wo),e.exit().call(function(e){return t.fnInvoke(t.opts.areaExitSelectionCustomize,e)}).transition().call(this._transitionSetup("area",jo)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.areaExitTransitionCustomize,e)}).remove(),e.merge(e.enter().selectAll(".monte-radar-area-grp"))}},{key:"_updateAreaSelections",value:function(t,e){var n=this,r="area"+xo(e)+"SelectionCustomize",i="area"+xo(e)+"TransitionCustomize";t.attr("class",function(t,e){return n._buildCss(["monte-radar-area",n.opts.areaCss,n.opts.areaCssScaleAccessor,t.css],t,e)}).call(function(t){return n.fnInvoke(n.opts[r],t)}).transition().call(this._transitionSetup("area",e)).attr("d",function(t){var e=n.getProp("areaValues",t),r=[];return n.props.forEach(function(t){var i=n.getPropKey("rayId"),o=n.getPropKey("rayValue"),a=Le(e,i,t,o);r.push({radius:a,angle:n.rayAngleMap[t]})}),n.areaRadialLine(r)}).style("fill",this.optionReaderFunc("areaFillScaleAccessor")).call(function(t){return n.fnInvoke(n.opts[i],t)})}},{key:"_updateRays",value:function(){var t=this,e=this.tryInvoke(this.opts.outerRadius,this.width,this.height),n=this.support.selectAll(".monte-radar-ray-grp").data(this.rayData);return n.enter().append("g").classed("monte-radar-ray-grp",!0).append("line").classed("monte-radar-ray",!0).attr("x0",0).attr("y0",0).attr("x1",function(t){return he(e,t.angle)[0]}).attr("y1",function(t){return he(e,t.angle)[1]}).attr("opacity",0).call(function(e){return t.fnInvoke(t.opts.rayEnterSelectionCustomize,e)}).transition().call(this._transitionSetup("ray",Ro)).attr("opacity",1).call(function(e){return t.fnInvoke(t.opts.rayEnterTransitionCustomize,e)}),n.select(".monte-radar-ray").call(function(e){return t.fnInvoke(t.opts.rayUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup("ray",wo)).attr("x1",function(t){return he(e,t.angle)[0]}).attr("y1",function(t){return he(e,t.angle)[1]}).attr("opacity",1).call(function(e){return t.fnInvoke(t.opts.rayUpdateTransitionCustomize,e)}),n.call(function(e){return t.fnInvoke(t.opts.rayExitSelectionCustomize,e)}).transition().call(this._transitionSetup("ray",jo)).attr("opacity",0).call(function(e){return t.fnInvoke(t.opts.rayExitTransitionCustomize,e)}),n.merge(n.enter().selectAll(".monte-radar-ray-grp"))}},{key:"_updateRayLabels",value:function(t){var e=this;this.emit("updatingLabels");var n=this.tryInvoke(this.opts.labelPlacement),r=this.tryInvoke(n.css);ze(this.bound,$a),this.classed(r,!0),t.each(function(t,n,r){var i=d3.select(r[n]);e._updateRayLabel(i,t,n,r)}),this.emit("updatedLabels")}},{key:"_updateRayLabel",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-radar-ray-label").data([e]),a=this.tryInvoke(this.opts.labelPlacement),s=this.tryInvoke(a.radius,this.width,this.height),l=this.tryInvoke(s,e,n,r),u=e.angle,c=de(this.tryInvoke(this.opts.labelRotation,e.angle,n,r)),p=he(l,u);o.enter().append("text").attr("class","monte-radar-ray-label").attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).attr("transform",function(){return"translate("+p+") rotate("+c+")"}).attr("angle",u).attr("radius",s).style("opacity",0).style("fill",this.optionReaderFunc("labelFillScaleAccessor")).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelEnterSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",Ro);i._transitionConfigure(t,o,e,n,r)}).style("opacity",1).call(function(t){return i.fnInvoke(i.opts.labelEnterTransitionCustomize,t)}),o.style("fill",this.optionReaderFunc("labelFillScaleAccessor")).style("opacity",1).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",wo);i._transitionConfigure(t,o,e,n,r)}).attrTween("transform",function(){var t=je(o.attr("transform"));return _e({angle:+o.attr("angle"),radius:+o.attr("radius"),rotate:t.rotate||0},{angle:u,radius:l,rotate:c},l)}).attr("angle",u).attr("radius",s).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateTransitionCustomize,t)}),o.exit().call(function(t){return i.fnInvoke(i.opts.labelExitSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",jo);i._transitionConfigure(t,o,e,n,r)}).style("opacity",0).call(function(t){return i.fnInvoke(i.opts.labelExitTransitionCustomize,t)}).remove()}},{key:"_updateRadiusLabels",value:function(){var t=this,e=this.tryInvoke(this.opts.webLevels),n=this[this.tryInvoke(this.opts.radiusLabelLayer)].selectAll(".monte-radar-radius-label").data(e),r=function(e,n,r){var i=t.radius(e),o=t.tryInvoke(t.opts.radiusLabelAngle,o,n,r);return"translate("+he(i,o)+") rotate("+de(t.tryInvoke(t.opts.radiusLabelRotation,o,n,r))+")"};n.enter().append("text").classed("monte-radar-radius-label",!0).attr("class","monte-radar-ray-label").attr("dx",this.optionReaderFunc("radiusLabelXAdjust")).attr("dy",this.optionReaderFunc("radiusLabelYAdjust")).style("opacity",0).style("fill",this.optionReaderFunc("radiusLabelFillScaleAccessor")).attr("transform","translate(0, 0)").text(this.optionReaderFunc("radiusLabel")).call(function(e){return t.fnInvoke(t.opts.radiusLabelEnterSelectionCustomize,e)}).transition().call(this._transitionSetup("label",Ro)).style("opacity",1).attr("transform",r).call(function(e){return t.fnInvoke(t.opts.radiusLabelEnterTransitionCustomize,e)}),n.style("fill",this.optionReaderFunc("radiusLabelFillScaleAccessor")).style("opacity",1).call(function(e){return t.fnInvoke(t.opts.radiusLabelUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup("label",wo)).attr("transform",r).text(this.optionReaderFunc("radiusLabel")).call(function(e){return t.fnInvoke(t.opts.radiusLabelUpdateTransitionCustomize,e)}),n.exit().call(function(e){return t.fnInvoke(t.opts.radiusLabelExitSelectionCustomize,e)}).transition().call(this._transitionSetup("label",jo)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.radiusLabelExitTransitionCustomize,e)}).remove()}},{key:"_updateWeb",value:function(){var t=this.tryInvoke(this.opts.webMode);if("arc"===t)this._updateWebArc();else{if("line"!==t)throw Eo.InvalidEnumOption("webMode",t);this._updateWebLine()}}},{key:"_updateWebArc",value:function(){var t=this,e=this.tryInvoke(this.opts.webInnerLevels),n=this.tryInvoke(this.opts.webLevels),r=this.tryInvoke(this.opts.startAngle),i=this.tryInvoke(this.opts.endAngle),o=e.map(function(t){return{radius:t,startAngle:r,endAngle:i,type:"minor"}});n.forEach(function(t){o.push({radius:t,startAngle:r,endAngle:i,type:"major"})});var a=this.bg.selectAll(".monte-radar-web").data(o);a.enter().append("path").attr("class",function(t){return t.type}).classed("monte-radar-web",!0).attr("d",function(e){return t.webArc(e)}).call(function(e){return t.fnInvoke(t.opts.webEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(Ja,Ro)).call(function(e){return t.fnInvoke(t.opts.webEnterTransitionCustomize,e)}),a.call(function(e){return t.fnInvoke(t.opts.webUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup(Ja,wo)).attr("d",function(e){return t.webArc(e)}).call(function(e){return t.fnInvoke(t.opts.webUpdateTransitionCustomize,e)}),a.exit().call(function(e){return t.fnInvoke(t.opts.webExitSelectionCustomize,e)}).transition().call(this._transitionSetup(Ja,jo)).call(function(e){return t.fnInvoke(t.opts.webExitTransitionCustomize,e)}).remove()}},{key:"_updateWebLine",value:function(){var t=this,e=this.tryInvoke(this.opts.webInnerLevels),n=this.tryInvoke(this.opts.webLevels),r=e.map(function(e){return{radius:e,values:t.rayData.map(function(t){return{radius:e,angle:t.angle}}),type:"minor"}});n.forEach(function(e){r.push({radius:e,values:t.rayData.map(function(t){return{radius:e,angle:t.angle}}),type:"major"})});var i=this.bg.selectAll(".monte-radar-web").data(r);i.enter().append("path").attr("class",function(t){return t.type}).classed("monte-radar-web",!0).attr("d",function(e){return t.areaRadialLine(e.values)}).call(function(e){return t.fnInvoke(t.opts.webEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(Ja,Ro)).call(function(e){return t.fnInvoke(t.opts.webEnterTransitionCustomize,e)}),i.call(function(e){return t.fnInvoke(t.opts.webUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup(Ja,wo)).attr("d",function(e){return t.areaRadialLine(e.values)}).call(function(e){return t.fnInvoke(t.opts.webUpdateTransitionCustomize,e)}),i.exit().call(function(e){return t.fnInvoke(t.opts.webExitSelectionCustomize,e)}).transition().call(this._transitionSetup(Ja,jo)).call(function(e){return t.fnInvoke(t.opts.webExitTransitionCustomize,e)}).remove()}},{key:"_updatePoints",value:function(t){var e=this;t.each(function(t,n,r){return e._updateAreaPoints(r[n],t,n)})}},{key:"_updateAreaPoints",value:function(t,e,n){var r=this,i=d3.select(t),o=Object.keys(e).map(function(t){return{prop:t,value:e[t]}}),a=i.selectAll(".monte-point").data(o),s=function(t,e){var n=r.tryInvoke(r.opts.pointSize,t,e),i=d3.symbol().size(n);return r.opts.pointSymbol(i,t,e)(t,e)};a.enter().append("path").call(this.__bindCommonEvents("point")).attr("d",s).attr("transform",function(t){return r._translatePoint(t)}).attr("class",function(t){return r._buildCss(["monte-point",r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n)}).call(function(t){return r.fnInvoke(r.opts.pointEnterSelectionCustomize,t)}).transition().call(this._transitionSetup("point",Ro)).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return r._translatePoint(t)}).call(function(t){return r.fnInvoke(r.opts.pointEnterTransitionCustomize,t)}),a.attr("class",function(t){return r._buildCss(["monte-point",r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n)}).call(function(t){return r.fnInvoke(r.opts.pointUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup("point",wo)).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return r._translatePoint(t)}).attr("d",s).call(function(t){return r.fnInvoke(r.opts.pointUpdateTransitionCustomize,t)}),a.exit().call(function(t){return r.fnInvoke(r.opts.pointExitSelectionCustomize,t)}).transition().call(this._transitionSetup("point",jo)).style("opacity",0).call(function(t){return r.fnInvoke(r.opts.pointExitTransitionCustomize,t)}).remove()}},{key:"_translatePoint",value:function(t){var e=this.rayAngleMap[t.prop],n=he(this.radius(t.value),e);return"translate("+n[0]+", "+n[1]+")"}}]),e}($o);ts.EVENTS=qa;var es={chartCss:"monte-arc-chart monte-wedge-chart",piePadAngle:0,margin:{top:1,right:1,bottom:1,left:1},arcWedgeEnter:function(t){return{startAngle:t.startAngle,endAngle:t.startAngle,value:t.value,padAngle:t.padAngle,index:t.index}}},ns=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[es]))}},{key:"_initCore",value:function(){$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.pie.sortValues(function(t,e){return t.value-e.value})}},{key:"_data",value:function(t){var n,r,i;this.wedgeValueData=t,this.rawData=t;for(var o=this.tryInvoke(this.opts.itemValueProp),a=[(n={},Ze(n,o,t),Ze(n,"css","monte-wedge"),n),(r={},Ze(r,o,100-t),Ze(r,"css","monte-arc-placeholder"),r)],s=arguments.length,l=Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return(i=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(i,[this,a].concat(l))}},{key:"wedgeValue",value:function(t){return t===Ao?this.wedgeValueData:(this.data(t),this)}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(rs),(n=$e(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Ya),rs=["wedgeValue"],is=Object.freeze({HORIZONTAL:"horizontal",VERTICAL:"vertical",NONE:"none",ANY:"any"}),os=-1/8*Ta,as=-.25*Ta,ss=-3/8*Ta,ls=-za,us=-5/8*Ta,cs=-.75*Ta,ps=-7/8*Ta,hs=Ta,ds=7/8*Ta,fs=.75*Ta,ys=5/8*Ta,vs=za,_s=3/8*Ta,gs=.25*Ta,bs=1/8*Ta,ms=os,ks=as,Ss=ss,xs=ls,As=us,Os=cs,Is=ps,Cs=hs,Es=ds,Ps=fs,Rs=ys,ws=vs,js=_s,Ts=gs,zs=bs,Ds=Object.freeze({NORTH:0,NORTH_NORTHWEST:os,NORTHWEST:as,WEST_NORTHWEST:ss,WEST:ls,WEST_SOUTHWEST:us,SOUTHWEST:cs,SOUTH_SOUTHWEST:ps,SOUTH:hs,SOUTH_SOUTHEAST:ds,SOUTHEAST:fs,EAST_SOUTHEAST:ys,EAST:vs,EAST_NORTHEAST:_s,NORTHEAST:gs,NORTH_NORTHEAST:bs,TOP:0,TOP_BY_TOP_LEFT:ms,TOP_LEFT:ks,LEFT_BY_TOP_LEFT:Ss,LEFT:xs,LEFT_BY_BOTTOM_LEFT:As,BOTTOM_LEFT:Os,BOTTOM_BY_BOTTOM_LEFT:Is,BOTTOM:Cs,BOTTOM_BY_BOTTOM_RIGHT:Es,BOTTOM_RIGHT:Ps,RIGHT_BY_BOTTOM_RIGHT:Rs,RIGHT:ws,RIGHT_BY_TOP_RIGHT:js,TOP_RIGHT:Ts,TOP_BY_TOP_RIGHT:zs}),Ls=Object.freeze({d3:zo,direction:is,math:La,polar:Ds,CLICK:"click",TOUCHSTART:"touchstart",TOUCHEND:"touchend",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",SUPPRESSED_ERROR:"suppressedError",EXTENSION:"extension",BEFORE_RENDER:"beforeRender",RENDERED:"rendered",BEFORE_UPDATE:"beforeUpdate",UPDATED:"updated",BEFORE_BOUNDS_UPDATE:"beforeBoundsUpdate",BOUNDS_UPDATED:"boundsUpdated",BEFORE_CLEAR:"beforeClear",CLEARED:"cleared",BEFORE_DESTROY:"beforeDestroy",DESTROYED:"destroyed",BEFORE_OPTION_CHANGE:"beforeOptionChange",OPTION_CHANGED:"optionChanged",BEFORE_STYLE_DOMAINS_RESET:"beforeStyleDomainsReset",STYLE_DOMAINS_RESET:"styleDomainsReset",INTERACTION_EVENTS:tn,INTERACTION_SHOW_EVENTS:en,INTERACTION_HIDE_EVENTS:nn,CHART_SUPPORT_EVENTS:rn,CHART_LIFECYCLE_EVENTS:on,EXTENSION_LIFECYCLE_EVENTS:an,ACTION_ADD:"add",ACTION_REMOVE:"remove",ACTION_CSS_OVER:"over",ACTION_CSS_TOUCH:"touch",INTERACTION_EVENT_CSS_MAP:sn,UNDEF:Ao}),Fs={layer:"bg",binding:["beforeDestroy","rendered","updated","boundsUpdated"],optionsTriggerUpdate:!1,eventPrefix:null,customEvents:[]},Bs=function(){function t(e){Ge(this,t),this.__extId=null,this._initOptions(e),this._initPublicEvents.apply(this,Qe(an).concat(Qe(this.opts.customEvents))),this.lastUpdateEvent=""}return Ke(t,[{key:"_initOptions",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.opts=te.apply(void 0,e.concat([Fs])),!this.opts.eventPrefix)throw Eo.RequiredOption("eventPrefix");-1===this.opts.binding.indexOf("beforeDestroy")&&this.opts.binding.push("beforeDestroy")}},{key:"_initPublicEvents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._events=e}},{key:"setChart",value:function(t){if(this.chart&&this.chart!==t)throw new Io("An extension should only have the chart set once.");this.chart=t;var e=this.tryInvoke(this.opts.layer);return e&&(this.layer=this.chart[e]),this.__extId=No.getNextExtensionId(),this}},{key:"option",value:function(t,e){return e===Ao?this.opts[t]:(this.opts[t]=e,this._shouldOptionUpdate(t)&&this.cachedChart&&this.fire("optionChanged",t),this)}},{key:"_shouldOptionUpdate",value:function(t){return this.opts.optionsTriggerUpdate}},{key:"on",value:function(t,e){if(!this.dispatch){var n;this.dispatch=(n=d3).dispatch.apply(n,Qe(this.events))}return e?(this.dispatch.on(t,e),this):this.dispatch.on(t)}},{key:"__notify",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.dispatch){var o;(o=this.dispatch).call.apply(o,[t,this].concat(r))}(e=this.chart).emit.apply(e,["extension",this.opts.eventPrefix+":"+t,this].concat(r))}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.__notify.apply(this,[t].concat(n))}},{key:"clear",value:function(){return this.__notify("beforeClear"),this._clearDataElements(),this.__notify("cleared"),this}},{key:"_clearDataElements",value:function(){this._extCreateSelection.remove()}},{key:"fire",value:function(t){if(!this.chart)throw new Io("A chart must be associated with the extension prior to use.");try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];switch(t){case"beforeDestroy":this.destroy();break;case"boundsUpdated":this.updateBounds.apply(this,n);break;case"rendered":this.render.apply(this,n);break;case"optionChanged":this._optionChanged.apply(this,n);break;default:this.lastUpdateEvent=t,this.update.apply(this,n)}}catch(t){console&&console.error&&console.error(t),this.__notify("suppressedError",t,t.stack||"No stack available.")}}},{key:"update",value:function(){this.__notify("beforeUpdate"),this._update.apply(this,arguments),this.__notify("updated")}},{key:"_update",value:function(t,e){throw Io.UnimplementedMethod("Update","_update","extension")}},{key:"render",value:function(){this._render&&(this.__notify("beforeRender"),this._render.apply(this,arguments),this.__notify("rendered")),this.rendered=!0}},{key:"updateBounds",value:function(){this._boundsUpdate&&(this.__notify("beforeBoundsUpdate"),this._boundsUpdate.apply(this,arguments),this.__notify("boundsUpdated"))}},{key:"_optionChanged",value:function(){var t=arguments.length<=0?void 0:arguments[0],e="_option"+oe(t);this.__notify("beforeOptionChange",t),this[e]?this[e]():this.update.apply(this,arguments),this.__notify("optionChanged",t)}},{key:"tryInvoke",value:function(t){try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Xt(t)?t.call.apply(t,[this].concat(n)):t}catch(t){return console&&console.error&&console.error(t),this.__notify("suppressedError",t,t.stack||"No stack available."),null}}},{key:"getProp",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t+"Prop",i=this.opts[r];return i?e[i]:n}},{key:"_buildCss",value:function(t,e,n,r){var i=this,o=[];return(Array.isArray(t)?t:[t]).forEach(function(t){$t(t)&&o.push(i.tryInvoke(t,e,n,r))}),o.join(" ")}},{key:"getExtId",value:function(){return this.__extId}},{key:"_getExtAttr",value:function(){return"monte-ext-"+this.getExtId()}},{key:"_setExtAttrs",value:function(t){t.attr(this._getExtAttr(),"")}},{key:"_extCreateSelection",value:function(t){var e="["+this._getExtAttr()+"]";return t&&(e+="."+t),this.layer.selectAll(e)}},{key:"destroy",value:function(){this.__notify("beforeDestroy"),this._destroy(),this.__notify("destroyed")}},{key:"_destroy",value:function(){}},{key:"toString",value:function(){return this.constructor.name}}],[{key:"featureEventName",value:function(t,e){return"chart"===t?e:t+":"+e}}]),t}(),Us={eventPrefix:"arc",startAngle:0,endAngle:Da,arcCss:"monte-ext-arc",innerRadius:0,outerRadius:100,cornerRadius:0},Ms=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Us])),this.arc=d3.arc().innerRadius(this.tryInvoke(this.opts.innerRadius)).outerRadius(this.tryInvoke(this.opts.outerRadius)).cornerRadius(this.tryInvoke(this.opts.cornerRadius))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.arcCss),n=this.tryInvoke(this.opts.startAngle),r=this.tryInvoke(this.opts.endAngle),i=$t(n)&&$t(r)?{startAngle:n,endAngle:r}:{startAngle:$t(n)?n:r,endAngle:$t(n)?n:r},o=this._extCreateSelection().data([i]);o.enter().append("path").call(this._setExtAttrs.bind(this)).attr("class",e).transition().call(this.chart._transitionSetup("extArc",Ro)).attrTween("d",function(e){return ve(t.arc,t.prev,e)}).on("end",function(e){return t.prev=e}),o.transition().call(this.chart._transitionSetup("extArc",wo)).attrTween("d",function(e){return ve(t.arc,t.prev,e)}).on("end",function(e){return t.prev=e}),o.exit().transition().call(this.chart._transitionSetup("extArc",jo)).style("opacity",.01).remove()}}]),e}(Bs),Ns=Object.freeze({commonEventNames:re,removeClassByPattern:ze,getTreeSetting:qt,invokeMany:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}},isArray:Zt,isDefined:$t,isFunc:Xt,isFuncDefined:function(t){return $t(t)&&Xt(t)&&!Gt(t)},isNoop:Gt,isNumberLike:Wt,isNumeric:Ht,isObject:Kt,isString:Vt,mergeOptions:te,ReplacePreceding:Bo,noop:Yt,areCoterminalAngles:pe,getPolarCoord:he,degreesToRadians:function(t){return t*(Ta/180)},radiansToDegrees:de,arcBisect:fe,wedgeBisect:ye,resetScaleDomain:ie,camelCase:mo,kebabCase:ko,snakeCase:So,pascalCase:oe,upperFirst:xo,combineTransforms:Te,readTransforms:je}),Ys={binding:new Bo(["axisRendered"]),layer:"support",eventPrefix:"axisrotatelabel",axis:"x",rotate:0,textAnchor:"",x:function(t,e,n,r){return"y"===r.substring(0,1)?0:10},y:function(t,e,n,r){return"y"===r.substring(0,1)?10:0},transformCustomize:Yt},Hs=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ys]))}},{key:"_update",value:function(t){var e=this,n=this.tryInvoke(this.opts.axis);if(n===t){var r=this.layer.selectAll("."+n+"-axis.axis .tick text");e.opts.textAnchor&&r.style("text-anchor",function(t,r,i){return e.tryInvoke(e.opts.textAnchor,t,r,i,n)}),r.attr("transform",function(t,r,i){var o=je(this.getAttribute("transform")),a=e.tryInvoke(e.opts.rotate,t,r,i,n);$t(a)&&(o.rotate=[a]);var s=e.tryInvoke(e.opts.x,t,r,i,n),l=e.tryInvoke(e.opts.y,t,r,i,n);return $t(s)&&$t(l)&&(o.translate=[s,l]),e.opts.transformCustomize&&Xt(e.opts.transformCustomize)&&e.opts.transformCustomize!==Yt&&(o=e.opts.transformCustomize(o)),Te(o)})}}}]),e}(Bs),Ws={binding:new Bo(["axisRendered"]),layer:"support",eventPrefix:"axislabelwrap",axis:"x",labelCustomize:Yt,lineHeightEm:1.1,maxWidth:Number.POSITIVE_INFINITY},Vs=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ws]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.axis),n=+this.tryInvoke(this.opts.lineHeightEm),r=this.tryInvoke(this.opts.maxWidth),i=this.layer.selectAll("."+e+"-axis.axis .tick text");this.layer.select("."+e+"-axis").transition().on("end",function(){i.call(Fe,r,n).call(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.tryInvoke.apply(t,[t.opts.labelCustomize].concat(n))})})}}]),e}(Bs),Xs={binding:new Bo(["axisRendered"]),layer:"support",eventPrefix:"axislabeltrunc",axis:"x",labelCustomize:Yt,maxWidth:Number.POSITIVE_INFINITY,indicator:"..."},Gs=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Xs]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.axis),n=this.tryInvoke(this.opts.indicator),r=this.tryInvoke(this.opts.maxWidth),i=this.layer.selectAll("."+e+"-axis.axis .tick text");this.layer.select("."+e+"-axis").transition().on("end",function(){i.call(Be,r,n).call(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.tryInvoke.apply(t,[t.opts.labelCustomize].concat(n))})})}}]),e}(Bs),Ks={featurePrefix:"point",eventPrefix:"crosshair",crosshairCss:"",lines:["bottom","left"],alignmentShift:.5,showBindings:en,hideBindings:nn,topCustomize:Yt,leftCustomize:Yt,rightCustomize:Yt,bottomCustomize:Yt},Zs=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=this,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(i,[Ks]));var a=this.tryInvoke(this.opts.showBindings),s=this.tryInvoke(this.opts.hideBindings),l=this.tryInvoke(this.opts.featurePrefix);Zt(l)||(l=[l]),this.showEvents=[],this.hideEvents=[],l.forEach(function(t){a.forEach(function(e){var r=Bs.featureEventName(t,e);n.opts.binding.push(r),n.showEvents.push(r)}),s.forEach(function(e){var r=Bs.featureEventName(t,e);n.opts.binding.push(r),n.hideEvents.push(r)})})}},{key:"_update",value:function(){function t(t){var e=d3.select(this),r=n.opts[t+"Customize"],i={x1:n.tryInvoke(s[t].x1,n.activeFeatureDatum),y1:n.tryInvoke(s[t].y1,n.activeFeatureDatum),x2:n.tryInvoke(s[t].x2,n.activeFeatureDatum),y2:n.tryInvoke(s[t].y2,n.activeFeatureDatum)};$t(r)&&Xt(r)&&r!==Yt&&(i=n.tryInvoke(r,i)),e.attr("x1",i.x1).attr("y1",i.y1).attr("x2",i.x2).attr("y2",i.y2)}var e=this,n=this,r=this.tryInvoke(this.opts.crosshairCss),i=this.tryInvoke(this.opts.lines),o=this._extCreateSelection().data(i).order(),a=this.tryInvoke(this.opts.alignmentShift),s={top:{x1:function(t){return e.chart.getScaledProp("x",t)+a},y1:0,x2:function(t){return e.chart.getScaledProp("x",t)+a},y2:function(t){return e.chart.getScaledProp("y",t)}},left:{x1:0,y1:function(t){return e.chart.getScaledProp("y",t)+a},x2:function(t){return e.chart.getScaledProp("x",t)},y2:function(t){return e.chart.getScaledProp("y",t)+a}},right:{x1:function(t){return e.chart.getScaledProp("x",t)},y1:function(t){return e.chart.getScaledProp("y",t)+a},x2:this.chart.width,y2:function(t){return e.chart.getScaledProp("y",t)+a}},bottom:{x1:function(t){return e.chart.getScaledProp("x",t)+a},y1:function(t){return e.chart.getScaledProp("y",t)},x2:function(t){return e.chart.getScaledProp("x",t)+a},y2:this.chart.height}};if("updated"===this.lastUpdateEvent)o.enter().append("line").call(this._setExtAttrs.bind(this)).attr("opacity",0).attr("class",r).classed("monte-ext-crosshair",!0),this.activeFeatureDatum&&o.transition().call(this.chart._transitionSetup("extCrosshair",wo)).each(t),o.exit().transition().call(this.chart._transitionSetup("extCrosshair",jo)).attr("opacity",0).remove();else if(this.isShowEvent(this.lastUpdateEvent)){var l=arguments.length<=0?void 0:arguments[0];this.activeFeatureDatum=l,o.interrupt().attr("opacity",1).each(t)}else this.isHideEvent(this.lastUpdateEvent)&&(this.activeFeatureDatum=null,o.interrupt().attr("opacity",0))}},{key:"isShowEvent",value:function(t){return this.showEvents.indexOf(t)>-1}},{key:"isHideEvent",value:function(t){return this.hideEvents.indexOf(t)>-1}}]),e}(Bs),$s={eventPrefix:"frame",frameLineCss:"monte-ext-frame-line",edges:["top","right","bottom","left"],alignmentShift:.5},qs=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[$s]))}},{key:"_shouldOptionUpdate",value:function(t){return"edges"===t||"alignmentShift"===t}},{key:"_update",value:function(){var t=this.chart,e=this.tryInvoke(this.opts.frameLineCss),n=this.tryInvoke(this.opts.edges),r=this._extCreateSelection().data(n).order(),i=this.tryInvoke(this.opts.alignmentShift),o={top:[[0+i,0+i],[t.width+i,0+i]],right:[[t.width+i,0+i],[t.width+i,t.height+i]],bottom:[[0+i,t.height+i],[t.width+i,t.height+i]],left:[[0+i,0+i],[0+i,t.height+i]]};r.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",e).attr("x1",function(t){return o[t][0][0]}).attr("y1",function(t){return o[t][0][1]}).attr("x2",function(t){return o[t][1][0]}).attr("y2",function(t){return o[t][1][1]}),r.transition().call(this.chart._transitionSetup("extFrame",wo)).attr("x1",function(t){return o[t][0][0]}).attr("y1",function(t){return o[t][0][1]}).attr("x2",function(t){return o[t][1][0]}).attr("y2",function(t){return o[t][1][1]}),r.exit().remove()}}]),e}(Bs),Js={eventPrefix:"grid",scalePrefixes:["x","y"],axisLayer:"support",prefixCssMap:{x:"v-line",y:"h-line"},lineCss:"monte-ext-grid-line",binding:new Bo(["axisRendered"]),x1Adjust:0,x2Adjust:0,y1Adjust:0,y2Adjust:0,orient:function(t){if("x"===t.charAt(0))return"vertical";if("y"===t.charAt(0))return"horizontal";throw new Eo("Unknown grid direction for scale "+t)}},Qs=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Js]))}},{key:"_update",value:function(t,e,n){var r=this,i=this.chart;if(!$t(n)){var o=this.chart.hasRendered?wo:Ro,a=this.tryInvoke(this.opts.axisLayer),s=this.chart[a];n=s.transition().call(this.chart._transitionSetup("axis",o))}var l=this.tryInvoke(this.opts.prefixCssMap);i.forEachAxisScale(function(t){if(l[t]){var e=r.getCss(t,l),o=i[t],a=i[t+"Axis"],s=r.tryInvoke(r.opts.orient,t);if(e&&o&&a){var u=a.tickValues(),c=a.tickArguments(),p=null==u?o.ticks?o.ticks.apply(o,c):o.domain():u,h=r._extCreateSelection(e).data(p,function(t){return t});r._updateTicks(h,n,{axesChart:i,axis:a,axisTransition:n,css:e,orient:s,scale:o,scaleName:t,lineCss:r.option("lineCss")})}}})}},{key:"_updateTicks",value:function(t,e,n){var r=[n.lineCss,n.css].join(" "),i=this.tryInvoke(this.opts.x1Adjust),o=this.tryInvoke(this.opts.x2Adjust),a=this.tryInvoke(this.opts.y1Adjust),s=this.tryInvoke(this.opts.y2Adjust);"horizontal"===n.orient?(t.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",r).attr("x1",0).attr("x2",0).attr("x1",0+i).attr("x2",n.axesChart.width+o).attr("y1",.5+a).attr("y2",.5+s).attr("transform",function(t){return"translate(0,"+n.scale(t)+")"}).style("opacity",0).transition(e).style("opacity",1),t.transition(e).attr("x1",function(){return 0+i}).attr("x2",function(){return n.axesChart.width+o}).attr("transform",function(t){return"translate(0,"+n.scale(t)+")"}).style("opacity",1)):"vertical"===n.orient&&(t.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",r).attr("x1",.5+i).attr("x2",.5+o).attr("y1",0+a).attr("y2",n.axesChart.height+s).attr("transform",function(t){return"translate("+n.scale(t)+", 0)"}).style("opacity",0).transition(e).style("opacity",1),t.transition(e).attr("y1",function(){return 0+a}).attr("y2",function(){return n.axesChart.height+s}).attr("transform",function(t){return"translate("+n.scale(t)+", 0)"}).style("opacity",1)),t.exit().transition(e).style("opacity",0).remove()}},{key:"getCss",value:function(t,e){for(var n in e)if(this.opts.prefixCssMap.hasOwnProperty(n)&&t.substr(0,n.length)===n)return this.tryInvoke(this.opts.prefixCssMap[n]);return""}}]),e}(Bs),tl=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_updateTicks",value:function(t,n,r){"horizontal"===r.orient&&$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateTicks",this).call(this,t,n,r)}}]),e}(Qs),el=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_updateTicks",value:function(t,n,r){"vertical"===r.orient&&$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateTicks",this).call(this,t,n,r)}}]),e}(Qs),nl={eventPrefix:"label",labelCss:"monte-ext-label",text:"",x:0,y:0,dy:"0.35em",dx:0,anchor:"start",labelCustomize:Yt,maxWidth:Number.POSITIVE_INFINITY},rl=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[nl]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.labelCss),n=this.tryInvoke(this.opts.text),r=+this.tryInvoke(this.opts.maxWidth),i=this._extCreateSelection().data([n]);i.enter().append("text").call(this._setExtAttrs.bind(this)).attr("class",e).merge(i).html(function(t){return t}).attr("text-anchor",this.tryInvoke(this.opts.anchor)).call(function(e){return t._checkMaxWidth(e,r)}).attr("x",this.tryInvoke(this.opts.x)).attr("y",this.tryInvoke(this.opts.y)).attr("dx",this.tryInvoke(this.opts.dx)).attr("dy",this.tryInvoke(this.opts.dy)).call(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.tryInvoke.apply(t,[t.opts.labelCustomize].concat(n))}),i.exit().remove()}},{key:"_checkMaxWidth",value:function(t,e){if(Ht(e)&&e>0){var n=t.node(),r=n.getBBox().width;if(r>e){var i=Ue(n),o=i*e/r;this.origFontSize||(this.origFontSize=i),t.style("font-size",o+"px")}else if($t(this.origFontSize)&&r<e){var a=Ue(n)*e/r;a>this.origFontSize?t.style("font-size",this.origFontSize+"px"):t.style("font-size",a+"px")}}}}]),e}(Bs),il={eventPrefix:"polargrid",startAngle:0,endAngle:Da,arcRadii:[100],arcCss:"monte-ext-polar-grid-arc",arcSpecificCss:null,arcSort:function(t,e){return e-t},arcWidth:0,cornerRadius:0},ol=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[il]));var o=this.tryInvoke(this.opts.arcWidth);this.arc=d3.arc().innerRadius(function(t){return t.radius}).outerRadius(function(t){return t.radius+o}).cornerRadius(this.tryInvoke(this.opts.cornerRadius))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.arcRadii).sort(this.opts.arcSort),n=this._extCreateSelection().data(e),r=this.tryInvoke(this.opts.startAngle),i=this.tryInvoke(this.opts.endAngle),o=$t(r)&&$t(i)?{startAngle:r,endAngle:i}:{startAngle:$t(r)?r:i,endAngle:$t(r)?r:i};n.enter().append("path").call(this._setExtAttrs.bind(this)).merge(n).attr("class",this.tryInvoke(this.opts.arcCss)).attr("d",function(e){return o.radius=e,t.arc(o)}),n.exit().remove()}}]),e}(Bs),al={eventPrefix:"polarline",layer:"overlay",angle:0,lineCss:"monte-ext-polar-line",innerRadius:0,outerRadius:100},sl=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[al]))}},{key:"_render",value:function(){this.innerArc=d3.arc(),this.outerArc=d3.arc()}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.innerRadius),n=this.tryInvoke(this.opts.outerRadius),r=this.tryInvoke(this.opts.lineCss),i=this.tryInvoke(this.opts.angle),o=this._extCreateSelection().data([{startAngle:i,endAngle:i}]),a=o.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",r);this.innerArc.innerRadius(e).outerRadius(e),this.outerArc.innerRadius(n).outerRadius(n),$t(i)?a.merge(o).transition().call(this.chart._transitionSetup("extPolarLine",wo)).attr("x1",function(e){return t.innerArc.centroid(e)[0]}).attr("y1",function(e){return t.innerArc.centroid(e)[1]}).attr("x2",function(e){return t.outerArc.centroid(e)[0]}).attr("y2",function(e){return t.outerArc.centroid(e)[1]}):a.merge(o).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0),o.exit().remove()}}]),e}(Bs),ll={layer:"draw",eventPrefix:"polarRotateLabel",labelCss:"monte-arc-label",rotation:Ee},ul=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ll]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.labelCss);this.layer.selectAll("."+e).attr("transform",function(e,n,r){var i=d3.select(r[n]),o=de(t.tryInvoke(t.opts.rotation,e,n,r)),a=je(i.attr("transform"));return a.rotate=[o],Te(a)})}}]),e}(Bs),cl={eventPrefix:"polarticks",startAngle:0,endAngle:Da,tickInterval:1/8*Da,innerRadius:0,outerRadius:100,tickCss:"monte-ext-polar-tick",suppressEnd:!1},pl=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[cl]));var o=this.tryInvoke(this.opts.innerRadius),a=this.tryInvoke(this.opts.outerRadius);this.innerArc=d3.arc().innerRadius(o).outerRadius(o),this.outerArc=d3.arc().innerRadius(a).outerRadius(a)}},{key:"_update",value:function(){var t=this,e=[],n=this.tryInvoke(this.opts.startAngle),r=this.tryInvoke(this.opts.endAngle),i=this.tryInvoke(this.opts.tickInterval),o=this.tryInvoke(this.opts.suppressEnd),a=this.tryInvoke(this.opts.tickCss),s=Math.abs(r-n)/i;o||pe(n,r)||s++;for(var l=0;l<s;l++){var u=n+l*i;e.push({startAngle:u,endAngle:u,value:l})}var c=this._extCreateSelection().data(e);c.enter().append("line").call(this._setExtAttrs.bind(this)).merge(c).attr("class",a).attr("x1",function(e){return t.innerArc.centroid(e)[0]}).attr("y1",function(e){return t.innerArc.centroid(e)[1]}).attr("x2",function(e){return t.outerArc.centroid(e)[0]}).attr("y2",function(e){return t.outerArc.centroid(e)[1]}),c.exit().remove()}}]),e}(Bs),hl={eventPrefix:"barbg",barBgCss:"monte-ext-bar-bg",data:null,maxValue:null,maxValueProp:null,minValue:null,minValueProp:null,enlarge:.05,cornerRadius:0},dl=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[hl]))}},{key:"_update",value:function(){var t=this,e=this.chart,n=e.data()||[],r=void 0;r=this.opts.data?this.tryInvoke(this.opts.data):this._buildData(e,n);var i=this._extCreateSelection().data(r),o=this._sizeAdjust(e),a=this.tryInvoke(this.opts.barBgCss);i.enter().append("rect").call(this._setExtAttrs.bind(this)).merge(i).attr("class",a).attr("x",function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._x.apply(t,[e,o].concat(r))}).attr("y",function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._y.apply(t,[e,o].concat(r))}).attr("width",function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._width.apply(t,[e,o].concat(r))}).attr("height",function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._height.apply(t,[e,o].concat(r))}).attr("rx",function(e,n){return t.tryInvoke(t.opts.cornerRadius,e,n)}),i.exit().remove()}},{key:"_buildData",value:function(t,e){for(var n=new Array(e.length),r=t.y.domain(),i=0;i<n.length;i++){var o,a=this.tryInvoke(this.opts.minValueProp),s=this.tryInvoke(this.opts.maxValueProp),l=a?e[i][a]:null,u=s?e[i][s]:null;n[i]=(o={},Ze(o,t.option("xProp"),e[i][t.option("xProp")]),Ze(o,"min",l||this.opts.minValue||r[0]),Ze(o,"max",u||this.opts.maxValue||r[1]),o)}return n}},{key:"_sizeAdjust",value:function(t){var e=this.tryInvoke(this.opts.enlarge);return t.x.bandwidth()*e}},{key:"_x",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t._barX.bind(t).apply(void 0,r)+this._xShift(e)}},{key:"_xShift",value:function(t){return-t}},{key:"_y",value:function(t,e,n){return t.y(n.max)+this._yShift(e)}},{key:"_yShift",value:function(t){return 0}},{key:"_widthAdjust",value:function(t){return 2*t}},{key:"_width",value:function(t,e,n){return t._barWidth(n)+this._widthAdjust(e)}},{key:"_heightAdjust",value:function(t){return 0}},{key:"_height",value:function(t,e,n){var r=t.y(0);return t.y(n.min)-r+(r-t.y(n.max))+this._heightAdjust(e)}}]),e}(Bs),fl=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_buildData",value:function(t,e){for(var n=new Array(e.length),r=t.x.domain(),i=0;i<n.length;i++){var o,a=this.tryInvoke(this.opts.minValueProp),s=this.tryInvoke(this.opts.maxValueProp),l=a?e[i][a]:null,u=s?e[i][s]:null;n[i]=(o={},Ze(o,t.option("yProp"),e[i][t.option("yProp")]),Ze(o,"min",l||this.opts.minValue||r[0]),Ze(o,"max",u||this.opts.maxValue||r[1]),o)}return n}},{key:"_sizeAdjust",value:function(t){return t.y.bandwidth()*this.opts.enlarge}},{key:"_x",value:function(t,e,n){return t.x(n.min)+this._xShift(e)}},{key:"_xShift",value:function(t){return 0}},{key:"_y",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t._barY.bind(t).apply(void 0,r)+this._yShift(e)}},{key:"_yShift",value:function(t){return-t}},{key:"_widthAdjust",value:function(t){return 0}},{key:"_width",value:function(t,e,n){var r=t.x(0);return r-t.x(n.min)+(t.x(n.max)-r)+this._widthAdjust(e)}},{key:"_heightAdjust",value:function(t){return 2*t}},{key:"_height",value:function(t,e,n){return t._barHeight(n)+this._heightAdjust(e)}}]),e}(dl),yl={eventPrefix:"refline",css:"monte-ext-ref-line-grp",data:Yt,layer:"overlay",labelPlacement:"nw",textAnchor:"start",textProp:"text",x1Prop:"x1",x2Prop:"x2",y1Prop:"y1",y2Prop:"y2"},vl={nw:function(t,e){t.attr("dy","-0.35em").attr("x",e.x1).attr("y",e.y1)},n:function(t,e){t.attr("dy","-0.35em").attr("x",(e.x2-e.x1)/2+e.x1).attr("y",e.y2)},ne:function(t,e){t.attr("dy","-0.35em").attr("x",e.x2).attr("y",e.y2)},w:function(t,e){t.attr("dy","0.35em").attr("x",e.x1).attr("y",e.y1)},e:function(t,e){t.attr("dy","0.35em").attr("x",e.x2).attr("y",e.y2)},sw:function(t,e){t.attr("dy","1em").attr("x",e.x1).attr("y",e.y1)},s:function(t,e){t.attr("dy","1em").attr("x",(e.x2-e.x1)/2+e.x1).attr("y",e.y2)},se:function(t,e){t.attr("dy","1em").attr("x",e.x2).attr("y",e.y2)}},_l=function(t){function e(t){Ge(this,e);var n=Je(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.lineData=[],n}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[yl]))}},{key:"_update",value:function(){var t=this;this.lineData=this.tryInvoke(this.opts.data),!Zt(this.lineData)&&$t(this.lineData)?this.lineData=[this.lineData]:$t(this.lineData)||(this.lineData=[]);var e=this._extCreateSelection().data(this.lineData),n=this.tryInvoke(this.opts.css),r=this.tryInvoke(this.opts.textAnchor),i=e.enter().append("g").call(this._setExtAttrs.bind(this)).attr("class",n);i.append("text"),i.append("line");var o=i.merge(e);o.select("line").attr("x1",function(e){return t.getProp("x1",e)}).attr("x2",function(e){return t.getProp("x2",e)}).attr("y1",function(e){return t.getProp("y1",e)}).attr("y2",function(e){return t.getProp("y2",e)}),o.select("text").attr("text-anchor",r).text(function(e){return t.getProp("text",e)}).each(this._placeLabel.bind(this)),e.exit().remove()}},{key:"_placeLabel",value:function(t,e,n){var r=d3.select(n[e]),i=this.tryInvoke(this.opts.labelPlacement,t,e,n),o=vl[i],a={x1:this.getProp("x1",t),x2:this.getProp("x2",t),y1:this.getProp("y1",t),y2:this.getProp("y2",t)};o.call(this,r,a)}}]),e}(Bs),gl=["selectionChanged","selectionMove","selectionStart","selectionEnd"],bl={css:"",layer:"selection",eventPrefix:"selectionRect",selectionDirection:null,handleSize:6,extent:function(t,e,n){return[[0,0],[t,e]]},initialSelection:function(t,e,n){return this.isXYBrush(n)?[[0,0],[0,0]]:this.isXBrush(n)?[0,t]:this.isYBrush(n)?[0,e]:void 0},filter:null,customHandlePath:null},ml=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[bl]))}},{key:"_initPublicEvents",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.push.apply(n,gl),$e(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this).call(this,n)}},{key:"_brush",value:function(t){var e=void 0,n=void 0;if(this.isXYBrush(t))e=d3.brush(),n="select-dir-all";else if(this.isXBrush(t))e=d3.brushX(),n="select-dir-x";else{if(!this.isYBrush(t)){throw new Eo('The "selectionDirection" option must be a direction (horizontal, vertical, or none), axis (x or y), or an unset value (null or undefined).')}e=d3.brushY(),n="select-dir-y"}return{brush:e,css:n}}},{key:"_handles",value:function(t){return this.isXYBrush(t)?[{type:"n"},{type:"e"},{type:"s"},{type:"w"}]:this.isXBrush(t)?[{type:"e"},{type:"w"}]:this.isYBrush(t)?[{type:"n"},{type:"s"}]:void 0}},{key:"_render",value:function(){var t=this.tryInvoke(this.opts.selectionDirection),e=this.tryInvoke(this.opts.handleSize),n=this.tryInvoke(this.opts.css),r=this.chart.width,i=this.chart.height,o=this.tryInvoke(this.opts.extent,r,i,t),a=this.tryInvoke(this.opts.initialSelection,r,i,t),s=this._brush(t);this.selectionDirection=t,this.extent=o,this.brush=s.brush.extent(o),this.brush.handleSize(e).on("start",this._brushMove.bind(this,"selectionStart")).on("brush",this._brushMove.bind(this,"selectionMove")).on("end",this._brushMove.bind(this,"selectionEnd")),this.brushSel=this.layer.classed("monte-ext-selection-rect",!0).classed(s.css,!0).classed(n,!0).call(this.brush),$t(this.opts.filter)&&Xt(this.opts.filter)&&this.brush.filter(this.opts.filter),$t(this.opts.customHandlePath)&&this.opts.customHandlePath!==Yt?(this._renderCustomHandles(),this.brushSel.classed("custom-handles",!0)):this.brushSel.classed("standard-handles",!0),this.brush.move(this.brushSel,a)}},{key:"_renderCustomHandles",value:function(){var t=this;this.brushSel.selectAll(".handle--custom").data(this._handles(this.selectionDirection)).enter().append("path").attr("display","none").attr("class",function(t){return"handle--custom "+t.type}).attr("d",function(e,n,r){return t.tryInvoke(t.opts.customHandlePath,e,n,r)}),this.usingCustomHandles=!0}},{key:"_boundsUpdate",value:function(){var t=this.chart.width,e=this.chart.height,n=this.tryInvoke(this.opts.extent,t,e,this.selectionDirection);this.extent=n,this.brush.extent(n),this.brushSel.call(this.brush),this.brush.move(this.brushSel,this.unscaleSelection(this._selection.scaled))}},{key:"_update",value:function(){}},{key:"_brushMove",value:function(t){var e=this,n=this.selection();if(this._selection=n,this.usingCustomHandles){var r=this.brushSel.selectAll(".handle--custom");null==n.raw?r.attr("display","none"):r.attr("display",null).attr("transform",function(t){return"translate("+e._handleX(t.type,n.raw)+","+e._handleY(t.type,n.raw)+")"})}this.emit(t,n),this.emit("selectionChanged",n)}},{key:"scaleSelection",value:function(t){var e=this.selectionDirection,n=t;return n?this.isXYBrush(e)?[[this.chart.x.invert(n[0][0]),this.chart.y.invert(n[1][1])],[this.chart.x.invert(n[1][0]),this.chart.y.invert(n[0][1])]]:this.isXBrush(e)?[this.chart.x.invert(n[0]),this.chart.x.invert(n[1])]:this.isYBrush(e)?[this.chart.y.invert(n[1]),this.chart.y.invert(n[0])]:void 0:n}},{key:"unscaleSelection",value:function(t){var e=this.selectionDirection,n=t;return n?this.isXYBrush(e)?[[this.chart.x(n[0][0]),this.chart.y(n[1][1])],[this.chart.x(n[1][0]),this.chart.y(n[0][1])]]:this.isXBrush(e)?[this.chart.x(n[0]),this.chart.x(n[1])]:this.isYBrush(e)?[this.chart.y(n[1]),this.chart.y(n[0])]:void 0:n}},{key:"selection",value:function(){var t=d3.brushSelection(this.brushSel.node());return{raw:t,scaled:this.scaleSelection(t)}}},{key:"clearSelection",value:function(){this.brushSel.call(this.brush.move,null)}},{key:"destroy",value:function(){}},{key:"isXYBrush",value:function(t){return!$t(t)||"none"===t||"any"===t}},{key:"isXBrush",value:function(t){return"x"===(t=t||"").toLowerCase()||"horizontal"===t}},{key:"isYBrush",value:function(t){return"y"===(t=t||"").toLowerCase()||"vertical"===t}},{key:"_handleX",value:function(t,e){var n=this.selectionDirection,r=e,i=this.isXBrush(n),o=this.isYBrush(n);if(!r)return 0;switch(t){case"n":case"s":return o?Me(this.extent[0][0],this.extent[1][0]):Me(r[0][0],r[1][0]);case"e":return i?r[1]:r[1][0];case"w":return i?r[0]:r[0][0]}}},{key:"_handleY",value:function(t,e){var n=this.selectionDirection,r=e,i=this.isXBrush(n),o=this.isYBrush(n);if(!r)return 0;switch(t){case"n":return o?r[0]:r[0][1];case"s":return o?r[1]:r[1][1];case"w":case"e":return i?Me(this.extent[0][1],this.extent[1][1]):Me(r[0][1],r[1][1])}}}]),e}(Bs),kl={x:0,y:30,rotate:0,textAnchor:"middle"},Sl={x:-30,y:function(t,e){return e/2},rotate:-90,textAnchor:"middle"},xl=function(){function t(e){Ge(this,t),this.opts=e||{}}return Ke(t,[{key:"option",value:function(t,e){this.opts[t]=e}},{key:"resize",value:function(t){var e=t.bound.node().parentElement;document.body.contains(e)&&this.checkResize(t)}},{key:"checkResize",value:function(){throw Io.UnimplementedMethod("Resize","resize")}}]),t}(),Al=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"checkResize",value:function(t){var e=We(t.bound.node().parentElement);t.boundingRect(e.rect.width-e.pl-e.pr,t.opts.boundingHeight)}}]),e}(xl),Ol=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"checkResize",value:function(t){var e=We(t.bound.node().parentElement),n=e.rect.width-e.pl-e.pr,r=this.opts.ratio||1;t.boundingRect(n,n/r)}}]),e}(xl),Il=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"checkResize",value:function(t){var e=We(t.bound.node().parentElement);t.boundingRect(e.rect.width-e.pl-e.pr,e.rect.height-e.pt-e.pb)}}]),e}(xl),Cl=function(t){function e(){return Ge(this,e),Je(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return qe(e,t),Ke(e,[{key:"checkResize",value:function(t){var e=We(t.bound.node().parentElement);t.boundingRect(t.opts.boundingWidth,e.rect.height-e.pt-e.pb)}}]),e}(xl);t.constants=Ls,t.tools=Ns,t.version="0.0.0-alpha28",t.Chart=Wo,t.AxesChart=Ko,t.PolarChart=$o,t.LineChart=Jo,t.AreaChart=ta,t.SparklineChart=na,t.BarChart=oa,t.HorizontalBarChart=la,t.SimpleBarChart=ca,t.HorizontalSimpleBarChart=ha,t.SegmentBarChart=_a,t.HorizontalSegmentBarChart=ma,t.VerticalSpanChart=xa,t.HorizontalSpanChart=Oa,t.ScatterPlot=Ca,t.IconArray=ja,t.iconArrangeBottomTop=Pa,t.iconArrangeTopBottom=Ra,t.ArcChart=Ya,t.GaugeChart=Xa,t.PolarAreaChart=Za,t.RadarChart=ts,t.WedgeChart=ns,t.EventWatcher=Mo,t.InstanceGroup=Co,t.MonteError=Io,t.MonteOptionError=Eo,t.global=No,t.Extension=Bs,t.ExtArc=Ms,t.ExtAxisTickTransform=Hs,t.ExtAxisLabelWrap=Vs,t.ExtAxisLabelTruncate=Gs,t.ExtCrosshair=Zs,t.ExtFrame=qs,t.ExtGrid=Qs,t.ExtHorizontalLines=tl,t.ExtVerticalLines=el,t.ExtLabel=rl,t.ExtPolarGrid=ol,t.ExtPolarLine=sl,t.ExtPolarRotateLabel=ul,t.ExtPolarTicks=pl,t.ExtBarBg=dl,t.ExtHorizontalBarBg=fl,t.ExtReferenceLine=_l,t.ExtSelectionRect=ml,t.axisNoTicks=function(t){return t.tickSize(0),t},t.axisWholeNumberFormat=function(t){return t.tickFormat(d3.format(",.0f")),t},t.axisXLabelStart=function(t){t.attr("transform","translate(0, 30)").style("text-anchor","start")},t.axisXLabelCenter=Ne,t.axisXLabelGenerator=function(t){var e=te(t,kl);return function(t){var n=this.tryInvoke(e.x),r=this.tryInvoke(e.y),i=this.tryInvoke(e.rotate),o=this.tryInvoke(e.textAnchor);t.attr("transform","translate("+n+", "+r+"), rotate("+i+")").style("text-anchor",o)}},t.axisXLabelMiddle=Ne,t.axisXLabelEnd=function(t){var e=this.width||0;t.attr("transform","translate("+e+", 30)").style("text-anchor","end")},t.axisYLabelStart=function(t){var e=this.height||0;t.attr("transform","translate(-30, "+e+"), rotate(-90)").style("text-anchor","start")},t.axisYLabelCenter=Ye,t.axisYLabelGenerator=function(t){var e=te(t,Sl);return function(t){var n=this.tryInvoke(e.x,this.width,this.height),r=this.tryInvoke(e.y,this.width,this.height),i=this.tryInvoke(e.rotate),o=this.tryInvoke(e.textAnchor);t.attr("transform","translate("+n+", "+r+"), rotate("+i+")").style("text-anchor",o)}},t.axisYLabelMiddle=Ye,t.axisYLabelEnd=function(t){t.attr("transform","translate(-30, 0), rotate(-90)").style("text-anchor","end")},t.radiusContrain=we,t.extentFromZero=ae,t.extentBalanced=se,t.extentGeneratorPercentOffset=function(t){return function(e){var n=Math.abs(e[1]-e[0])*t;return[e[0]-n,e[1]+n]}},t.extentGeneratorValueOffset=function(t,e){return null==e&&(e=t),function(n){return[n[0]-t,n[1]+e]}},t.extentGeneratorZeroToMax=function(t){return function(){return[0,t]}},t.needleRoundedEnd=De,t.needleFlatEnd=function(){return function(t,e){var n=e/2;return["M","-"+n+" 0","0 -"+t,n+" 0","Z"].join(" ")}},t.needleExtraPointer=function(t){var e=te(t,Ha);return function(t,n){var r=n/2;return["M","-"+r+" 0","0 -"+t,r+" 0","0 "+(e.smallNeedleHeight||t*e.smallNeedleRatio),"Z"].join(" ")}},t.needleRect=function(t){var e=te(t,Ha);return function(t,n){var r=t,i=e.smallNeedleHeight||t*e.smallNeedleRatio,o=n/2;return["M","-"+o+" 0","-"+o+" -"+r,o+" -"+r,o+" 0",o+" "+i,"-"+o+" "+i,"Z"].join(" ")}},t.polarLabelCentroid=ge,t.polarLabelInner=be,t.polarLabelInnerAdjust=function(t){return{css:Fa+"inner "+Fa+"inner-"+t,radius:function(e,n){var r=this.chart||this,i=this.tryInvoke(this.option("innerRadius"),e,n);return function(e,n,o){return r.tryInvoke(i,e,n,o)+t}}}},t.polarLabelInnerEdge=function(){return Ba.INNER_EDGE},t.polarLabelInnerFactor=function(t){return{css:Fa+"inner "+Fa+"inner-x"+t,radius:function(e,n){var r=this.chart||this,i=this.tryInvoke(this.option("innerRadius"),e,n);return function(e,n,o){return r.tryInvoke(i,e,n,o)*t}}}},t.polarLabelOuter=me,t.polarLabelOuterAdjust=function(t){return{css:Fa+"outer "+Fa+"outer-"+t,radius:function(e,n){var r=this.chart||this,i=this.tryInvoke(this.option("outerRadius"),e,n);return function(e,n,o){return r.tryInvoke(i,e,n,o)+t}}}},t.polarLabelOuterEdge=function(){return Ba.OUTER_EDGE},t.polarLabelOuterFactor=function(t){return{css:Fa+"outer "+Fa+"outer-x"+t,radius:function(e,n){var r=this.chart||this,i=this.tryInvoke(this.option("outerRadius"),e,n);return function(e,n,o){return r.tryInvoke(i,e,n,o)*t}}}},t.gaugeLabelRotateTangentOrigin=function(t){return Se(ke(t).endAngle)},t.gaugeLabelRotateTangentFlip=Pe,t.gaugeLabelRotateRay=function(t){return Ae(ke(t).endAngle)},t.gaugeLabelRotateRayFlip=function(t){return Ie(ke(t).endAngle)},t.gaugeLabelRotateRayOpposite=function(t){return Oe(ke(t).endAngle)},t.gaugeLabelRotateNone=Re,t.polarLabelRotateTangentOrigin=function(t){return Se(ye(ke(t)))},t.polarLabelRotateTangentFlip=Ee,t.polarLabelRotateRay=function(t){return Ae(ye(ke(t)))},t.polarLabelRotateRayFlip=function(t){return Ie(ye(ke(t)))},t.polarLabelRotateRayOpposite=function(t){return Oe(ye(ke(t)))},t.polarLabelRotateNone=function(){return Ce()},t.AutoResizer=Il,t.HorizontalResizer=Al,t.HorizontalRatioResizer=Ol,t.Resizer=xl,t.VerticalResizer=Cl,t.transitionSettings=Lo,t.arcSimpleTween=ve,t.arcLabelTween=_e,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=monte.min.js.map
