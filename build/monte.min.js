// https://github.com/YellowTugboat/monte#readme Version 0.0.0-alpha27 Copyright 2017 Yellow Tugboat
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.monte=t.monte||{})}(this,function(t){"use strict";function e(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function n(t,n,r){var i=t.length;return r=void 0===r?i:r,!n&&r>=i?t:e(t,n,r)}function r(t){return ai.test(t)}function i(t){return t.split("")}function o(t){return t.match(Ii)||[]}function a(t){return r(t)?o(t):i(t)}function s(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function u(t){var e=Ti.call(t,Di),n=t[Di];try{t[Di]=void 0;var r=!0}catch(t){}var i=zi.call(t);return r&&(e?t[Di]=n:delete t[Di]),i}function l(t){return Fi.call(t)}function c(t){return null==t?void 0===t?Mi:Bi:Ui&&Ui in Object(t)?u(t):l(t)}function p(t){return null!=t&&"object"==("undefined"==typeof t?"undefined":rr(t))}function h(t){return"symbol"==("undefined"==typeof t?"undefined":rr(t))||p(t)&&c(t)==Ni}function d(t){if("string"==typeof t)return t;if(wi(t))return s(t,d)+"";if(h(t))return Yi?Yi.call(t):"";var e=t+"";return"0"==e&&1/t==-Hi?"-0":e}function f(t){return null==t?"":d(t)}function y(t){return function(e){e=f(e);var i=r(e)?a(e):void 0,o=i?i[0]:e.charAt(0),s=i?n(i,1).join(""):e.slice(1);return o[t]()+s}}function v(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function _(t){return function(e){return null==t?void 0:t[e]}}function g(t){return t=f(t),t&&t.replace(Ki,Xi).replace(to,"")}function b(t){return t.match(eo)||[]}function m(t){return no.test(t)}function k(t){return t.match(Wo)||[]}function S(t,e,n){return t=f(t),e=n?void 0:e,void 0===e?m(t)?k(t):b(t):t.match(e)||[]}function x(t){return function(e){return v(S(g(e).replace(Vo,"")),t,"")}}function A(t){return Vi(f(t).toLowerCase())}function O(){this.__data__=[],this.size=0}function I(t,e){return t===e||t!==t&&e!==e}function C(t,e){for(var n=t.length;n--;)if(I(t[n][0],e))return n;return-1}function P(t){var e=this.__data__,n=C(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():$o.call(e,n,1),--this.size,!0}function E(t){var e=this.__data__,n=C(e,t);return n<0?void 0:e[n][1]}function R(t){return C(this.__data__,t)>-1}function w(t,e){var n=this.__data__,r=C(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function j(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function T(){this.__data__=new j,this.size=0}function z(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function D(t){return this.__data__.get(t)}function L(t){return this.__data__.has(t)}function F(t){var e="undefined"==typeof t?"undefined":rr(t);return null!=t&&("object"==e||"function"==e)}function B(t){if(!F(t))return!1;var e=c(t);return e==Jo||e==Qo||e==qo||e==ta}function M(t){return!!na&&na in t}function U(t){if(null!=t){try{return ia.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function N(t){if(!F(t)||M(t))return!1;var e=B(t)?pa:aa;return e.test(U(t))}function H(t,e){return null==t?void 0:t[e]}function W(t,e){var n=H(t,e);return N(n)?n:void 0}function Y(){this.__data__=da?da(null):{},this.size=0}function V(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function G(t){var e=this.__data__;if(da){var n=e[t];return n===fa?void 0:n}return va.call(e,t)?e[t]:void 0}function X(t){var e=this.__data__;return da?void 0!==e[t]:ga.call(e,t)}function K(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=da&&void 0===e?ba:e,this}function Z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $(){this.size=0,this.__data__={hash:new Z,map:new(ha||j),string:new Z}}function q(t){var e="undefined"==typeof t?"undefined":rr(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function J(t,e){var n=t.__data__;return q(e)?n["string"==typeof e?"string":"hash"]:n.map}function Q(t){var e=J(this,t).delete(t);return this.size-=e?1:0,e}function tt(t){return J(this,t).get(t)}function et(t){return J(this,t).has(t)}function nt(t,e){var n=J(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t,e){var n=this.__data__;if(n instanceof j){var r=n.__data__;if(!ha||r.length<ma-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new rt(r)}return n.set(t,e),this.size=n.size,this}function ot(t){var e=this.__data__=new j(t);this.size=e.size}function at(t){return this.__data__.set(t,ka),this}function st(t){return this.__data__.has(t)}function ut(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new rt;++e<n;)this.add(t[e])}function lt(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function ct(t,e){return t.has(e)}function pt(t,e,n,r,i,o){var a=n&Sa,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,p=!0,h=n&xa?new ut:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var d=t[c],f=e[c];if(r)var y=a?r(f,d,c,e,t,o):r(d,f,c,t,e,o);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!lt(e,function(t,e){if(!ct(h,e)&&(d===t||i(d,t,n,r,o)))return h.push(e)})){p=!1;break}}else if(d!==f&&!i(d,f,n,r,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function ht(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function dt(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function ft(t,e,n,r,i,o,a){switch(n){case Fa:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case La:return!(t.byteLength!=e.byteLength||!o(new Aa(t),new Aa(e)));case Ca:case Pa:case wa:return I(+t,+e);case Ea:return t.name==e.name&&t.message==e.message;case ja:case za:return t==e+"";case Ra:var s=ht;case Ta:var u=r&Oa;if(s||(s=dt),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=Ia,a.set(t,e);var c=pt(s(t),s(e),r,i,o,a);return a.delete(t),c;case Da:if(Ma)return Ma.call(t)==Ma.call(e)}return!1}function yt(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function vt(t,e,n){var r=e(t);return wi(t)?r:yt(r,n(t))}function _t(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function gt(){return[]}function bt(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function mt(t){return p(t)&&c(t)==Ya}function kt(){return!1}function St(t,e){return e=null==e?es:e,!!e&&("number"==typeof t||ns.test(t))&&t>-1&&t%1==0&&t<e}function xt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=rs}function At(t){return p(t)&&xt(t.length)&&!!Ps[c(t)]}function Ot(t){return function(e){return t(e)}}function It(t,e){var n=wi(t),r=!n&&Ka(t),i=!n&&!r&&ts(t),o=!n&&!r&&!i&&Ds(t),a=n||r||i||o,s=a?bt(t.length,String):[],u=s.length;for(var l in t)!e&&!Fs.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||St(l,u))||s.push(l);return s}function Ct(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Bs;return t===n}function Pt(t,e){return function(n){return t(e(n))}}function Et(t){if(!Ct(t))return Ms(t);var e=[];for(var n in Object(t))Ns.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Rt(t){return null!=t&&xt(t.length)&&!B(t)}function wt(t){return Rt(t)?It(t):Et(t)}function jt(t){return vt(t,wt,Wa)}function Tt(t,e,n,r,i,o){var a=n&Hs,s=jt(t),u=s.length,l=jt(e),c=l.length;if(u!=c&&!a)return!1;for(var p=u;p--;){var h=s[p];if(!(a?h in e:Ys.call(e,h)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var f=!0;o.set(t,e),o.set(e,t);for(var y=a;++p<u;){h=s[p];var v=t[h],_=e[h];if(r)var g=a?r(_,v,h,e,t,o):r(v,_,h,t,e,o);if(!(void 0===g?v===_||i(v,_,n,r,o):g)){f=!1;break}y||(y="constructor"==h)}if(f&&!y){var b=t.constructor,m=e.constructor;b!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m)&&(f=!1)}return o.delete(t),o.delete(e),f}function zt(t,e,n,r,i,o){var a=wi(t),s=wi(e),u=a?cu:su(t),l=s?cu:su(e);u=u==lu?pu:u,l=l==lu?pu:l;var c=u==pu,p=l==pu,h=u==l;if(h&&ts(t)){if(!ts(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new ot),a||Ds(t)?pt(t,e,n,r,i,o):ft(t,e,u,n,r,i,o);if(!(n&uu)){var d=c&&du.call(t,"__wrapped__"),f=p&&du.call(e,"__wrapped__");if(d||f){var y=d?t.value():t,v=f?e.value():e;return o||(o=new ot),i(y,v,n,r,o)}}return!!h&&(o||(o=new ot),Tt(t,e,n,r,i,o))}function Dt(t,e,n,r,i){return t===e||(null==t||null==e||!p(t)&&!p(e)?t!==t&&e!==e:zt(t,e,n,r,Dt,i))}function Lt(t,e){return Dt(t,e)}function Ft(t){return wi(t)||Ka(t)||!!(fu&&t&&t[fu])}function Bt(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Ft),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Bt(s,e-1,n,r,i):yt(i,s):r||(i[i.length]=s)}return i}function Mt(t){var e=null==t?0:t.length;return e?Bt(t,yu):[]}function Ut(t,e){return null!=t&&_u.call(t,e)}function Nt(t,e){if(wi(t))return!1;var n="undefined"==typeof t?"undefined":rr(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!h(t))||(bu.test(t)||!gu.test(t)||null!=e&&t in Object(e))}function Ht(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(mu);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ht.Cache||rt),n}function Wt(t){var e=Ht(t,function(t){return n.size===ku&&n.clear(),t}),n=e.cache;return e}function Yt(t,e){return wi(t)?t:Nt(t,e)?[t]:Ou(f(t))}function Vt(t){if("string"==typeof t||h(t))return t;var e=t+"";return"0"==e&&1/t==-Iu?"-0":e}function Gt(t,e,n){e=Yt(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Vt(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&xt(i)&&St(a,i)&&(wi(t)||Ka(t)))}function Xt(t,e){return null!=t&&Gt(t,e,Ut)}function Kt(t,e){e=Yt(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Vt(e[n++])];return n&&n==r?t:void 0}function Zt(t,e,n){var r=null==t?void 0:Kt(t,e);return void 0===r?n:r}function $t(t,e,n){"__proto__"==e&&Cu?Cu(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function qt(t,e,n){var r=t[e];Eu.call(t,e)&&I(r,n)&&(void 0!==n||e in t)||$t(t,e,n)}function Jt(t,e,n,r){if(!F(t))return t;e=Yt(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=Vt(e[i]),l=n;if(i!=a){var c=s[u];l=r?r(c,u,s):void 0,void 0===l&&(l=F(c)?c:St(e[i+1])?[]:{})}qt(s,u,l),s=s[u]}return t}function Qt(t,e,n){return null==t?t:Jt(t,e,n)}function te(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ee(t){return t}function ne(t,e,n){return e=Ru(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Ru(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),te(t,this,s)}}function re(t){return function(){return t}}function ie(t){var e=0,n=0;return function(){var r=zu(),i=Tu-(r-n);if(n=r,i>0){if(++e>=ju)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function oe(t,e){return Du(ne(t,e,ee),t+"")}function ae(t,e,n){(void 0===n||I(t[e],n))&&(void 0!==n||e in t)||$t(t,e,n)}function se(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}function ue(t,e){if(e)return t.slice();var n=t.length,r=Nu?Nu(n):new t.constructor(n);return t.copy(r),r}function le(t){var e=new t.constructor(t.byteLength);return new Aa(e).set(new Aa(t)),e}function ce(t,e){var n=e?le(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function pe(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function he(t){return"function"!=typeof t.constructor||Ct(t)?{}:Wu(Yu(t))}function de(t){return p(t)&&Rt(t)}function fe(t){if(!p(t)||c(t)!=Vu)return!1;var e=Yu(t);if(null===e)return!0;var n=Zu.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Ku.call(n)==$u}function ye(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?$t(n,s,u):qt(n,s,u)}return n}function ve(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function _e(t){if(!F(t))return ve(t);var e=Ct(t),n=[];for(var r in t)("constructor"!=r||!e&&Ju.call(t,r))&&n.push(r);return n}function ge(t){return Rt(t)?It(t,!0):_e(t)}function be(t){return ye(t,ge(t))}function me(t,e,n,r,i,o,a){var s=t[n],u=e[n],l=a.get(u);if(l)return void ae(t,n,l);var c=o?o(s,u,n+"",t,e,a):void 0,p=void 0===c;if(p){var h=wi(u),d=!h&&ts(u),f=!h&&!d&&Ds(u);c=u,h||d||f?wi(s)?c=s:de(s)?c=pe(s):d?(p=!1,c=ue(u,!0)):f?(p=!1,c=ce(u,!0)):c=[]:fe(u)||Ka(u)?(c=s,Ka(s)?c=be(s):(!F(s)||r&&B(s))&&(c=he(u))):p=!1}p&&(a.set(u,c),i(c,u,r,o,a),a.delete(u)),ae(t,n,c)}function ke(t,e,n,r,i){t!==e&&Lu(e,function(o,a){if(F(o))i||(i=new ot),me(t,e,a,n,ke,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):void 0;void 0===s&&(s=o),ae(t,a,s)}},ge)}function Se(t,e,n,r,i,o){return F(t)&&F(e)&&(o.set(e,t),ke(t,e,void 0,Se,o),o.delete(e)),t}function xe(t,e,n){if(!F(n))return!1;var r="undefined"==typeof e?"undefined":rr(e);return!!("number"==r?Rt(n)&&St(e,n.length):"string"==r&&e in n)&&I(n[e],t)}function Ae(t){return oe(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&xe(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Oe(){}function Ie(t){return"number"==typeof t&&isFinite(t)}function Ce(t){return"string"==typeof t}function Pe(t){return"function"==typeof t}function Ee(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":rr(t))}function Re(t){return Array.isArray(t)}function we(t){return null!==t&&t!==pl}function je(t,e,n,r){if(t){for(var i=e.length-1;i>=0;i--){var o=e.slice(0,i+1).join(".");if(o&&(o+="."),o+=n,il(t,o))return rl(t,o)}for(var a=0;a<e.length;a++){var s=e.slice(a+1).join(".");if(s&&(s+="."),s+=n,il(t,s))return rl(t,s)}}return r}function Te(t){return t instanceof vl?t.value:t}function ze(t){var e=null;if(Array.isArray(t)){for(var n=-1,r=t.length-1;r>=0;r--){var i=t[r];if(i instanceof _l){n=r;break}}e=n!==-1?t.slice(n):t;for(var o=0;o<e.length;o++)e[o]=Te(e[o])}else e=Te(t);return e}function De(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=el.apply(void 0,[{}].concat(e));for(var i in r)r.hasOwnProperty(i)&&(r[i]=ze(r[i]));return r}function Le(t){var e=+t;if(!Ie(e))throw new hl("Cannot get chart clipPath ID. The chart ID must be numeric.");return xl+e}function Fe(t,e){return t&&t.id||e}function Be(){for(var t=[],e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i],a=!0,s=!1,u=void 0;try{for(var l,c=jr[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var p=l.value;t.push(o+":"+p)}}catch(t){s=!0,u=t}finally{try{!a&&c.return&&c.return()}finally{if(s)throw u}}}return t}function Me(t){t&&t.domain&&t.domain([])}function Ue(t){return cl(sl(t))}function Ne(t){return[0,t[1]]}function He(t){var e=t[0],n=t[1];if(e>=0)return[0,n];if(e<0&&n<0)return[e,0];var r=Math.abs(e),i=Math.abs(n),o=i>r?i:r;return[-o,o]}function We(t){return function(){return[0,t]}}function Ye(t,e){return null==e&&(e=t),function(n){return[n[0]-t,n[1]+e]}}function Ve(t){return function(e){var n=Math.abs(e[1]-e[0])*t;return[e[0]-n,e[1]+n]}}function Ge(t,e){var n=[];for(var r in t)t.hasOwnProperty(r)&&r!==e&&n.push(t[r]);return n}function Xe(t,e,n){var r=this.tryInvoke(this.opts.arrangement.columnIndex,t,e,n),i=this.tryInvoke(this.opts.arrangement.rowIndex,t,e,n),o=this.getScaledProp("x",r),a=this.getScaledProp("y",i);return"translate("+o+", "+a+")"}function Ke(t,e,n){var r=this.tryInvoke(this.opts.arrangement.columnIndex,t,e,n),i=this.tryInvoke(this.opts.arrangement.rowIndex,t,e,n),o=this.getScaledProp("x",r),a=this.getScaledProp("y",i),s=this.opts.iconSvgWidth/2,u=this.opts.iconSvgHeight/2;return"translate("+(o-s)+", "+(a-u)+")"}function Ze(t,e){var n=(t-e)/Pc;return Number.isInteger(n)}function $e(t,e){var n=e-Cc;return[Math.cos(n)*t,Math.sin(n)*t]}function qe(t){return t*(Ic/180)}function Je(t){return t*(180/Ic)}function Qe(t,e){return(t+e)/2}function tn(t){return Qe(t.startAngle,t.endAngle)}function en(t,e,n){var r=d3.interpolate(e,n);return function(e){return t(r(e))}}function nn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t||(t={angle:0,radius:n,rotate:0});var r=d3.interpolateObject(t,e);return function(t){var e=r(t),n=$e(e.radius,e.angle),i=e.rotate||0;return"translate("+n+") rotate("+i+")"}}function rn(){return wc.CENTROID}function on(){return wc.INNER}function an(){return wc.OUTER}function sn(t){return{css:Rc+"inner "+Rc+"inner-x"+t,radius:function(e,n){var r=this.chart||this,i=this.tryInvoke(this.option("innerRadius"),e,n);return function(e,n,o){var a=r.tryInvoke(i,e,n,o);return a*t}}}}function un(t){return{css:Rc+"inner "+Rc+"inner-"+t,radius:function(e,n){var r=this.chart||this,i=this.tryInvoke(this.option("innerRadius"),e,n);return function(e,n,o){var a=r.tryInvoke(i,e,n,o);return a+t}}}}function ln(t){return{css:Rc+"outer "+Rc+"outer-x"+t,radius:function(e,n){var r=this.chart||this,i=this.tryInvoke(this.option("outerRadius"),e,n);return function(e,n,o){var a=r.tryInvoke(i,e,n,o);return a*t}}}}function cn(t){return{css:Rc+"outer "+Rc+"outer-"+t,radius:function(e,n){var r=this.chart||this,i=this.tryInvoke(this.option("outerRadius"),e,n);return function(e,n,o){var a=r.tryInvoke(i,e,n,o);return a+t}}}}function pn(t){return Ie(+t)?{startAngle:t,endAngle:t}:t}function hn(t){return t}function dn(t){var e=Math.abs(t);return e>Cc&&e<=3*Cc&&(t-=Ic),t}function fn(t){return t-Cc}function yn(t){return t-Cc-Ic}function vn(t){return t<=0&&t>=-Ic||t>Ic?t+Cc:t>0&&t<=Ic||t<-Ic?t-Cc:t}function _n(){return 0}function gn(t){return hn(tn(pn(t)))}function bn(t){return dn(tn(pn(t)))}function mn(t){return fn(tn(pn(t)))}function kn(t){return yn(tn(pn(t)))}function Sn(t){return vn(tn(pn(t)))}function xn(){return _n()}function An(t){return hn(pn(t).endAngle)}function On(t){return dn(pn(t).endAngle)}function In(t){return fn(pn(t).endAngle)}function Cn(t){return yn(pn(t).endAngle)}function Pn(t){return vn(pn(t).endAngle)}function En(){return _n()}function Rn(t,e){var n=t/2,r=e/2;return n<r?n:r}function wn(t){we(t)||(t="");var e=/(.*?\(.*?\))/,n=t.split(e).filter(function(t){return!!t}),r={},i=/(.*?)\((.*?)\)\s*/;return n.forEach(function(t){var e=i.exec(t.trim());if(e)for(var n=1;n<e.length;n+=2){var o=e[n],a=e[n+1].trim();(a.indexOf(" ")>-1||a.indexOf(",")>-1)&&(a=a.split(/,\s*|\s+/)),r[o]=a}}),r}function jn(t){var e="";for(var n in t)if(t.hasOwnProperty(n)){var r=Re(t[n])?t[n].join(", "):t[n];e+=n+"("+r+")"}return e}function Tn(t,e){var n=t.node(),r=n.getAttribute("class"),i=r.trim().split(/^|\s+/),o=void 0;if("string"==typeof e)o=new RegExp(e);else{if(!(e instanceof RegExp))throw hl.InvalidArgumentType("removeClassByPattern","pattern","String or RegExp",e);o=e}i.forEach(function(e){o.test(e)&&t.classed(e,!1)})}function zn(){return function(t,e){var n=t,r=e/2,i="-"+r+" 0",o="0 -"+n,a=r+" 0",s=[r+" "+r,0,0,1,"-"+r+" 0"].join(","),u=["M",i,o,a,"A",s,"Z"].join(" ");return u}}function Dn(){return function(t,e){var n=t,r=e/2,i="-"+r+" 0",o="0 -"+n,a=r+" 0",s=["M",i,o,a,"Z"].join(" ");return s}}function Ln(t){var e=De(t,Mc);return function(t,n){var r=t,i=e.smallNeedleHeight||t*e.smallNeedleRatio,o=n/2,a="-"+o+" 0",s="0 -"+r,u=o+" 0",l="0 "+i,c=["M",a,s,u,l,"Z"].join(" ");return c}}function Fn(t){var e=De(t,Mc);return function(t,n){var r=t,i=e.smallNeedleHeight||t*e.smallNeedleRatio,o=n/2;return"M -"+o+" 0  -"+o+" -"+r+"  "+o+" -"+r+"  "+o+" 0 "+o+" "+i+" -"+o+" "+i+" Z"}}function Bn(t,e,n,r){for(var i=null,o=0;o<t.length;o++)if(t[o]&&t[o][e]===n){i=t[o][r];break}return i}function Mn(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}function Un(t,e,n){t.each(function(){for(var t=d3.select(this),r=t.text().split(/\s+/).reverse(),i=t.attr("y"),o=parseFloat(t.attr("dy")),a=[],s=t.text(null).append("tspan").attr("x",0).attr("y",i).attr("dy",o+"em"),u=0,l=r.pop();l;)a.push(l),s.text(a.join(" ")),s.node().getComputedTextLength()>e&&(a.pop(),s.text(a.join(" ")),a=[l],++u,s=t.append("tspan").attr("x",0).attr("y",i).attr("dy",u*n+o+"em").text(l)),l=r.pop()})}function Nn(t){var e=window.getComputedStyle(t,null);return parseFloat(e.getPropertyValue("font-size"),10)}function Hn(t,e){return(t+e)/2}function Wn(t){return t.tickSize(0),t}function Yn(t){return t.tickFormat(d3.format(",.0f")),t}function Vn(t){var e=De(t,Bh);return function(t){var n=this.tryInvoke(e.x),r=this.tryInvoke(e.y),i=this.tryInvoke(e.rotate),o=this.tryInvoke(e.textAnchor);t.attr("transform","translate("+n+", "+r+"), rotate("+i+")").style("text-anchor",o)}}function Gn(t){t.attr("transform","translate(0, 30)").style("text-anchor","start")}function Xn(t){var e=this.width||0;t.attr("transform","translate("+e/2+", 30)").style("text-anchor","middle")}function Kn(t){var e=this.width||0;t.attr("transform","translate("+e+", 30)").style("text-anchor","end")}function Zn(t){var e=De(t,Mh);return function(t){var n=this.tryInvoke(e.x,this.width,this.height),r=this.tryInvoke(e.y,this.width,this.height),i=this.tryInvoke(e.rotate),o=this.tryInvoke(e.textAnchor);t.attr("transform","translate("+n+", "+r+"), rotate("+i+")").style("text-anchor",o)}}function $n(t){var e=this.height||0;t.attr("transform","translate(-30, "+e+"), rotate(-90)").style("text-anchor","start")}function qn(t){var e=this.height||0;t.attr("transform","translate(-30, "+e/2+"), rotate(-90)").style("text-anchor","middle")}function Jn(t){t.attr("transform","translate(-30, 0), rotate(-90)").style("text-anchor","end")}function Qn(t,e){var n=parseFloat(t.getPropertyValue(e),10);return isNaN(n)?0:n}function tr(t){var e=window.getComputedStyle(t,null);return{rect:t.getBoundingClientRect(),style:e,pl:Qn(e,"padding-left"),pr:Qn(e,"padding-right"),pt:Qn(e,"padding-top"),pb:Qn(e,"padding-bottom")}}var er,nr="0.0.0-alpha27",rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},ir=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},or=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),ar=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},sr=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},ur=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},lr=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},cr=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},pr="click",hr="touchstart",dr="touchend",fr="mouseover",yr="mouseout",vr="suppressedError",_r="extension",gr="beforeRender",br="rendered",mr="beforeUpdate",kr="updated",Sr="beforeBoundsUpdate",xr="updatedBounds",Ar="beforeClear",Or="cleared",Ir="beforeDestroy",Cr="destroyed",Pr="beforeOptionChange",Er="optionChanged",Rr="beforeStyleDomainsReset",wr="styleDomainsReset",jr=[pr,hr,dr,fr,yr],Tr=[hr,fr],zr=[dr,yr],Dr=[vr,_r],Lr=[gr,br,mr,kr,Sr,xr,Ar,Or,Rr,wr,Pr,Er,Ir,Cr],Fr=[mr,kr,Ar,Or,Pr,Er,Ir,Cr],Br="add",Mr="remove",Ur="over",Nr="touch",Hr=(er={},ar(er,fr,{action:Br,css:Ur}),ar(er,yr,{action:Mr,css:Ur}),ar(er,hr,{action:Br,css:Nr}),ar(er,dr,{action:Mr,css:Nr}),er),Wr=.5,Yr=250,Vr=0,Gr=d3.easeCubic,Xr="enter",Kr="update",Zr="exit",$r={ENTER:Xr,UPDATE:Kr,EXIT:Zr},qr=6,Jr=Object.freeze({AXIS_SHIFT:Wr,TRANSITION_DURATION_MS:Yr,TRANSITION_DELAY_MS:Vr,TRANSITION_EASE:Gr,ENTER:Xr,UPDATE:Kr,EXIT:Zr,UPDATE_PATTERN:$r,BRUSH_HANDLE_SIZE:qr}),Qr="\\ud800-\\udfff",ti="\\u0300-\\u036f",ei="\\ufe20-\\ufe2f",ni="\\u20d0-\\u20ff",ri=ti+ei+ni,ii="\\ufe0e\\ufe0f",oi="\\u200d",ai=RegExp("["+oi+Qr+ri+ii+"]"),si="\\ud800-\\udfff",ui="\\u0300-\\u036f",li="\\ufe20-\\ufe2f",ci="\\u20d0-\\u20ff",pi=ui+li+ci,hi="\\ufe0e\\ufe0f",di="["+si+"]",fi="["+pi+"]",yi="\\ud83c[\\udffb-\\udfff]",vi="(?:"+fi+"|"+yi+")",_i="[^"+si+"]",gi="(?:\\ud83c[\\udde6-\\uddff]){2}",bi="[\\ud800-\\udbff][\\udc00-\\udfff]",mi="\\u200d",ki=vi+"?",Si="["+hi+"]?",xi="(?:"+mi+"(?:"+[_i,gi,bi].join("|")+")"+Si+ki+")*",Ai=Si+ki+xi,Oi="(?:"+[_i+fi+"?",fi,gi,bi,di].join("|")+")",Ii=RegExp(yi+"(?="+yi+")|"+Oi+Ai,"g"),Ci="object"==("undefined"==typeof global?"undefined":rr(global))&&global&&global.Object===Object&&global,Pi="object"==("undefined"==typeof self?"undefined":rr(self))&&self&&self.Object===Object&&self,Ei=Ci||Pi||Function("return this")(),Ri=Ei.Symbol,wi=Array.isArray,ji=Object.prototype,Ti=ji.hasOwnProperty,zi=ji.toString,Di=Ri?Ri.toStringTag:void 0,Li=Object.prototype,Fi=Li.toString,Bi="[object Null]",Mi="[object Undefined]",Ui=Ri?Ri.toStringTag:void 0,Ni="[object Symbol]",Hi=1/0,Wi=Ri?Ri.prototype:void 0,Yi=Wi?Wi.toString:void 0,Vi=y("toUpperCase"),Gi={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Xi=_(Gi),Ki=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zi="\\u0300-\\u036f",$i="\\ufe20-\\ufe2f",qi="\\u20d0-\\u20ff",Ji=Zi+$i+qi,Qi="["+Ji+"]",to=RegExp(Qi,"g"),eo=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,no=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ro="\\ud800-\\udfff",io="\\u0300-\\u036f",oo="\\ufe20-\\ufe2f",ao="\\u20d0-\\u20ff",so=io+oo+ao,uo="\\u2700-\\u27bf",lo="a-z\\xdf-\\xf6\\xf8-\\xff",co="\\xac\\xb1\\xd7\\xf7",po="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ho="\\u2000-\\u206f",fo=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",yo="A-Z\\xc0-\\xd6\\xd8-\\xde",vo="\\ufe0e\\ufe0f",_o=co+po+ho+fo,go="['’]",bo="["+_o+"]",mo="["+so+"]",ko="\\d+",So="["+uo+"]",xo="["+lo+"]",Ao="[^"+ro+_o+ko+uo+lo+yo+"]",Oo="\\ud83c[\\udffb-\\udfff]",Io="(?:"+mo+"|"+Oo+")",Co="[^"+ro+"]",Po="(?:\\ud83c[\\udde6-\\uddff]){2}",Eo="[\\ud800-\\udbff][\\udc00-\\udfff]",Ro="["+yo+"]",wo="\\u200d",jo="(?:"+xo+"|"+Ao+")",To="(?:"+Ro+"|"+Ao+")",zo="(?:"+go+"(?:d|ll|m|re|s|t|ve))?",Do="(?:"+go+"(?:D|LL|M|RE|S|T|VE))?",Lo=Io+"?",Fo="["+vo+"]?",Bo="(?:"+wo+"(?:"+[Co,Po,Eo].join("|")+")"+Fo+Lo+")*",Mo="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Uo="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",No=Fo+Lo+Bo,Ho="(?:"+[So,Po,Eo].join("|")+")"+No,Wo=RegExp([Ro+"?"+xo+"+"+zo+"(?="+[bo,Ro,"$"].join("|")+")",To+"+"+Do+"(?="+[bo,Ro+jo,"$"].join("|")+")",Ro+"?"+jo+"+"+zo,Ro+"+"+Do,Uo,Mo,ko,Ho].join("|"),"g"),Yo="['’]",Vo=RegExp(Yo,"g"),Go=x(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Xo=x(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ko=x(function(t,e,n){return e=e.toLowerCase(),t+(n?A(e):e)}),Zo=Array.prototype,$o=Zo.splice;j.prototype.clear=O,j.prototype.delete=P,j.prototype.get=E,j.prototype.has=R,j.prototype.set=w;var qo="[object AsyncFunction]",Jo="[object Function]",Qo="[object GeneratorFunction]",ta="[object Proxy]",ea=Ei["__core-js_shared__"],na=function(){var t=/[^.]+$/.exec(ea&&ea.keys&&ea.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ra=Function.prototype,ia=ra.toString,oa=/[\\^$.*+?()[\]{}|]/g,aa=/^\[object .+?Constructor\]$/,sa=Function.prototype,ua=Object.prototype,la=sa.toString,ca=ua.hasOwnProperty,pa=RegExp("^"+la.call(ca).replace(oa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ha=W(Ei,"Map"),da=W(Object,"create"),fa="__lodash_hash_undefined__",ya=Object.prototype,va=ya.hasOwnProperty,_a=Object.prototype,ga=_a.hasOwnProperty,ba="__lodash_hash_undefined__";Z.prototype.clear=Y,Z.prototype.delete=V,Z.prototype.get=G,Z.prototype.has=X,Z.prototype.set=K,rt.prototype.clear=$,rt.prototype.delete=Q,rt.prototype.get=tt,rt.prototype.has=et,rt.prototype.set=nt;var ma=200;ot.prototype.clear=T,ot.prototype.delete=z,ot.prototype.get=D,ot.prototype.has=L,ot.prototype.set=it;var ka="__lodash_hash_undefined__";ut.prototype.add=ut.prototype.push=at,ut.prototype.has=st;var Sa=1,xa=2,Aa=Ei.Uint8Array,Oa=1,Ia=2,Ca="[object Boolean]",Pa="[object Date]",Ea="[object Error]",Ra="[object Map]",wa="[object Number]",ja="[object RegExp]",Ta="[object Set]",za="[object String]",Da="[object Symbol]",La="[object ArrayBuffer]",Fa="[object DataView]",Ba=Ri?Ri.prototype:void 0,Ma=Ba?Ba.valueOf:void 0,Ua=Object.prototype,Na=Ua.propertyIsEnumerable,Ha=Object.getOwnPropertySymbols,Wa=Ha?function(t){return null==t?[]:(t=Object(t),_t(Ha(t),function(e){return Na.call(t,e)}))}:gt,Ya="[object Arguments]",Va=Object.prototype,Ga=Va.hasOwnProperty,Xa=Va.propertyIsEnumerable,Ka=mt(function(){return arguments}())?mt:function(t){return p(t)&&Ga.call(t,"callee")&&!Xa.call(t,"callee")},Za="object"==("undefined"==typeof t?"undefined":rr(t))&&t&&!t.nodeType&&t,$a=Za&&"object"==("undefined"==typeof module?"undefined":rr(module))&&module&&!module.nodeType&&module,qa=$a&&$a.exports===Za,Ja=qa?Ei.Buffer:void 0,Qa=Ja?Ja.isBuffer:void 0,ts=Qa||kt,es=9007199254740991,ns=/^(?:0|[1-9]\d*)$/,rs=9007199254740991,is="[object Arguments]",os="[object Array]",as="[object Boolean]",ss="[object Date]",us="[object Error]",ls="[object Function]",cs="[object Map]",ps="[object Number]",hs="[object Object]",ds="[object RegExp]",fs="[object Set]",ys="[object String]",vs="[object WeakMap]",_s="[object ArrayBuffer]",gs="[object DataView]",bs="[object Float32Array]",ms="[object Float64Array]",ks="[object Int8Array]",Ss="[object Int16Array]",xs="[object Int32Array]",As="[object Uint8Array]",Os="[object Uint8ClampedArray]",Is="[object Uint16Array]",Cs="[object Uint32Array]",Ps={};Ps[bs]=Ps[ms]=Ps[ks]=Ps[Ss]=Ps[xs]=Ps[As]=Ps[Os]=Ps[Is]=Ps[Cs]=!0,
Ps[is]=Ps[os]=Ps[_s]=Ps[as]=Ps[gs]=Ps[ss]=Ps[us]=Ps[ls]=Ps[cs]=Ps[ps]=Ps[hs]=Ps[ds]=Ps[fs]=Ps[ys]=Ps[vs]=!1;var Es="object"==("undefined"==typeof t?"undefined":rr(t))&&t&&!t.nodeType&&t,Rs=Es&&"object"==("undefined"==typeof module?"undefined":rr(module))&&module&&!module.nodeType&&module,ws=Rs&&Rs.exports===Es,js=ws&&Ci.process,Ts=function(){try{return js&&js.binding&&js.binding("util")}catch(t){}}(),zs=Ts&&Ts.isTypedArray,Ds=zs?Ot(zs):At,Ls=Object.prototype,Fs=Ls.hasOwnProperty,Bs=Object.prototype,Ms=Pt(Object.keys,Object),Us=Object.prototype,Ns=Us.hasOwnProperty,Hs=1,Ws=Object.prototype,Ys=Ws.hasOwnProperty,Vs=W(Ei,"DataView"),Gs=W(Ei,"Promise"),Xs=W(Ei,"Set"),Ks=W(Ei,"WeakMap"),Zs="[object Map]",$s="[object Object]",qs="[object Promise]",Js="[object Set]",Qs="[object WeakMap]",tu="[object DataView]",eu=U(Vs),nu=U(ha),ru=U(Gs),iu=U(Xs),ou=U(Ks),au=c;(Vs&&au(new Vs(new ArrayBuffer(1)))!=tu||ha&&au(new ha)!=Zs||Gs&&au(Gs.resolve())!=qs||Xs&&au(new Xs)!=Js||Ks&&au(new Ks)!=Qs)&&(au=function(t){var e=c(t),n=e==$s?t.constructor:void 0,r=n?U(n):"";if(r)switch(r){case eu:return tu;case nu:return Zs;case ru:return qs;case iu:return Js;case ou:return Qs}return e});var su=au,uu=1,lu="[object Arguments]",cu="[object Array]",pu="[object Object]",hu=Object.prototype,du=hu.hasOwnProperty,fu=Ri?Ri.isConcatSpreadable:void 0,yu=1/0,vu=Object.prototype,_u=vu.hasOwnProperty,gu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bu=/^\w*$/,mu="Expected a function";Ht.Cache=rt;var ku=500,Su=/^\./,xu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Au=/\\(\\)?/g,Ou=Wt(function(t){var e=[];return Su.test(t)&&e.push(""),t.replace(xu,function(t,n,r,i){e.push(r?i.replace(Au,"$1"):n||t)}),e}),Iu=1/0,Cu=function(){try{var t=W(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Pu=Object.prototype,Eu=Pu.hasOwnProperty,Ru=Math.max,wu=Cu?function(t,e){return Cu(t,"toString",{configurable:!0,enumerable:!1,value:re(e),writable:!0})}:ee,ju=800,Tu=16,zu=Date.now,Du=ie(wu),Lu=se(),Fu="object"==("undefined"==typeof t?"undefined":rr(t))&&t&&!t.nodeType&&t,Bu=Fu&&"object"==("undefined"==typeof module?"undefined":rr(module))&&module&&!module.nodeType&&module,Mu=Bu&&Bu.exports===Fu,Uu=Mu?Ei.Buffer:void 0,Nu=Uu?Uu.allocUnsafe:void 0,Hu=Object.create,Wu=function(){function t(){}return function(e){if(!F(e))return{};if(Hu)return Hu(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Yu=Pt(Object.getPrototypeOf,Object),Vu="[object Object]",Gu=Function.prototype,Xu=Object.prototype,Ku=Gu.toString,Zu=Xu.hasOwnProperty,$u=Ku.call(Object),qu=Object.prototype,Ju=qu.hasOwnProperty,Qu=Ae(function(t,e,n,r){ke(t,e,n,r)}),tl=oe(function(t){return t.push(void 0,Se),te(Qu,void 0,t)}),el=tl,nl=Qt,rl=Zt,il=Xt,ol=Mt,al=Lt,sl=Ko,ul=Xo,ll=Go,cl=Vi,pl=void 0,hl=function(t){function e(t){ir(this,e);for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=[t].concat(r).join(" "),a=lr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,o));return a.name=a.constructor.name,a.message=o,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(a,a.constructor):a.stack=new Error(t).stack,a}return ur(e,t),or(e,null,[{key:"UnimplementedMethod",value:function(t,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chart",i=arguments.length,o=Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return new(Function.prototype.bind.apply(e,[null].concat([t+" (`"+n+"`) needs to be defined in order for the "+r+" to be useful."],o)))}},{key:"InvalidArgumentType",value:function(t,n,r,i){for(var o=arguments.length,a=Array(o>4?o-4:0),s=4;s<o;s++)a[s-4]=arguments[s];return new(Function.prototype.bind.apply(e,[null].concat(["Method ("+t+') argument "'+n+'" of unexpected type. Expected '+r+", but was given "+i+"."],a)))}}]),e}(Error),dl=function(){function t(e,n){var r=this;ir(this,t),this._instances=[];for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];this._methodsToProxy=n.concat(ol.apply(void 0,o)),this._methodsToProxy.forEach(function(t){return r.addProxyMethod(t)}),e.forEach(function(t){return r.addInstance(t)})}return or(t,[{key:"addProxyMethod",value:function(t){this[t]=this.invokeProxyMethod.bind(this,t)}},{key:"removeProxyMethod",value:function(t){var e=this._methodsToProxy.indexOf(t);e>-1&&this._methodsToProxy.splice(e,1)}},{key:"addInstance",value:function(t){t&&this._instances.push(t)}},{key:"removeChart",value:function(t){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1)}},{key:"invokeProxyMethod",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._instances.forEach(function(e){if(!(e&&e[t]&&Pe(e[t])))throw new hl("Cannot invoke "+t+" on "+e);e[t].apply(e,n)}),this}},{key:"getProxiedMethods",value:function(){return this._methodsToProxy}},{key:"destroy",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._instances.forEach(function(t){t&&t.destroy&&Pe(t.destroy)&&t.destroy.apply(t,e)}),this._instances.length=0}}]),t}(),fl=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,null,[{key:"RequiredOption",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new(Function.prototype.bind.apply(e,[null].concat(['Option "'+t+'" is required.'],r)))}},{key:"InvalidEnumOption",value:function(t,n){for(var r=arguments.length,i=Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return new(Function.prototype.bind.apply(e,[null].concat(['Option "'+t+'" must be set to a valid option. The value "'+n+'" is not valid.'],i)))}},{key:"OptionMustBeFunction",value:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new(Function.prototype.bind.apply(e,[null].concat(['Option "'+t+'" must be a function.'],r)))}}]),e}(hl),yl=void 0,vl=function t(e){ir(this,t),this.value=e},_l=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),e}(vl),gl={FPS_30:33,FPS_20:50,FPS_15:66,FPS_10:100,FPS_05:200},bl={timeoutDelayMs:gl.FPS_15,target:window,eventName:"resize",documentLoadRun:!0},ml=function(){function t(e){var n=this;if(ir(this,t),this.opts=De(e,bl),this.callbacks=[],this.running=!1,this.pendingFrame=null,this.pendingTimeout=null,this.listenerAttached=!1,this.documentReady=null,!this.opts.eventName)throw new t.EventWatcherException("An event name must be given!");this.opts.documentLoadRun&&!function(){var t=n,e=function e(){setTimeout(function(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t.documentReady=!0,t.runCallbacks()},0)};n.documentReady=!1,document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e),"complete"===document.readyState&&e()}()}return or(t,[{key:"_fired",value:function(){if(!this.running){this.running=!0;var t=this._runCallbacks.bind(this);window.requestAnimationFrame?this.pendingFrame=window.requestAnimationFrame(t):this.pendingTimeout=setTimeout(t,this.opts.timeoutDelayMs)}}},{key:"_runCallbacks",value:function(){this.pendingFrame=this.pendingTimeout=null,this.runCallbacks(),this.running=!1}},{key:"runCallbacks",value:function(){this.callbacks.forEach(function(t){return t()})}},{key:"add",value:function(t){this.listenerAttached||(this.opts.target.addEventListener(this.opts.eventName,this._fired.bind(this)),this.listenerAttached=!0),t&&this.callbacks.push(t)}},{key:"remove",value:function(t){if(this.callbacks.length){var e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}return this}},{key:"destroy",value:function(){this.pendingFrame?window.cancelAnimationFrame(this.pendingFrame):this.pendingTimeout&&clearTimeout(this.pendingTimeout),this.listenerAttached&&this.opts.target.removeEventListener(this.opts.eventName,this._fired.bind(this))}},{key:"timeoutDelay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.opts.timeoutDelayMs:(this.opts.timeoutDelayMs=t,this)}}]),t}(),kl=function(){function t(){ir(this,t),this._developerMode=!1,this._developerModeEvents=null,this._resizeWatch=new ml,this.extensionId=0,this.chartId=0}return or(t,[{key:"getNextChartId",value:function(){return this.chartId++}},{key:"getNextExtensionId",value:function(){return this.extensionId++}},{key:"getResizeWatcher",value:function(){return this._resizeWatch}},{key:"isDeveloperMode",value:function(){return this._developerMode}},{key:"setDeveloperModeEvents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._developerModeEvents=ol(e),this._developerMode=!0}},{key:"getDeveloperModeEvents",value:function(){return this._developerModeEvents}},{key:"clearDeveloperModeEvents",value:function(){this._developerModeEvents=null}},{key:"clearDeveloperMode",value:function(){this._developerMode=!1}},{key:"enableDeveloperMode",value:function(){this._developerMode=!0}}]),t}(),Sl=new kl;window&&(window.MonteGlobal=Sl);var xl="drawPath",Al={css:"",boundingWidth:250,boundingHeight:250,margin:{top:0,right:0,bottom:0,left:0},customEvents:[],extensions:[],transition:{duration:Yr,ease:Gr,delay:Vr},resize:null,dataKey:Fe,autoResetStyleDomains:!0,directUse:!1,developerOptions:{scales:!1,transitions:!1,listeners:!1}},Ol=function(){function t(e,n,r){ir(this,t),this._constructed=!1,this._optsSet=!1,this.hasRendered=!1,this.layers=[],this.extensions=[],this._optionReaderCache={},this.__chartId=Sl.getNextChartId(),this.parentSelector=e,this._initOptions(n),this._initPublicEvents.apply(this,cr(jr).concat(cr(Dr),cr(Lr),cr(this.opts.customEvents))),(this.opts.developerMode||Sl.isDeveloperMode())&&this._initDeveloperMode(),this._initCore(),this._initCustomize(),this._boundsUpdate(),this._bindExt(this.tryInvoke(this.opts.extensions)),this._initRender(),this._constructed=!0,this._resizeHandler&&Sl.getResizeWatcher().documentReady&&this._resizeHandler(),r&&this.data(r)}return or(t,[{key:"getChartId",value:function(){return this.__chartId}},{key:"_getChartAttr",value:function(){return"monte-chart-"+this.getChartId()}},{key:"_initOptions",value:function(){this.opts={};for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=De.apply(void 0,e.concat([Al]));for(var i in r)r.hasOwnProperty(i)&&this.option(i,r[i]);this._optsSet=!0}},{key:"_initCore",value:function(){var t=this,e=d3.select(this.parentSelector);if(null===e.node())throw new hl('Invalid selector. "'+this.parentSelector+'" did not match any element."');"svg"===e.node().tagName.toLowerCase()?this.bound=e:this.bound=e.append("svg"),this.bound.attr(this._getChartAttr(),""),this.bound.node().monteChart=this,this.bound.attr("class",this._buildCss(["monte-chart",this.opts.css,this.opts.chartCss])),this.defs=this.bound.append("defs"),this.clip=this.defs.append("clipPath").attr("id",Le(this.getChartId())),this.clipRect=this.clip.append("rect").attr("x",0).attr("y",0),this._initLayers();var n=this;jr.forEach(function(e){t.bound.on(e,function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];n.__notify.apply(n,[e,this].concat(r))})});var r=this.tryInvoke(this.opts.resize);r&&(this._resizeHandler=r.resize.bind(r,this),Sl.getResizeWatcher().add(this._resizeHandler))}},{key:"_initLayers",value:function(){this.addLayer("bg"),this.addLayer("support"),this.addLayer("selection"),this.addLayer("draw"),this.addLayer("overlay")}},{key:"_initPublicEvents",value:function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];this._events=n,this.dispatch=(t=d3).dispatch.apply(t,n)}},{key:"_initDeveloperMode",value:function(){var t=this,e=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o="(no arguments)";r&&r.length>0&&(o="\n",r.forEach(function(t,e){if(we(t)){var n=Pe(t)?"func: '"+(t.name||"anonymous")+"'":t;o+="\t"+e+": "+n+"\n"}})),console.log("["+t+'] "'+e+'": '+o)};this.developerMode=!0;var n=Re(this.opts.developerMode)||Sl.getDeveloperModeEvents()?this.opts.developerMode||Sl.getDeveloperModeEvents():this._events;n.forEach(function(n){t.opts.developerOptions.listeners&&console.log("["+t+'] Adding listener for "'+n+'"'),t.on(n+".developerMode",e.bind(t,n))})}},{key:"_initCustomize",value:function(){}},{key:"_initRender",value:function(){}},{key:"_boundsUpdate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.__notify(Sr),this.margin=this.opts.margin,this.width=this.opts.boundingWidth-this.margin.left-this.margin.right,this.height=this.opts.boundingHeight-this.margin.top-this.margin.bottom,this.layers.forEach(function(e){return e.attr("transform",t._getLayerTranslate())}),this.bound&&this.bound.attr("width",this.opts.boundingWidthAttr||this.opts.boundingWidth).attr("height",this.opts.boundingHeightAttr||this.opts.boundingHeight),this.clipRect&&this.clipRect.attr("width",this.width).attr("height",this.height);var r=function(){t._constructed&&t.__notify(xr)},i=function(){t.hasRendered&&t.update()};return e||r(),n||i(),{notify:r,update:i}}},{key:"checkSize",value:function(){return this._resizeHandler&&this._resizeHandler(),this}},{key:"destroy",value:function(){this.__notify(Ir),this._resizeHandler&&Sl.getResizeWatcher().remove(this._resizeHandler),this._destroy(),this.bound.node()===d3.select(this.parentSelector).node()?this.bound.node().innerHTML="":this.bound.remove(),this.__notify(Cr)}},{key:"_destroy",value:function(){}},{key:"addLayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"g",n=this.bound.append(e).attr("class","monte-"+t);return this[t]=n,this.layers.push(n),this}},{key:"layerUseClipPath",value:function(t,e){return we(e)||(e=Le(this.getChartId())),this[t].attr("clip-path","url(#"+e+")"),this}},{key:"_getLayerTranslate",value:function(){return"translate("+this.margin.left+", "+this.margin.top+")"}},{key:"boundingRect",value:function(t,e){if(0===arguments.length)return[this.opts.boundingWidth,this.opts.boundingHeight];var n=this.option("margin.left")+this.option("margin.right");if(t<n&&(t=n),this.opts.boundingWidth=t,2===arguments.length){var r=this.option("margin.top")+this.option("margin.bottom");e<r&&(e=r),this.opts.boundingHeight=e}return this._boundsUpdate(),this.update(),this}},{key:"on",value:function(t,e){return arguments.length<2?this.dispatch.on(t):(this.dispatch.on(t,e),this)}},{key:"onExt",value:function(t,e){if(arguments.length<2)return this.on(t);var n="extension."+t;return null===e?this.on(n,null):this.on(n,function(n){if(0===n.indexOf(t)){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];e.call.apply(e,[this,n].concat(i))}}),this}},{key:"emit",value:function(t){if(t){if(!this.dispatch._[t]){var e="Unknown event "+t+". Double check the spelling or register the event. Custom events must registered at chart creation.";throw new hl(e)}for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.__notify.apply(this,[t].concat(r)),this}}},{key:"option",value:function(t,e){var n=rl(this.opts,t);if(e===yl)return n;this._optsSet&&this.__notify(Pr,t),nl(this.opts,t,e);var r=this.__handleMarginOptions(t,e,n);return this._optsSet&&(r&&this._boundsUpdate(),this.__notify(Er,t)),this}},{key:"__handleMarginOptions",value:function(t,e,n){var r=!1;if("margin"===t)if(Ee(e))al(n,e)||(r=!0);else{var i={top:e,left:e,right:e,bottom:e};al(n,i)||(this.opts.margin=i,r=!0)}else/^margin\./.test(t)&&n!==e&&(r=!0);return r}},{key:"optionReaderFunc",value:function(t){var e=this;if(!Ce(t))throw hl.InvalidArgumentType("optionReaderFunc","optionKey","string",t);return this._optionReaderCache[t]||(this._optionReaderCache[t]=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.tryInvoke.apply(e,[e.opts[t]].concat(r))}),this._optionReaderCache[t]}},{key:"tryInvoke",value:function(t){if(null===t)return null;if(t===yl)throw new fl("Value not initialized.");try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Pe(t)?t.call.apply(t,[this].concat(n)):t}catch(t){return console&&console.error&&console.error(t),this.__notify(vr,t),null}}},{key:"fnInvoke",value:function(t){if(null==t||!Pe(t))return null;try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.call.apply(t,[this].concat(n))}catch(t){return this.__notify(vr,t),null}}},{key:"getPropKey",value:function(t){var e=t+"Prop";if(this.opts[e])return this.opts[e];if(this.opts[t]){var n=t.indexOf("Prop");if(n>-1){var r=t.substring(0,n);throw new hl('Property options should be accessed using short names without the "Prop" suffix. Given '+t+", but expected "+r+".")}}return null}},{key:"getProp",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this.getPropKey(t);return r?e[r]:n}},{key:"getScaledProp",value:function(t,e,n){var r=void 0,i=void 0,o=void 0;if(2===arguments.length)i=t,o=e;else{if(3!==arguments.length)throw new hl("Incorrect number of arguments. Expected 2 or 3 recieved "+arguments.length);i=e,o=n}var a=rl(this,t);if(!a)throw new hl('Scale "'+t+'" is not defined.');return a===Oe?yl:Pe(a)?(r=Ee(o)?o[this.opts[i+"Prop"]]:o,a(r)):a}},{key:"clear",value:function(){return this.__notify(Ar),this.displayData=null,this._clearDataElements(),this.opts.autoResetStyleDomains&&this.resetStyleDomains(),this.__notify(Or),this}},{key:"_clearDataElements",value:function(){}},{key:"resetStyleDomains",value:function(){return this.__notify(Rr),this._resetStyleDomains(),this.__notify(wr),this}},{key:"_resetStyleDomains",value:function(){}},{key:"_buildCss",value:function(t,e,n,r){var i=this,o=[],a=Array.isArray(t)?t:[t];return a.forEach(function(t){we(t)&&o.push(i.tryInvoke(t,e,n,r))}),o.join(" ").replace(/\s+/," ")}},{key:"_transitionSetup",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];var a=t._transitionSettings.apply(t,n),s=a.duration,u=a.delay,l=a.ease;t._transitionConfigureDuration.apply(t,[e,s].concat(i)),t._transitionConfigureDelay.apply(t,[e,u].concat(i)),e.ease(l)}}},{key:"_transitionConfigureDuration",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=null;Pe(e)&&r&&r.length&&(o=function(t,n,i){return e.apply(void 0,[t,n,i].concat(r))}),t.duration(o||e)}},{key:"_transitionConfigureDelay",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=null;Pe(e)&&r&&r.length&&(o=function(t,n,i){return e.apply(void 0,[t,n,i].concat(r))}),t.delay(o||e)}},{key:"_transitionConfigure",value:function(t,e,n,r,i){for(var o=e.duration,a=e.delay,s=e.ease,u=arguments.length,l=Array(u>5?u-5:0),c=5;c<u;c++)l[c-5]=arguments[c];t.duration(this.tryInvoke.apply(this,[o,n,r,i].concat(l))).delay(this.tryInvoke.apply(this,[a,n,r,i].concat(l))).ease(s)}},{key:"_transitionSettings",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=this.tryInvoke(this.opts.transition),i=je(r,e,"duration",Yr),o=je(r,e,"delay",Vr),a=je(r,e,"ease",Gr);return this.developerMode&&this.opts.developerOptions.transitions&&(console.log("Transition: "+e.join(".")),console.log({levels:e,duration:i,delay:o,ease:a})),{duration:i,delay:o,ease:a}}},{key:"attr",value:function(t,e){return e===yl?this.bound.attr(t):(this.bound.attr(t,e),this)}},{key:"style",value:function(t,e){return e===yl?this.bound.style(t):(this.bound.style(t,e),this)}},{key:"classed",value:function(){var t;return(t=this.bound).classed.apply(t,arguments),this}},{key:"call",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.call.apply(t,[this].concat(n)),this}},{key:"updateData",value:function(t){return this.data(t,!0),this}},{key:"data",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t===yl?this.displayData:(e||this.clear(),this._data(t),n||this.update(),this)}},{key:"_data",value:function(t){this.displayData=t}},{key:"getRawData",value:function(){return this.rawData?this.rawData:this.displayData}},{key:"addExt",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._bindExt(e),this}},{key:"_bindExt",value:function(t){var e=this;t.forEach(function(t){t.opts.binding?(t.setChart(e),e.extensions.push(t)):e.__notify(vr,"Extensions must have the `binding` option specified.")})}},{key:"__updateExt",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.extensions.forEach(function(e){e.opts.binding.indexOf(t)>-1&&e.fire.apply(e,[t].concat(n))})}},{key:"replaceScale",value:function(t,e){var n=e();return n.range(this[t].range()).domain(this[t].domain()),this[t]=n,this.update(),this}},{key:"update",value:function(){if(this.data())return this.hasRendered||(this.__notify(gr),this._render(),this.hasRendered=!0,this.__notify(br)),this.__notify(mr),this._update(),this.__notify(kr),this}},{key:"_render",value:function(){}},{key:"_update",value:function(){if(!this.opts.directUse)throw hl.UnimplementedMethod("Update","_update")}},{key:"__bindCommonEvents",value:function(t){var e=this;return function(n){jr.forEach(function(r){return n.on(r,function(n,i,o){return e.__elemEvent(r,t+":"+r,n,i,o)})})}}},{key:"__notify",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.__updateExt.apply(this,[t].concat(r)),(e=this.dispatch).call.apply(e,[t,this].concat(r))}},{key:"__elemEvent",value:function(t,e,n,r,i){var o=i[r],a=Hr[t];a&&("add"===a.action?o.classList.add(a.css):"remove"===a.action&&o.classList.remove(a.css)),this.__notify(e,n,r,i)}},{key:"toString",value:function(){return this.constructor.name}}],[{key:"generateScaleAccessor",value:function(t,e){return e?function(n){var r="opts."+t,i=this.getScaledProp(r,e,n);return this.developerMode&&this.opts.developerOptions.scales&&i!==yl&&console.log(r,i),i}:function(e,n){var r=rl(this,"opts."+t)(n);return this.developerMode&&console.log(r),r}}},{key:"createInstanceGroup",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new dl(t,Il,n)}}]),t}(),Il=["addExt","addLayer","boundingRect","call","checkSize","classed","clear","data","emit","layerUseClipPath","on","option","replaceScale","resetStyleDomains","update","updateData"],Cl="beforeAxisRender",Pl="axisRendered",El=[Cl,Pl],Rl={axes:["x","y"],suppressAxes:!1,xProp:"x",xScale:d3.scaleLinear,xAxisCustomize:null,xDomainCustomize:null,xRange:function(t,e){return[0,t]},xAxisConstructor:d3.axisBottom,xAxisTransform:function(t,e){return"translate(0,"+e+")"},xLabel:null,xLabelCustomize:Oe,yProp:"y",yScale:d3.scaleLinear,yAxisCustomize:null,yDomainCustomize:null,yRange:function(t,e){return[e,0]},yAxisConstructor:d3.axisLeft,yAxisTransform:null,yLabel:null,yLabelCustomize:Oe},wl=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"__axisOpt",value:function(t,e){return this.opts[""+t+e]}},{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Rl])),we(this.opts.axes)||(this.opts.axes=[]),this.axes=this.tryInvoke(this.opts.axes)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,El))}},{key:"_initCore",value:function(){var t=this;sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"Range")(t.width,t.height),r=t.__axisOpt(e,"Scale")().range(n);t[e]=r,t[e+"Axis"]=t.__axisOpt(e,"AxisConstructor")(r)})}},{key:"_initCustomize",value:function(){var t=this;this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"AxisCustomize");Re(n)?!function(){var r=t[e+"Axis"];n.forEach(function(e){return e.call(t,r)})}():Pe(n)&&n.call(t,t[e+"Axis"])})}},{key:"_initRender",value:function(){var t=this;this.forEachAxisScale(function(e){t.support.append("g").attr("class",e+"-axis axis")}),this.updateAxesTransforms(),sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initRender",this).call(this)}},{key:"_boundsUpdate",value:function(){var t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_boundsUpdate",this).call(this,!0,!0);this.updateAxesRanges(),this.updateAxesTransforms(),this.renderAxes(),t.notify(),t.update()}},{key:"_data",value:function(t){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t),this.updateAxesDomains(),this.renderAxes()}},{key:"replaceScale",value:function(t,n){return sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceScale",this).call(this,t,n),this[t+"Axis"].scale(this[t]),this.renderAxes(),this}},{key:"updateAxesTransforms",value:function(){var t=this;return this.forEachAxisScale(function(e){var n=t.support.select("."+e+"-axis"),r=t.__axisOpt(e,"AxisTransform");r&&n.attr("transform",t.tryInvoke(r,t.width,t.height))}),this}},{key:"updateAxesRanges",value:function(){var t=this;return this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"Range"),r=n.call(t,t.width,t.height);t[e].range(r)}),this}},{key:"updateAxesDomains",value:function(){var t=this,e=this.data();return this.forEachAxisScale(function(n){var r=t.opts[n+"DomainCustomize"],i=e?t._domainExtent(e,n):[];r&&(i=t.tryInvoke(r,i)),t[n].domain(i)}),this}},{key:"renderAxes",value:function(){var t=this,e=this.tryInvoke(this.opts.suppressAxes);if(e!==!0){var n=Re(e),r=this.hasRendered?Kr:Xr,i=this.bound.transition().call(this._transitionSetup("axis",r));return this.forEachAxisScale(function(r){if(!(n&&e.indexOf(r)>-1)){var o=t[r+"Axis"];t.emit(Cl,r,o),t.support.select("."+r+"-axis").transition(i).call(o).call(t._setLabel.bind(t,r)).call(function(e){return t.emit(Pl,r,o,e)})}}),this}}},{key:"_domainExtent",value:function(t,e){if(this.opts.directUse)return[0,1];throw hl.UnimplementedMethod("Domain Extent","_domainExtent")}},{key:"forEachAxisScale",value:function(t){return this.axes.forEach(t),this}},{key:"_setLabel",value:function(t,e){var n=this,r=this.opts[t+"Label"],i=we(r)?this.tryInvoke(this.opts[t+"Label"]):null,o=null===i?[]:[i],a=this.support.select("."+t+"-axis").selectAll(".monte-axis-label").data(o);a.enter().append("text").merge(a).attr("class","monte-axis-label").text(function(t){return t}).call(function(e){var r=t+"LabelCustomize",i=n.opts[r];if(i){if(!Pe(i))throw fl.OptionMustBeFunction(r,"("+r+" is optional)");n.fnInvoke(i,e)}}),a.exit().remove()}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(jl),(n=sr(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Ol);wl.EVENTS=El;var jl=["forEachAxisScale","renderAxes","replaceScale","updateAxesDomains","updateAxesRanges","updateAxesTransforms"],Tl=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_getLayerTranslate",value:function(){var t=void 0,e=void 0;return this.opts.origin?(t=this.tryInvoke(this.opts.origin.left,this),e=this.tryInvoke(this.opts.origin.top,this)):(t=this.width/2+this.margin.left,e=this.height/2+this.margin.top),"translate("+t+", "+e+")"}}]),e}(Ol),zl="line",Dl="point",Ll={chartCss:"monte-line-chart",margin:{top:10,right:10,bottom:30,left:40},valuesProp:"values",lineProp:"",lineCustomize:null,lineStrokeScale:Oe,lineStrokeScaleAccessor:wl.generateScaleAccessor("lineStrokeScale","lineProp"),lineCssScale:Oe,lineCssScaleAccessor:wl.generateScaleAccessor("lineCssScale","lineProp"),lineCss:"line",includePoints:!1,pointProp:"",pointFillScale:Oe,pointFillScaleAccessor:wl.generateScaleAccessor("pointFillScale","pointProp"),pointStrokeScale:Oe,pointStrokeScaleAccessor:wl.generateScaleAccessor("pointStrokeScale","pointProp"),pointCssScale:Oe,pointCssScaleAccessor:wl.generateScaleAccessor("pointCssScale","pointProp"),pointCss:"point",pointSize:64,pointSymbol:function(t){return t.type(d3.symbolCircle)},pointDataKey:wl.defaultDataKey},Fl=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ll]))}},{key:"_initCore",value:function(){var t=this;sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.line=d3.line().x(function(e){return t.getScaledProp("x",e)}).y(function(e){return t.getScaledProp("y",e)})}},{key:"_initCustomize",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.lineCustomize&&this.opts.lineCustomize(this.line)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,cr(Be(zl)),cr(Be(Dl))))}},{key:"_domainExtent",value:function(t,e){var n=this.opts.valuesProp,r=this.opts[e+"Prop"],i=t.map(function(t){return d3.extent(t[n],function(t){return t[r]})}),o=[d3.min(i,function(t){return t[0]}),d3.max(i,function(t){return t[1]})];return o}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.lineStrokeScale),Me(this.opts.lineCssScale),Me(this.opts.pointFillScale),Me(this.opts.pointStrokeScale),Me(this.opts.pointCssScale)}},{key:"_update",value:function(){var t=this,e=this._updateLines();return this.opts.includePoints&&e.each(function(e,n,r){return t._updateLinePoints(r[n],e,n)}),e}},{key:"_updateLines",value:function(){var t=this.draw.selectAll(".monte-line-grp").data(this.displayData,this.opts.dataKey),e=t.enter().append("g").attr("class","monte-line-grp").append("path").call(this.__bindCommonEvents(zl));this._updateLineSelection(e,Xr);var n=t.select(".monte-line");return this._updateLineSelection(n,Kr),t.exit().transition().call(this._transitionSetup(zl,Zr)).style("opacity",0).remove(),t.merge(t.enter().selectAll(".monte-line-grp"))}},{key:"_updateLineSelection",value:function(t,e){var n=this,r=zl+cl(e)+"SelectionCustomize",i=zl+cl(e)+"TransitionCustomize";t.attr("class",function(t,e){return n._buildCss(["monte-line",n.opts.lineCss,n.opts.lineCssScaleAccessor,t.css],t,e)}).call(function(t){return n.fnInvoke(n.opts[r],t)}).transition().call(this._transitionSetup(zl,e)).attr("d",function(t){return n.line(n.getProp("values",t))}).style("stroke",this.optionReaderFunc("lineStrokeScaleAccessor")).call(function(t){return n.fnInvoke(n.opts[i],t)})}},{key:"_updateLinePoints",value:function(t,e,n){var r=this,i=d3.select(t),o=i.selectAll(".monte-point").data(function(t){return r.getProp("values",t)},this.opts.pointDataKey),a=function(t,e){var n=r.tryInvoke(r.opts.pointSize,t,e),i=d3.symbol().size(n),o=r.opts.pointSymbol(i,t,e);return o(t,e)};o.enter().append("path").call(this.__bindCommonEvents(Dl)).attr("d",a).attr("transform",function(t){return r._translatePoint(t)}).attr("class",function(t){return r._buildCss(["monte-point",e.css,r.opts.lineCssScaleAccessor,r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n);
}).call(function(t){return r.fnInvoke(r.opts.pointEnterSelectionCustomize,t)}).transition().call(this._transitionSetup(Dl,Xr)).attr("transform",function(t){return r._translatePoint(t)}).call(function(t){return r.fnInvoke(r.opts.pointEnterTransitionCustomize,t)}),o.attr("class",function(t){return r._buildCss(["monte-point",e.css,r.opts.lineCssScaleAccessor,r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n)}).call(function(t){return r.fnInvoke(r.opts.pointUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup(Dl,Kr)).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return r._translatePoint(t)}).attr("d",a).call(function(t){return r.fnInvoke(r.opts.pointUpdateTransitionCustomize,t)}),o.exit().call(function(t){return r.fnInvoke(r.opts.pointExitSelectionCustomize,t)}).transition().call(this._transitionSetup(Dl,Zr)).style("opacity",0).call(function(t){return r.fnInvoke(r.opts.pointExitTransitionCustomize,t)}).remove()}},{key:"_translatePoint",value:function(t){return"translate("+this.getScaledProp("x",t)+", "+this.getScaledProp("y",t)+")"}}]),e}(wl),Bl="area",Ml={chartCss:"monte-area-chart",margin:{top:10,right:10,bottom:30,left:40},areaProp:"",areaCustomize:null,areaFillScale:Oe,areaFillScaleAccessor:Fl.generateScaleAccessor("areaFillScale","areaProp"),areaCssScale:Oe,areaCssScaleAccessor:Fl.generateScaleAccessor("areaCssScale","areaProp"),areaCss:"area",yDomainCustomize:Ne},Ul=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ml]))}},{key:"_initCore",value:function(){var t=this;sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.area=d3.area().x(function(e){return t.getScaledProp("x",e)}).y0(function(){return t.height}).y1(function(e){return t.getScaledProp("y",e)})}},{key:"_initCustomize",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.areaCustomize&&this.tryInvoke(this.opts.areaCustomize,this.area)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,cr(Be(Bl))))}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.areaCssScale),Me(this.opts.areaFillScale)}},{key:"_update",value:function(){var t=this,n=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this);n.each(function(e,n,r){t._updateLineArea(r[n],e,n,r)})}},{key:"_updateLineArea",value:function(t,e,n,r){var i=this,o=d3.select(t),a=o.selectAll(".monte-area").data(function(t){return[t]}),s=a.enter().insert("path",":first-child").call(this.__bindCommonEvents(Bl));this._updateLineAreaSelections(s,Xr,e,n,r),this._updateLineAreaSelections(a,Kr,e,n,r),a.exit().call(function(t){return i.fnInvoke(i.opts.areaExitSelectionCustomize,t)}).transition().call(this._transitionSetup(Bl,Zr)).style("opacity",0).call(function(t){return i.fnInvoke(i.opts.areaExitTransitionCustomize,t)}).remove()}},{key:"_updateLineAreaSelections",value:function(t,e,n,r,i){var o=this,a=Bl+cl(e)+"SelectionCustomize",s=Bl+cl(e)+"TransitionCustomize";t.attr("class",function(t){return o._buildCss(["monte-area",n.css,o.opts.lineCssScaleAccessor,o.opts.areaCss,o.opts.areaCssScaleAccessor,t.css],n,r)}).call(function(t){return o.fnInvoke(o.opts[a],t)}).transition().call(this._transitionSetup(Bl,e),n,r,i).attr("d",function(t){return o.area(o.getProp("values",t))}).style("fill",this.optionReaderFunc("areaFillScaleAccessor")).call(function(t){return o.fnInvoke(o.opts[s],t)})}}]),e}(Fl),Nl={chartCss:"monte-sparkline-chart",boundingWidth:80,boundingHeight:30,margin:{top:0,right:0,bottom:0,left:0},suppressAxes:!0,pointSize:24},Hl=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Nl]))}},{key:"_data",value:function(t){var n;this.rawData=t;for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(n=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[t]].concat(i))}}]),e}(Fl),Wl="updatingLabels",Yl="updatedLabels",Vl=[Wl,Yl],Gl="bar",Xl="label",Kl={chartCss:"monte-bar-chart",margin:{top:0,right:0,bottom:30,left:40},barCssScale:Oe,barCssScaleAccessor:wl.generateScaleAccessor("barCssScale","x"),barFillScale:Oe,barFillScaleAccessor:wl.generateScaleAccessor("barFillScale","x"),barCss:"bar",barGrpCss:function(t){var e=this.getProp("y",t),n="monte-bar-zero";return e>0?n="monte-bar-pos":e<0&&(n="monte-bar-neg"),n},xProp:"id",yProp:"value",xScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},yDomainCustomize:He,includeLabels:!1,labelProp:"value",labelFillScale:Oe,labelFillScaleAccessor:wl.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t)},labelXAdjust:"",labelX:function(t){return this._barX(t)+this.x.bandwidth()/2},labelYAdjust:function(t){var e=this.getProp("y",t);return e>0?"-0.05em":"1.05em"},labelY:function(t){var e=this.getProp("y",t);return e>0?this._barY(t):this._barY(t)+this._barHeight(t)}},Zl=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Kl]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,cr(Be(Gl)),Vl))}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;return"y"===e?r=d3.extent(t,function(t){return n.getProp("y",t)}):"x"===e&&(r=t.map(function(t){return n.getProp("x",t)})),r}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.barCssScale),Me(this.opts.barFillScale),Me(this.opts.labelFillScale)}},{key:"_update",value:function(){var t=this,e=this._updateBars();this.opts.includeLabels&&(this.emit(Wl),e.each(function(e,n,r){var i=d3.select(r[n]);t._updateBarLabel(i,e,n,r)}),this.emit(Yl))}},{key:"_updateBars",value:function(){var t=this,e=this.draw.selectAll(".monte-bar-grp").data(this.displayData,this.opts.dataKey),n=this._barX.bind(this),r=this._barY.bind(this),i=this._barWidth.bind(this),o=this._barHeight.bind(this);return e.enter().append("g").attr("class",function(e,n){return t._buildCss(["monte-bar-grp",t.opts.barGrpCss],e,n)}).append("rect").call(this.__bindCommonEvents(Gl)).style("opacity",0).attr("x",n).attr("y",r).attr("width",i).attr("height",o).style("fill",this.optionReaderFunc("barFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-bar",t.opts.barCss,t.opts.barCssScaleAccessor,e.css],e,n)}).call(function(e){return t.fnInvoke(t.opts.barEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(Gl,Xr)).style("opacity",1).attr("x",n).attr("y",r).attr("width",i).attr("height",o).call(function(e){return t.fnInvoke(t.opts.barEnterTransitionCustomize,e)}),e.select("rect").style("fill",this.optionReaderFunc("barFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-bar",t.opts.barCss,t.opts.barCssScaleAccessor,e.css],e,n)}).call(function(e){return t.fnInvoke(t.opts.barUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup(Gl,Kr)).attr("x",n).attr("y",r).attr("width",i).attr("height",o).style("opacity",1).call(function(e){return t.fnInvoke(t.opts.barUpdateTransitionCustomize,e)}),e.exit().call(function(e){return t.fnInvoke(t.opts.barExitSelectionCustomize,e)}).transition().call(this._transitionSetup(Gl,Zr)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.barExitTransitionCustomize,e)}).remove(),e.merge(e.enter().selectAll(".monte-bar-grp"))}},{key:"_updateBarLabel",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-bar-label").data([e]);o.enter().append("text").attr("class","monte-bar-label").style("opacity",0).style("fill",function(t){return i.tryInvoke(i.opts.labelFillScaleAccessor,t,n,r)}).attr("x",function(t){return i.tryInvoke(i.opts.labelX,t,n,r)}).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("y",function(t){return i.tryInvoke(i.opts.labelY,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelEnterSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings(Xl,Xr);i._transitionConfigure(t,o,e,n,r)}).style("opacity",1).call(function(t){return i.fnInvoke(i.opts.labelEnterTransitionCustomize,t)}),o.style("fill",function(t){return i.tryInvoke(i.opts.labelFillScaleAccessor,t,n,r)}).attr("x",function(t){return i.tryInvoke(i.opts.labelX,t,n,r)}).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("y",function(t){return i.tryInvoke(i.opts.labelY,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings(Xl,Kr);i._transitionConfigure(t,o,e,n,r)}).style("opacity",1).call(function(t){return i.fnInvoke(i.opts.labelUpdateTransitionCustomize,t)}),o.exit().call(function(t){return i.fnInvoke(i.opts.labelExitSelectionCustomize,t)}).transition().call(this._transitionSetup(Xl,Zr)).call(function(t){return i.fnInvoke(i.opts.labelExitTransitionCustomize,t)}).remove()}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barWidth",value:function(){return this.x.bandwidth()}},{key:"_barY",value:function(t){var e=this.getProp("y",t);return e<0?this.y(0):this.getScaledProp("y",t)}},{key:"_barHeight",value:function(t){return this.y.domain()[0]<0?Math.abs(this.height-this.getScaledProp("y",t)-this.y(0)):this.height-this.getScaledProp("y",t)}}]),e}(wl);Zl.EVENTS=Vl;var $l,ql={chartCss:"monte-horizontal-bar-chart",margin:{top:0,right:0,bottom:40,left:40},barCssScaleAccessor:Zl.generateScaleAccessor("barCssScale","y"),barFillScaleAccessor:Zl.generateScaleAccessor("barFillScale","y"),xProp:"value",yProp:"id",xScale:d3.scaleLinear,yScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},xDomainCustomize:He,yDomainCustomize:null,barGrpCss:function(t){var e=this.getProp("x",t),n="monte-bar-zero";return e>0?n="monte-bar-pos":e<0&&(n="monte-bar-neg"),n},labelX:function(t){var e=this.getProp("x",t);return e>0?this._barWidth(t)+this._barX(t):this._barX(t)},labelXAdjust:"",labelY:function(t){return this._barY(t)+this.y.bandwidth()/2},labelYAdjust:"0.35em"},Jl=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ql]))}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;return"x"===e?r=d3.extent(t,function(t){return t[n.opts.xProp]}):"y"===e&&(r=t.map(function(t){return t[n.opts.yProp]})),r}},{key:"_barX",value:function(t){var e=this.getProp("x",t);return e>0?this.x(0):this.x(0)-this._barWidth(t)}},{key:"_barWidth",value:function(t){return Math.abs(this.getScaledProp("x",t)-this.x(0))}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barHeight",value:function(){return this.y.bandwidth()}}]),e}(Zl),Ql={chartCss:"monte-simple-bar-chart",boundingWidth:10,boundingHeight:100,margin:{top:1,right:1,bottom:1,left:1},suppressAxes:!0,xScale:function(){return d3.scaleBand().paddingInner(0).round(!0)},yDomainCustomize:[0,100]},tc=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ql]))}},{key:"_data",value:function(t){var n,r=this.tryInvoke(this.opts.yProp),i=Ee(t)?t:ar({},r,t);i.css||(i.css="monte-simple-bar-value"),this.rawData=t;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(n=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[i]].concat(a))}},{key:"_update",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this),this._updateSupport()}},{key:"_updateSupport",value:function(){var t=this,e={bottom:this.y.domain()[1],top:this.y.domain()[0]},n=this.bg.selectAll(".monte-bar-bg").data([e]),r=this.draw.selectAll(".monte-frame").data([e]);n.enter().append("rect").attr("class","monte-simple-bar-bg").merge(n).attr("x",0).attr("y",function(e){return t.y(e.bottom)}).attr("width",this.x.bandwidth()).attr("height",function(e){return t.y(e.top)}),n.exit().remove(),r.enter().append("rect").attr("class","monte-simple-bar-frame").merge(r).attr("x",0).attr("y",function(e){return t.y(e.bottom)}).attr("width",this.x.bandwidth()).attr("height",function(e){return t.y(e.top)}),r.exit().remove()}}]),e}(Zl),ec={chartCss:"monte-simple-horizontal-bar-chart",boundingWidth:100,boundingHeight:10,margin:{top:1,right:1,bottom:1,left:1},suppressAxes:!0,xDomainCustomize:[0,100],yScale:function(){return d3.scaleBand().paddingInner(0).round(!0)}},nc=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ec]))}},{key:"_data",value:function(t){var n,r=this.tryInvoke(this.opts.xProp),i=Ee(t)?t:ar({},r,t);i.css||(i.css="monte-simple-hort-bar-value"),this.rawData=t;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(n=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[i]].concat(a))}},{key:"_update",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this),this._updateSupport()}},{key:"_updateSupport",value:function(){var t=this,e={left:this.x.domain()[0],right:this.x.domain()[1]},n=this.bg.selectAll(".monte-bar-bg").data([e]),r=this.draw.selectAll(".monte-frame").data([e]);n.enter().append("rect").attr("class","monte-simple-bar-bg").merge(n).attr("x",function(e){return t.y(e.left)}).attr("y",0).attr("width",function(e){return t.x(e.right)}).attr("height",this.y.bandwidth()),n.exit().remove(),r.enter().append("rect").attr("class","monte-simple-bar-frame").merge(r).attr("x",function(e){return t.y(e.left)}).attr("y",0).attr("width",function(e){return t.x(e.right)}).attr("height",this.y.bandwidth()),r.exit().remove()}}]),e}(Jl),rc={GROUPED:"grouped",STACKED:"stacked"},ic=($l={},ar($l,rc.GROUPED,"monte-segment-mode-grouped"),ar($l,rc.STACKED,"monte-segment-mode-stacked"),$l),oc="modeChanging",ac="modeChanged",sc=[oc,ac],uc="barseg",lc="bargrp",cc="label",pc={chartCss:"monte-segment-bar-chart",barSegmentCss:"bar-segment",margin:{top:10,right:0,bottom:30,left:40},segmentBarMode:rc.STACKED,xProp:"id",yProp:"values",xInnerProp:"id",yInnerProp:"value",xInnerScale:function(){return d3.scaleBand().paddingInner(.1).paddingOuter(.1).round(!0)},barSegCssScale:Oe,barSegCssScaleAccessor:wl.generateScaleAccessor("barSegCssScale","x"),barSegFillScale:Oe,barSegFillScaleAccessor:wl.generateScaleAccessor("barSegFillScale","x"),xScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},yDomainCustomize:He,includeLabels:!1,labelProp:"value",labelFillScale:Oe,labelFillScaleAccessor:wl.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t)},labelXAdjust:"",labelX:function(t){var e=this.option("segmentBarMode");return e===rc.STACKED?this.x.bandwidth()/2:e===rc.GROUPED?this._barXInnerGrouped(t)+this.xInner.bandwidth()/2:void 0},labelYAdjust:"1.05em",labelY:function(t,e,n,r){var i=this.option("segmentBarMode");return i===rc.STACKED?this._barYInnerStacked(t,e,n,r):i===rc.GROUPED?this._barYInnerGrouped(t):void 0},innerDataKey:Fe},hc=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[pc]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,cr(Be(lc)),cr(Be(uc)),sc))}},{key:"_initCore",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this._initInnerScales()}},{key:"_initInnerScales",value:function(){this.xInner=this.opts.xInnerScale()}},{key:"_extentInner",value:function(t,e){var n=this,r=[];return t.forEach(function(t){n.getProp(e,t).forEach(function(t){return r.push(n.getProp(e+"Inner",t))})}),d3.extent(r)}},{key:"_extentMaxes",value:function(t,e){var n=this,r=t.map(function(t){return d3.sum(n.getProp(e,t),function(t){return n.getProp(e+"Inner",t)})});return[0,d3.max(r)]}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;if("x"===e)r=t.map(function(t){return n.getProp("x",t)});else if("y"===e){var i=this.tryInvoke(this.opts.segmentBarMode);if(i===rc.GROUPED)r=this._extentInner(t,"y");else{if(i!==rc.STACKED)throw fl.InvalidEnumOption("segmentBarMode",i);r=this._extentMaxes(t,"y")}}return r}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.barSegCssScale),Me(this.opts.barSegFillScale),Me(this.opts.labelFillScale)}},{key:"setMode",value:function(t){return this.option("segmentBarMode",t),this.emit(oc),this.updateAxesDomains(),this.renderAxes(),this.update(),this.emit(ac),this}},{key:"mode",value:function(t){return t?this.setMode(t):this.tryInvoke(this.opts.segmentBarMode)}},{key:"updateAxesRanges",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateAxesRanges",this).call(this),this._updateXInnerRange(),this._updateYInnerRange()}},{key:"_updateXInnerRange",value:function(){this.xInner.range([0,this.x.bandwidth()])}},{key:"_updateXInnerDomain",value:function(){var t=this.data(),e=this.tryInvoke(this.opts.yProp),n=this.tryInvoke(this.opts.xInnerProp),r=t[0][e].map(function(t){return t[n]});this.xInner.domain(r)}},{key:"_updateYInnerRange",value:function(){}},{key:"_updateYInnerDomain",value:function(){}},{key:"_data",value:function(t){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t),this._updateXInnerDomain(),this._updateXInnerRange(),this._updateYInnerDomain(),this._updateYInnerRange()}},{key:"_render",value:function(){var t=this.tryInvoke(this.opts.segmentBarMode),e=ic[t];this.classed(e,!0)}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.segmentBarMode),n=Ge(ic,e),r=ic[e],i=void 0,o=void 0,a=void 0;if(this.classed(r,!0),e===rc.STACKED){var s=this._updateStackedBars();i=s.barGrps,o=s.enterTransition,a=s.updateTransition}else{if(e!==rc.GROUPED)throw fl.InvalidEnumOption("segmentBarMode",e);var u=this._updateGroupedBars();i=u.barGrps,o=u.enterTransition,a=u.updateTransition}this.opts.includeLabels&&i&&(i.size()?this._updateLabels(i,o,a):(o.on("end.labels",function(){var e=t.draw.selectAll(".monte-segment-bar-grp");t._updateLabels(e,o)}),a.on("end.labels",function(){var e=t.draw.selectAll(".monte-segment-bar-grp");t._updateLabels(e,a)}))),o&&o.on("end.classes",function(){n.forEach(function(e){return t.classed(e,!1)})}),a&&a.on("end.classes",function(){n.forEach(function(e){return t.classed(e,!1)})})}},{key:"_updateStackedBars",value:function(){var t=this._barXInnerStacked.bind(this),e=this._barYInnerStacked.bind(this),n=this._barWidthStacked.bind(this),r=this._barHeightStacked.bind(this);return this._updateBars(t,e,n,r)}},{key:"_updateGroupedBars",value:function(){var t=this._barXInnerGrouped.bind(this),e=this._barYInnerGrouped.bind(this),n=this._barWidthGrouped.bind(this),r=this._barHeightGrouped.bind(this);return this._updateBars(t,e,n,r)}},{key:"_updateBars",value:function(t,e,n,r){var i=this,o=this.draw.selectAll(".monte-segment-bar-grp").data(this.displayData,this.opts.dataKey),a={barXInner:t,barYInner:e,barWidth:n,barHeight:r},s=o.enter().append("g").attr("class","monte-segment-bar-grp").call(this.__bindCommonEvents(lc));return this._updateBarSelection(o.merge(s),a),o.exit().call(function(t){return i.fnInvoke(i.opts.bargrpExitSelectionCustomize,t)}).transition().call(function(t){var e=i._transitionSettings(lc,Zr);t.delay(i.tryInvoke(e.delay))}).call(function(t){return i.fnInvoke(i.opts.bargrpExitTransitionCustomize,t)}).remove(),{barGrps:o.merge(o.enter().selectAll(".monte-segment-bar-grp"))}}},{key:"_updateBarSelection",value:function(t,e){var n=this,r=this._barGroupTranslate.bind(this);t.attr("transform",function(t){return"translate("+r(t)+")"}).each(function(t,r,i){var o=n._barProp(),a=t[o],s=d3.select(i[r]),u=s.selectAll(".monte-segment-bar-seg").data(a,n.opts.innerDataKey),l=u.enter().append("rect"),c=u.merge(l);l.call(n.__bindCommonEvents(uc)).style("opacity",0).style("fill",n.optionReaderFunc("barSegFillScaleAccessor")).attr("class",function(t,e){return n._buildCss(["monte-segment-bar-seg",n.opts.barSegCss,n.opts.barSegCssScaleAccessor,t.css],t,e)}).attr("x",0).attr("y",0).attr("width",0).attr("height",0).call(function(t){return n.fnInvoke(n.opts.barsegEnterSelectionCustomize,t)}).transition().call(n._transitionSetup(uc,Xr),t,r,i).attr("x",function(t,n,r){return e.barXInner(t,n,r,c.nodes())}).attr("y",function(t,n,r){return e.barYInner(t,n,r,c.nodes())}).attr("width",e.barWidth).attr("height",e.barHeight).style("opacity",1).call(function(t){return n.fnInvoke(n.opts.barsegEnterTransitionCustomize,t)}),u.attr("class",function(t,e){return n._buildCss(["monte-segment-bar-seg",n.opts.barSegCss,n.opts.barSegCssScaleAccessor,t.css],t,e)}).call(function(t){return n.fnInvoke(n.opts.barsegUpdateSelectionCustomize,t)}).transition().call(n._transitionSetup(uc,Kr),t,r,i).style("fill",n.optionReaderFunc("barSegFillScaleAccessor")).attr("x",function(t,n,r){return e.barXInner(t,n,r,c.nodes())}).attr("y",function(t,n,r){return e.barYInner(t,n,r,c.nodes())}).attr("width",e.barWidth).attr("height",e.barHeight).style("opacity",1).call(function(t){return n.fnInvoke(n.opts.barsegUpdateTransitionCustomize,t)}),u.exit().call(function(t){return n.fnInvoke(n.opts.barsegExitSelectionCustomize,t)}).transition().call(n._transitionSetup(uc,Zr),t,r,i).call(function(t){return n.fnInvoke(n.opts.barsegExitTransitionCustomize,t)}).remove()})}},{key:"_segLabels",value:function(t){return this.getProp("y",t)}},{key:"_updateLabels",value:function(t,e){var n=this;t.each(function(t,r,i){var o=d3.select(i[r]);n._updateBarSegLabel(o,e,t,r,i)})}},{key:"_updateBarSegLabel",value:function(t,e,n,r,i){var o=this,a=t.selectAll(".monte-bar-label").data(this._segLabels(n)),s=a.enter().append("text").attr("class","monte-bar-label"),u=s.merge(a);u.text(function(t,e,n){return o.tryInvoke(o.opts.label,t,e,n)}).call(function(t){return t.raise()}).call(function(t){return o.fnInvoke(o.opts.labelUpdateSelectionCustomize,t)}).transition(e).call(this._transitionSetup(cc,Kr),n,r,i).style("fill",function(t,e,n){return o.tryInvoke(o.opts.labelFillScaleAccessor,t,e,n)}).attr("x",function(t,e,n){return o.tryInvoke(o.opts.labelX,t,e,n,u.nodes())}).attr("dx",function(t,e,n){return o.tryInvoke(o.opts.labelXAdjust,t,e,n)}).attr("y",function(t,e,n){return o.tryInvoke(o.opts.labelY,t,e,n,u.nodes())}).attr("dy",function(t,e,n){return o.tryInvoke(o.opts.labelYAdjust,t,e,n)}).call(function(t){return o.fnInvoke(o.opts.labelUpdateTransitionCustomize,t)}),a.exit().call(function(t){return o.fnInvoke(o.opts.labelUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup(cc,Zr),n,r,i).style("opacity",0).call(function(t){return o.fnInvoke(o.opts.labelUpdateTransitionCustomize,t)}).remove()}},{key:"_barProp",value:function(){return this.tryInvoke(this.opts.yProp)}},{key:"_barGroupTranslate",value:function(t){return this._barX(t)+", 0"}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barXInnerGrouped",value:function(t){return this.getScaledProp("xInner",t)}},{key:"_barXInnerStacked",value:function(){return 0}},{key:"_barWidthStacked",value:function(){return this.x.bandwidth()}},{key:"_barWidthGrouped",value:function(){return this.xInner.bandwidth()}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barYInnerGrouped",value:function(t){return this.height-this._barHeightGrouped(t)}},{key:"_barYInnerStacked",value:function(t,e,n,r){for(var i=this.getScaledProp("y","yInner",t),o=0,a=0;a<e;a++){var s=d3.select(r[a]),u=s.datum();o-=this._barHeightStacked(u)}return i+o}},{key:"_barHeightGrouped",value:function(t){return this.height-this.getScaledProp("y","yInner",t)}},{key:"_barHeightStacked",value:function(t){return this.height-this.getScaledProp("y","yInner",t)}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(dc),(n=sr(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(wl);hc.EVENTS=sc;var dc=["setMode","updateAxesRanges"],fc={chartCss:"monte-horizontal-segment-bar-chart",barSegmentCss:"bar-segment",margin:{top:0,right:10,bottom:20,left:40},segmentBarMode:rc.STACKED,barSegCssScaleAccessor:hc.generateScaleAccessor("barSegCssScale","y"),barSegFillScaleAccessor:hc.generateScaleAccessor("barSegFillScale","y"),yProp:"id",xProp:"values",yInnerProp:"id",xInnerProp:"value",xScale:d3.scaleLinear,yInnerScale:function(){return d3.scaleBand().paddingInner(.1).paddingOuter(.1).round(!0)},yScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},xDomainCustomize:He,yDomainCustomize:null,labelXAdjust:"-0.1em",labelX:function(t,e,n,r){var i=this.option("segmentBarMode");return i===rc.STACKED?this._barXInnerStacked(t,e,n,r)+this._barWidthStacked(t):i===rc.GROUPED?this._barWidthGrouped(t):void 0},labelYAdjust:"0.35em",labelY:function(t){var e=this.option("segmentBarMode");return e===rc.STACKED?this.y.bandwidth()/2:e===rc.GROUPED?this._barYInnerGrouped(t)+this.yInner.bandwidth()/2:void 0}},yc=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[fc]))}},{key:"_initInnerScales",value:function(){this.yInner=this.opts.yInnerScale()}},{key:"_updateXInnerRange",value:function(){}},{key:"_updateXInnerDomain",value:function(){}},{key:"_updateYInnerRange",value:function(){this.yInner.range([0,this.y.bandwidth()])}},{key:"_updateYInnerDomain",value:function(){var t=this.data(),e=this.tryInvoke(this.opts.xProp),n=this.tryInvoke(this.opts.yInnerProp),r=t[0][e].map(function(t){return t[n]});this.yInner.domain(r)}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;if("y"===e)r=t.map(function(t){return n.getProp("y",t)});else if("x"===e){var i=this.tryInvoke(this.opts.segmentBarMode);if(i===rc.GROUPED)r=this._extentInner(t,"x");else{if(i!==rc.STACKED)throw fl.InvalidEnumOption("segmentBarMode",i);r=this._extentMaxes(t,"x")}}return r}},{key:"_segLabels",value:function(t){return this.getProp("x",t)}},{key:"_barProp",value:function(){return this.tryInvoke(this.opts.xProp)}},{key:"_barGroupTranslate",value:function(t){return"0, "+this._barY(t)}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barXInnerGrouped",value:function(){return 0}},{key:"_barXInnerStacked",value:function(t,e,n,r){for(var i=0,o=0,a=0;a<e;a++){var s=d3.select(r[a]),u=s.datum();o+=this._barWidthStacked(u)}return i+o}},{key:"_barWidthGrouped",value:function(t){return this.getScaledProp("x","xInner",t)}},{key:"_barWidthStacked",value:function(t){return this.getScaledProp("x","xInner",t)}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barYInnerGrouped",value:function(t){return this.getScaledProp("yInner",t)}},{key:"_barYInnerStacked",value:function(){return 0}},{key:"_barHeightGrouped",value:function(){return this.yInner.bandwidth()}},{key:"_barHeightStacked",value:function(){return this.y.bandwidth()}}]),e}(hc),vc="point",_c={chartCss:"monte-scatter-plot",margin:{top:10,right:10,bottom:30,left:40},pointSize:64,pointProp:"",pointFillScale:Oe,pointFillScaleAccessor:wl.generateScaleAccessor("pointFillScale","point"),pointStrokeScale:Oe,pointStrokeScaleAccessor:wl.generateScaleAccessor("pointStrokeScale","point"),pointCssScale:Oe,pointCssScaleAccessor:wl.generateScaleAccessor("pointCssScale","point"),pointCss:"monte-point",pointSymbol:function(t){return t.type(d3.symbolCircle)}},gc=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[_c]))}},{key:"_initCore",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.symbol=d3.symbol()}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,cr(Be(vc))))}},{key:"_domainExtent",value:function(t,e){var n=this.opts[e+"Prop"],r=d3.extent(t,function(t){return t[n]});return r}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.pointCssScale),Me(this.opts.pointFillScale),Me(this.opts.pointStrokeScale)}},{key:"_update",value:function(){var t=this._updatePoints();return t}},{key:"_updatePoints",value:function(){var t=this,e=this.draw.selectAll(".monte-point").data(this.displayData,this.opts.dataKey),n=e.enter().append("path").call(this.__bindCommonEvents(vc));return this._updatePointsSelection(n,Xr),this._updatePointsSelection(e,Kr),e.exit().call(function(e){return t.fnInvoke(t.opts.pointExitSelectionCustomize,e)}).transition().call(this._transitionSetup(vc,Zr)).style("opacity",0).call(function(e){
return t.fnInvoke(t.opts.pointExitTransitionCustomize,e)}).remove(),e.merge(e.enter().selectAll(".point"))}},{key:"_updatePointsSelection",value:function(t,e){var n=this,r=vc+cl(e)+"SelectionCustomize",i=vc+cl(e)+"TransitionCustomize";t.attr("d",function(t,e){var r=d3.symbol().size(n.opts.pointSize),i=n.opts.pointSymbol(r,t,e);return i(t,e)}).attr("class",function(t,e){return n._buildCss(["monte-point",n.opts.pointCss,n.opts.pointCssScaleAccessor,t.css],t,e)}).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).call(function(t){return n.fnInvoke(n.opts[r],t)}).transition().call(this._transitionSetup(vc,e)).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return"translate("+n.getScaledProp("x",t)+", "+n.getScaledProp("y",t)+")"}).call(function(t){return n.fnInvoke(n.opts[i],t)})}}]),e}(wl),bc={D3_SYMBOL:"d3Symbol",SVG_USE_DEF:"svgUseDef",SVG_USE_EXTERNAL:"svgUseExternal"},mc="icon",kc={rowIndex:function(t,e){return Math.floor(e/this.opts.columns)},columnIndex:function(t,e){return e%this.opts.columns}},Sc={rowIndex:function(t,e){return this.opts.rows-Math.floor(e/this.opts.columns)-1},columnIndex:function(t,e){return e%this.opts.columns}},xc={chartCss:"monte-icon-array",boundingWidth:100,boundingHeight:100,margin:{top:0,right:0,bottom:0,left:0},suppressAxes:!0,xScale:function(){return d3.scalePoint().padding(.5)},yScale:function(){return d3.scalePoint().padding(.5)},iconProp:"",iconFillScale:Oe,iconFillScaleAccessor:wl.generateScaleAccessor("iconFillScale","icon"),iconStrokeScale:Oe,iconStrokeScaleAccessor:wl.generateScaleAccessor("iconStrokeScale","icon"),iconCssScale:Oe,iconCssScaleAccessor:wl.generateScaleAccessor("iconCssScale","icon"),iconCss:"icon",iconSize:24,iconSymbol:function(t){return t.type(d3.symbolCircle)},iconMode:bc.D3_SYMBOL,iconDefId:"svgIcon",iconSvgWidth:24,iconSvgHeight:24,iconHref:"",iconSvgSymbol:function(t){t.attr("viewbox","0 0 24 24").append("path").attr("d","m 0,0 24,24 m -24,0 24,-24")},rows:10,columns:10,arrangement:Sc,svgVersion:1},Ac=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[xc]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,cr(Be(mc))))}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.iconCssScale),Me(this.opts.iconFillScale),Me(this.opts.iconStrokeScale)}},{key:"_domainExtent",value:function(t,e){var n=null;return"y"===e?n=new Array(this.opts.rows):"x"===e&&(n=new Array(this.opts.columns)),n.fill().map(function(t,e){return e})}},{key:"_render",value:function(){var t=this;this.opts.iconMode===bc.SVG_USE_DEF&&!function(){var e=t;t.defs.append("symbol").attr("id","svgIcon").each(function(){e.opts.iconSvgSymbol(d3.select(this))})}()}},{key:"_update",value:function(){var t=this.opts.rows*this.opts.columns;if(t<this.displayData.length)throw new hl("Maximum number of items is "+t+". Data contains "+this.displayData.length+".");this._updateIcons()}},{key:"_updateIcons",value:function(){var t,e=(t={},ar(t,bc.D3_SYMBOL,this._updateD3Symbol),ar(t,bc.SVG_USE_DEF,this._updateSvgUse),ar(t,bc.SVG_USE_EXTERNAL,this._updateSvgUse),t),n=this.draw.selectAll(".monte-icon").data(this.displayData,this.opts.dataKey);e[this.opts.iconMode].call(this,n,this.opts.iconMode),n.exit().transition().call(this._transitionSetup(mc,Zr)).style("opacity",0).remove()}},{key:"_updateD3Symbol",value:function(t){var e=this,n=function(t,n){var r=e.tryInvoke(e.opts.iconSize,t,n),i=d3.symbol().size(r),o=e.opts.iconSymbol(i,t,n);return o(t,n)};this._updateCommon("path",t,Xe).attr("d",n)}},{key:"_updateSvgUse",value:function(t,e){var n=this,r=e===bc.SVG_USE_DEF?function(t,e,r){return"#"+n.tryInvoke(n.opts.iconDefId,t,e,r)}:function(t,e,r){return n.tryInvoke(n.opts.iconHref,t,e,r)},i=function(t,e,r){var i=d3.select(r[e]);i.attr("width",n.opts.iconSvgWidth).attr("height",n.opts.iconSvgHeight)},o=2===this.tryInvoke(this.opts.svgVersion)?"href":"xlink:href";this._updateCommon("use",t,Ke,i).attr(o,r)}},{key:"_updateCommon",value:function(t,e,n){var r=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Oe,o=e.enter().append(t).call(this.__bindCommonEvents(mc)).merge(e).each(i).attr("transform",function(t,e,i){return n.call(r,t,e,i)}).attr("class",function(t,e){return r._buildCss(["monte-icon",r.opts.iconCss,r.opts.iconCssScaleAccessor,t.css],t,e)}).call(function(t){return r.fnInvoke(r.opts.iconUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup(mc,Kr)).style("fill",this.optionReaderFunc("iconFillScaleAccessor")).style("stroke",this.optionReaderFunc("iconStrokeScaleAccessor")).call(function(t){return r.fnInvoke(r.opts.iconUpdateTransitionCustomize,t)});return o}}]),e}(wl),Oc=1e-12,Ic=Math.PI,Cc=Ic/2,Pc=2*Ic,Ec=Object.freeze({EPSILON:Oc,PI:Ic,HALF_PI:Cc,TAU:Pc}),Rc="monte-polar-label-",wc={CENTROID:{css:Rc+"centroid",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("innerRadius"),t,e),i=this.tryInvoke(this.option("outerRadius"),t,e);return function(t,e,o){var a=n.tryInvoke(r,t,e,o),s=n.tryInvoke(i,t,e,o);return(a+s)/2}}},INNER:{css:Rc+"inner",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("innerRadius"),t,e);return function(t,e,i){var o=n.tryInvoke(r,t,e,i);return.9*o}}},INNER_EDGE:{css:Rc+"inner-edge",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("innerRadius"),t,e);return function(t,e,i){return n.tryInvoke(r,t,e,i)}}},OUTER:{css:Rc+"outer",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("outerRadius"),t,e);return function(t,e,i){var o=n.tryInvoke(r,t,e,i);return 1.1*o}}},OUTER_EDGE:{css:Rc+"outer-edge",radius:function(t,e){var n=this.chart||this,r=this.tryInvoke(this.option("outerRadius"),t,e);return function(t,e,i){return n.tryInvoke(r,t,e,i)}}}},jc=new RegExp("^"+Rc+"*"),Tc="updatingLabels",zc="updatedLabels",Dc=[Tc,zc],Lc="wedge",Fc={chartCss:"monte-arc-chart",cornerRadius:0,innerRadius:0,outerRadius:Rn,arcCustomize:null,arcCss:"arc",arcWedgeCss:"wedge",arcWedgeCssScale:Oe,arcWedgeCssScaleAccessor:Tl.generateScaleAccessor("arcWedgeCssScale","itemValue"),arcWedgeFillScale:Oe,arcWedgeFillScaleAccessor:Tl.generateScaleAccessor("arcWedgeFillScale","itemValue"),arcWedgeStrokeScale:Oe,arcWedgeStrokeScaleAccessor:Tl.generateScaleAccessor("arcWedgeStrokeScale","itemValue"),arcWedgeEnter:function(t){return{startAngle:t.endAngle,endAngle:t.endAngle,value:t.value,padAngle:t.padAngle,index:t.index}},arcBgWedgeCssScale:Oe,arcBgWedgeCssScaleAccessor:Tl.generateScaleAccessor("arcBgWedgeCssScale","itemValue"),arcBgWedgeFillScale:Oe,arcBgWedgeFillScaleAccessor:Tl.generateScaleAccessor("arcBgWedgeFillScale","itemValue"),itemValueProp:"value",pieStartAngle:0,pieEndAngle:Pc,piePadAngle:.02,includeLabels:!1,labelPlacement:rn,labelRotation:bn,labelAngle:function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},labelProp:"value",labelFillScale:Oe,labelFillScaleAccessor:Tl.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t.data)},labelXAdjust:"",labelYAdjust:"0.35em",dataKey:function(t,e){return t&&t.data&&t.data.id||e}},Bc=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Fc]))}},{key:"_initCore",value:function(){var t=this;sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.arc=d3.arc().cornerRadius(this.tryInvoke(this.opts.cornerRadius)),this.pie=d3.pie().value(function(e){return t.getProp("itemValue",e)}).sortValues(null).startAngle(this.tryInvoke(this.opts.pieStartAngle)).endAngle(this.tryInvoke(this.opts.pieEndAngle)).padAngle(this.tryInvoke(this.opts.piePadAngle))}},{key:"_initCustomize",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.arcCustomize&&this.opts.arcCustomize(this.arc),this.opts.pieCustomize&&this.opts.pieCustomize(this.pie)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,cr(Be(Lc)),Dc))}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.arcWedgeCssScale),Me(this.opts.arcWedgeFillScale),Me(this.opts.arcWedgeStrokeScale),Me(this.opts.arcBgWedgeCssScale),Me(this.opts.arcBgWedgeFillScale),Me(this.opts.labelFillScale)}},{key:"_boundsUpdate",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_boundsUpdate",this).call(this),this.arc.innerRadius(this.tryInvoke(this.opts.innerRadius,this.width,this.height)).outerRadius(this.tryInvoke(this.opts.outerRadius,this.width,this.height))}},{key:"_data",value:function(t){this.pieDisplayData=this.pie(t),sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t)}},{key:"_render",value:function(){this.hasRendered||(sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_render",this).call(this),this._updateBackground())}},{key:"_update",value:function(){var t=this._updateArcs();this.opts.includeLabels&&this._updateLabels(t)}},{key:"_updateArcs",value:function(){var t=this,e=this.draw.selectAll(".monte-arc").data(this.pieDisplayData,this.opts.dataKey),n=this.arc;return e.enter().append("g").attr("class","monte-arc "+this.opts.arcCss).append("path").attr("class",function(e,n){return t._buildCss(["monte-arc-wedge",t.opts.arcWedgeCss,t.opts.arcWedgeCssScaleAccessor,e.data.css],e,n)}).call(this.__bindCommonEvents(Lc)).call(function(e){return t.fnInvoke(t.opts.wedgeEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(Lc,Xr)).attrTween("d",function(e){var r=t.tryInvoke(t.opts.arcWedgeEnter,e);return en(n,r,e)}).style("stroke",this.optionReaderFunc("arcWedgeStrokeScaleAccessor")).style("fill",this.optionReaderFunc("arcWedgeFillScaleAccessor")).call(function(e){return t.fnInvoke(t.opts.wedgeEnterTransitionCustomize,e)}),e.selectAll(".monte-arc-wedge").each(function(){var t=d3.select(this.parentElement).datum(),e=d3.select(this),n=e.datum();t.prev=n,e.datum(t),delete n.prev}).attr("class",function(e,n){return t._buildCss(["monte-arc-wedge",t.opts.arcWedgeCss,t.opts.arcWedgeCssScaleAccessor,e.data.css],e,n)}).call(function(e){return t.fnInvoke(t.opts.wedgeUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup(Lc,Kr)).attrTween("d",function(t){return en(n,t.prev,t)}).style("stroke",this.optionReaderFunc("arcWedgeStrokeScaleAccessor")).style("fill",this.optionReaderFunc("arcWedgeFillScaleAccessor")).call(function(e){return t.fnInvoke(t.opts.wedgeUpdateTransitionCustomize,e)}),e.exit().call(function(e){return t.fnInvoke(t.opts.wedgeExitSelectionCustomize,e)}).transition().call(this._transitionSetup(Lc,Zr)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.wedgeExitTransitionCustomize,e)}).remove(),e.merge(e.enter().selectAll(".monte-arc"))}},{key:"_updateBackground",value:function(){var t=this,e=this.displayData.reduce(function(t,e){return t+e.value},0),n=this.arc({index:0,startAngle:this.opts.pieStartAngle,endAngle:this.opts.pieEndAngle,value:e}),r=this.bg.selectAll(".monte-arc-bg").data([n]);r.enter().append("path").merge(r).attr("d",function(t){return t}).style("fill",this.optionReaderFunc("arcBgWedgeFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-arc-bg",t.opts.arcBgWedgeCssScaleAccessor],e,n)}).call(function(e){return t.fnInvoke(t.opts.bgUpdateSelectionCustomize,e)})}},{key:"_updateLabels",value:function(t){var e=this;this.emit(Tc);var n=this.tryInvoke(this.opts.labelPlacement),r=this.tryInvoke(n.css);Tn(this.bound,jc),this.classed(r,!0),t.each(function(t,n,r){var i=d3.select(r[n]);e._updateArcLabel(i,t,n,r)}),this.emit(zc)}},{key:"_updateArcLabel",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-arc-label").data([e]),a=this.tryInvoke(this.opts.labelPlacement),s=this.tryInvoke(a.radius,this.width,this.height),u=this.tryInvoke(s,e,n,r),l=this.tryInvoke(this.opts.labelAngle,e,n,r),c=Je(this.tryInvoke(this.opts.labelRotation,e,n,r)),p=$e(u,l);o.enter().append("text").attr("class","monte-arc-label").attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).attr("transform",function(){return"translate("+p+") rotate("+c+")"}).attr("angle",l).attr("radius",s).style("opacity",0).style("fill",this.optionReaderFunc("labelFillScaleAccessor")).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelEnterSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",Xr);i._transitionConfigure(t,o,e,n,r)}).style("opacity",1).call(function(t){return i.fnInvoke(i.opts.labelEnterTransitionCustomize,t)}),o.style("fill",this.optionReaderFunc("labelFillScaleAccessor")).style("opacity",1).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",Kr);i._transitionConfigure(t,o,e,n,r)}).attrTween("transform",function(){var t=wn(o.attr("transform")),e={angle:+o.attr("angle"),radius:+o.attr("radius"),rotate:t.rotate||0},n={angle:l,radius:u,rotate:c};return nn(e,n,u)}).attr("angle",l).attr("radius",s).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateTransitionCustomize,t)}),o.exit().call(function(t){return i.fnInvoke(i.opts.labelExitSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings("label",Zr);i._transitionConfigure(t,o,e,n,r)}).attr("opacity",0).call(function(t){return i.fnInvoke(i.opts.labelExitTransitionCustomize,t)}).remove()}}]),e}(Tl);Bc.EVENTS=Dc;var Mc={smallNeedleHeight:0,smallNeedleRatio:.05},Uc="updatingBackgroundArc",Nc="updatedBackgroundArc",Hc="updatingNeedle",Wc="updatedNeedle",Yc=[Uc,Nc,Hc,Wc],Vc="needle",Gc={chartCss:"monte-arc-chart monte-gauge-chart",piePadAngle:0,pieStartAngle:-Cc,pieEndAngle:Cc,arcBgCssScale:Oe,arcBgCssScaleAccessor:Bc.generateScaleAccessor("arcBgCssScale","itemValue"),arcBgFillScale:Oe,arcBgFillScaleAccessor:Bc.generateScaleAccessor("arcBgFillScale","itemValue"),needleBase:20,needleHeight:function(t,e){return(t+e)/2},needlePath:zn(),innerRadius:function(t,e){return.9*Rn(t,e)},labelPlacement:on,labelRotation:En,segmentsProp:"segments",itemValueProp:"interval",startValueProp:"start",startLabelProp:"startLabel",needleValueProp:"value",labelProp:"label",labelAngle:function(t){return t.endAngle},suppressLabels:!1,includeLabels:function(){return!this.tryInvoke(this.opts.suppressLabels)}},Xc=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Gc]))}},{key:"_initCore",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this._prevNeedleAngleValueData=0,this.needleValueData=0,this.needleValueAngleData=0}},{key:"_initRender",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initRender",this).call(this),this.bgArc=d3.arc().startAngle(this.tryInvoke(this.opts.pieStartAngle)).endAngle(this.tryInvoke(this.opts.pieEndAngle)).innerRadius(0).outerRadius(this.tryInvoke(this.opts.outerRadius,this.width,this.height)).cornerRadius(this.tryInvoke(this.opts.cornerRadius)),this.angleScale=d3.scaleLinear().range([this.opts.pieStartAngle,this.opts.pieEndAngle])}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Yc))}},{key:"_getLayerTranslate",value:function(){var t=this.tryInvoke(this.opts.outerRadius,this.width,this.height),e=this.width/2+this.margin.left,n=this.height-(this.height-t)+this.margin.top;return"translate("+e+", "+n+")"}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.arcBgCssScale),Me(this.opts.arcBgFillScale)}},{key:"_data",value:function(t){this.rawData=t;var n=this.tryInvoke(this.opts.segmentsProp),r=this.tryInvoke(this.opts.startValueProp),i=this.tryInvoke(this.opts.startLabelProp),o=this.tryInvoke(this.opts.itemValueProp),a=this.tryInvoke(this.opts.needleValueProp);we(t[i])&&t[n].unshift({interval:0,label:t[i]}),sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t[n]);var s=this.displayData.reduce(function(t,e){return t+Math.abs(e[o])},0),u=t[r]||0;this.angleScale.domain([u,u+s]),this.needleValue(t[a],!0)}},{key:"needleValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t===yl?this.needleValueData:(this._prevNeedleAngleValueData=this.needleValueAngleData,this.needleValueData=t,this.needleValueAngleData=this.angleScale(t),e||this.update(),this)}},{key:"needleValueAngle",value:function(t){return t===yl?this.needleValueAngleData:(this.needleValue(this.angleScale.invert(t)),this)}},{key:"_render",value:function(){this.hasRendered||(sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_render",this).call(this),this._updateBackgroundArc())}},{key:"_update",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this),this._updateNeedle()}},{key:"_updateBackgroundArc",value:function(){var t=this;this.emit(Uc),this.bg.append("path").style("fill",this.optionReaderFunc("arcBgFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-gauge-bg",t.opts.arcBgCssScaleAccessor],e,n)}).attr("d",this.bgArc()),this.emit(Nc)}},{key:"_updateNeedle",value:function(){var t=this,e=this.tryInvoke(this.opts.needleBase),n=this.tryInvoke(this.opts.outerRadius,this.width,this.height),r=this.tryInvoke(this.opts.innerRadius,this.width,this.height),i=this.tryInvoke(this.opts.needleHeight,r,n),o=this.tryInvoke(this.opts.needlePath,i,e),a=this.overlay.selectAll(".monte-gauge-needle").data([this.needleValueAngleData||0]);this.emit(Hc),a.enter().append("path").attr("class","monte-gauge-needle").attr("d",o).call(function(e){return t.fnInvoke(t.opts.needleEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(Vc,Xr)).style("transform",function(t){return"rotate("+t+"rad)"}).call(function(e){return t.fnInvoke(t.opts.needleEnterTransitionCustomize,e)}),a.call(function(e){return t.fnInvoke(t.opts.needleExitSelectionCustomize,e)}).transition().call(this._transitionSetup(Vc,Kr)).styleTween("transform",function(e){var n=t._prevNeedleAngleValueData,r=e;return function(t){var e=n*(1-t)+r*t;return"rotate("+e+"rad)"}}).call(function(e){return t.fnInvoke(t.opts.needleExitTransitionCustomize,e)}),a.exit().call(function(e){return t.fnInvoke(t.opts.needleExitSelectionCustomize,e)}).transition().call(this._transitionSetup(Vc,Zr)).call(function(e){return t.fnInvoke(t.opts.needleExitTransitionCustomize,e)}).remove(),this.emit(Wc)}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(Kc),(n=sr(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Bc);Xc.EVENTS=Yc;var Kc=["needleValue"],Zc={chartCss:"monte-arc-chart monte-polar-area-chart",innerRadius:30,outerRadiusProp:"",outerRadiusScale:d3.scaleSqrt,outerRadiusRange:function(t,e){var n=d3.min([t,e]),r=n/2,i=this.tryInvoke(this.opts.innerRadius,t,e);return[i,r]},outerRadiusDomainCustomize:function(t){return[0,t[1]]},outerRadius:function(){var t=this;return function(e){return t.getScaledProp("outerRadius","itemValue",e.data)}}},$c=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Zc]))}},{key:"_initCore",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.outerRadius=this.opts.outerRadiusScale(),this.updateRadiusRange(),this.pie.value(function(){return 1})}},{key:"_boundsUpdate",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_boundsUpdate",this).call(this),this.updateRadiusRange()}},{key:"_data",value:function(t){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t),this.updateRadiusDomain()}},{key:"updateRadiusRange",value:function(){var t=this.tryInvoke(this.opts.outerRadiusRange,this.width,this.height);we(t)&&Re(t)&&this.outerRadius.range(t)}},{key:"updateRadiusDomain",value:function(){var t=this.data(),e=this.opts.outerRadiusDomainCustomize,n=t?this._domainExtent(t):[];e&&(n=this.tryInvoke(e,n)),this.outerRadius.domain(n)}},{key:"_domainExtent",value:function(t){var e=this;return d3.extent(t,function(t){return e.getProp("itemValue",t)})}}]),e}(Bc),qc=new RegExp("^"+Rc+"*"),Jc="updatingLabels",Qc="updatedLabels",tp=[Jc,Qc],ep="label",np="area",rp="point",ip="ray",op="web",ap="line",sp="arc",up={chartCss:"monte-radar-chart",outerRadius:Rn,areaCustomize:null,areaProp:"value",areaCssScale:Oe,areaCssScaleAccessor:Tl.generateScaleAccessor("areaCssScale","area"),areaFillScale:Oe,areaFillScaleAccessor:Tl.generateScaleAccessor("areaFillScale","area"),areaStrokeScale:Oe,areaStrokeScaleAccessor:Tl.generateScaleAccessor("areaStrokeScale","area"),startAngle:0,endAngle:Pc,radiusScale:d3.scaleLinear,radiusDomainCustomize:null,suppressRadiusLabels:!1,radiusLabelLayer:"support",radiusLabelRotation:On,radiusLabelAngle:0,radiusLabelFillScale:Oe,radiusLabelFillScaleAccessor:function(t){return this.opts.radiusLabelFillScale(t)},radiusLabel:function(t){return t},radiusLabelXAdjust:"",radiusLabelYAdjust:"0.35em",suppressWeb:!1,webArcCustomize:null,webLevels:function(){return this.radius.ticks()},webInnerLevels:[],webMode:ap,suppressLabels:!1,labelPlacement:an,labelRotation:On,labelAngle:0,labelProp:"value",labelFillScale:Oe,labelFillScaleAccessor:Tl.generateScaleAccessor("labelFillScale","label"),label:function(t){return t.prop},labelXAdjust:"",labelYAdjust:"0.35em",suppressPoints:!1,pointProp:"",pointFillScale:Oe,pointFillScaleAccessor:Tl.generateScaleAccessor("pointFillScale","pointProp"),pointStrokeScale:Oe,pointStrokeScaleAccessor:Tl.generateScaleAccessor("pointStrokeScale","pointProp"),pointCssScale:Oe,pointCssScaleAccessor:Tl.generateScaleAccessor("pointCssScale","pointProp"),pointCss:"point",pointSize:64,pointSymbol:function(t){return t.type(d3.symbolCircle)},areaValuesProp:"values",rayIdProp:"id",rayValueProp:"value"},lp=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[up]))}},{key:"_initCore",value:function(){var t=this;sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.radius=this.tryInvoke(this.opts.radiusScale),this.areaRadialLine=d3.radialLine().radius(function(e){return t.radius(e.radius)}).angle(function(t){return t.angle}).curve(d3.curveLinearClosed),this.webArc=d3.arc().innerRadius(function(e){return t.radius(e.radius)}).outerRadius(function(e){return t.radius(e.radius)})}},{key:"_initCustomize",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.webArcCustomize&&this.fnInvoke(this.opts.webArcCustomize,this.webArc),this.opts.areaRadialLineCustomize&&this.fnInvoke(this.opts.areaRadialLineCustomize,this.areaRadialLine)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,cr(Be(np)),cr(Be(rp)),tp))}},{key:"_resetStyleDomains",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetStyleDomains",this).call(this),Me(this.opts.areaCssScale),Me(this.opts.areaFillScale),Me(this.opts.areaStrokeScale),Me(this.opts.labelFillScale),Me(this.opts.radiusLabelFillScale),Me(this.opts.pointFillScale),Me(this.opts.pointStrokeScale),Me(this.opts.pointCssScale)}},{key:"_boundsUpdate",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_boundsUpdate",this).call(this);var t=this.tryInvoke(this.opts.outerRadius,this.width,this.height);this.radius.range([0,t])}},{key:"_data",value:function(t){var n=this;sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t);var r={};this.displayData.forEach(function(t){var e=n.getProp("areaValues",t);e.forEach(function(t){var e=n.getProp("rayId",t);r[e]?r[e]++:r[e]=1})});var i=Object.keys(r),o=0;i.forEach(function(e){t.forEach(function(t){o<t[e]&&(o=t[e])})});var a=we(this.opts.radiusDomainCustomize)?this.tryInvoke(this.opts.radiusDomainCustomize,[0,o]):[0,o];this.radius.domain(a);var s=this.__rayData(i),u=s.rayAngleMap,l=s.rayData;this.rayAngleMap=u,this.rayData=l,this.props=i}},{key:"__rayData",value:function(t){for(var e=this.tryInvoke(this.opts.startAngle),n=this.tryInvoke(this.opts.endAngle),r=t.length,i=(n-e)/r,o={},a=[],s=e,u=0;u<r;u++)o[t[u]]=s,a.push({prop:t[u],angle:s}),s+=i;return{rayAngleMap:o,rayData:a}}},{key:"_update",value:function(){var t=this._updateRays(),e=this._updateAreas();this._updateWeb();var n=this.tryInvoke(this.opts.suppressPoints);n||this._updatePoints(e),this.opts.suppressLabels||this._updateRayLabels(t),this.opts.suppressRadiusLabels||this._updateRadiusLabels(t)}},{key:"_updateAreas",value:function(){var t=this,e=this.draw.selectAll(".monte-radar-area-grp").data(this.displayData,this.opts.dataKey),n=e.enter().append("g").classed("monte-radar-area-grp",!0).append("path").classed("monte-radar-area",!0).call(this.__bindCommonEvents(np));return this._updateAreaSelections(n,Xr),this._updateAreaSelections(e.selectAll(".monte-radar-area"),Kr),e.exit().call(function(e){return t.fnInvoke(t.opts.areaExitSelectionCustomize,e)}).transition().call(this._transitionSetup(np,Zr)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.areaExitTransitionCustomize,e)}).remove(),e.merge(e.enter().selectAll(".monte-radar-area-grp"))}},{key:"_updateAreaSelections",value:function(t,e){var n=this,r=np+cl(e)+"SelectionCustomize",i=np+cl(e)+"TransitionCustomize";t.attr("class",function(t,e){return n._buildCss(["monte-radar-area",n.opts.areaCss,n.opts.areaCssScaleAccessor,t.css],t,e)}).call(function(t){return n.fnInvoke(n.opts[r],t)}).transition().call(this._transitionSetup(np,e)).attr("d",function(t){var e=n.getProp("areaValues",t),r=[];return n.props.forEach(function(t){var i=n.getPropKey("rayId"),o=n.getPropKey("rayValue"),a=Bn(e,i,t,o);r.push({radius:a,angle:n.rayAngleMap[t]})}),n.areaRadialLine(r)}).style("fill",this.optionReaderFunc("areaFillScaleAccessor")).call(function(t){return n.fnInvoke(n.opts[i],t)})}},{key:"_updateRays",value:function(){var t=this,e=this.tryInvoke(this.opts.outerRadius,this.width,this.height),n=this.support.selectAll(".monte-radar-ray-grp").data(this.rayData);return n.enter().append("g").classed("monte-radar-ray-grp",!0).append("line").classed("monte-radar-ray",!0).attr("x0",0).attr("y0",0).attr("x1",function(t){return $e(e,t.angle)[0]}).attr("y1",function(t){return $e(e,t.angle)[1]}).attr("opacity",0).call(function(e){return t.fnInvoke(t.opts.rayEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(ip,Xr)).attr("opacity",1).call(function(e){return t.fnInvoke(t.opts.rayEnterTransitionCustomize,e)}),n.select(".monte-radar-ray").call(function(e){return t.fnInvoke(t.opts.rayUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup(ip,Kr)).attr("x1",function(t){return $e(e,t.angle)[0]}).attr("y1",function(t){return $e(e,t.angle)[1]}).attr("opacity",1).call(function(e){return t.fnInvoke(t.opts.rayUpdateTransitionCustomize,e)}),n.call(function(e){return t.fnInvoke(t.opts.rayExitSelectionCustomize,e)}).transition().call(this._transitionSetup(ip,Zr)).attr("opacity",0).call(function(e){return t.fnInvoke(t.opts.rayExitTransitionCustomize,e)}),n.merge(n.enter().selectAll(".monte-radar-ray-grp"))}},{key:"_updateRayLabels",value:function(t){var e=this;this.emit(Jc);var n=this.tryInvoke(this.opts.labelPlacement),r=this.tryInvoke(n.css);Tn(this.bound,qc),this.classed(r,!0),t.each(function(t,n,r){var i=d3.select(r[n]);e._updateRayLabel(i,t,n,r)}),this.emit(Qc)}},{key:"_updateRayLabel",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-radar-ray-label").data([e]),a=this.tryInvoke(this.opts.labelPlacement),s=this.tryInvoke(a.radius,this.width,this.height),u=this.tryInvoke(s,e,n,r),l=e.angle,c=Je(this.tryInvoke(this.opts.labelRotation,e.angle,n,r)),p=$e(u,l);o.enter().append("text").attr("class","monte-radar-ray-label").attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).attr("transform",function(){return"translate("+p+") rotate("+c+")"}).attr("angle",l).attr("radius",s).style("opacity",0).style("fill",this.optionReaderFunc("labelFillScaleAccessor")).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelEnterSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings(ep,Xr);i._transitionConfigure(t,o,e,n,r)}).style("opacity",1).call(function(t){return i.fnInvoke(i.opts.labelEnterTransitionCustomize,t)}),o.style("fill",this.optionReaderFunc("labelFillScaleAccessor")).style("opacity",1).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateSelectionCustomize,t)}).transition().call(function(t){var o=i._transitionSettings(ep,Kr);i._transitionConfigure(t,o,e,n,r)}).attrTween("transform",function(){var t=wn(o.attr("transform")),e={angle:+o.attr("angle"),radius:+o.attr("radius"),rotate:t.rotate||0},n={angle:l,radius:u,rotate:c};return nn(e,n,u)}).attr("angle",l).attr("radius",s).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}).call(function(t){return i.fnInvoke(i.opts.labelUpdateTransitionCustomize,t)}),o.exit().call(function(t){return i.fnInvoke(i.opts.labelExitSelectionCustomize,t)}).transition().call(function(t){
var o=i._transitionSettings(ep,Zr);i._transitionConfigure(t,o,e,n,r)}).style("opacity",0).call(function(t){return i.fnInvoke(i.opts.labelExitTransitionCustomize,t)}).remove()}},{key:"_updateRadiusLabels",value:function(){var t=this,e=this.tryInvoke(this.opts.webLevels),n=this.tryInvoke(this.opts.radiusLabelLayer),r=this[n].selectAll(".monte-radar-radius-label").data(e),i=function(e,n,r){var i=t.radius(e),o=t.tryInvoke(t.opts.radiusLabelAngle,o,n,r),a=$e(i,o),s=t.tryInvoke(t.opts.radiusLabelRotation,o,n,r),u=Je(s);return"translate("+a+") rotate("+u+")"};r.enter().append("text").classed("monte-radar-radius-label",!0).attr("class","monte-radar-ray-label").attr("dx",this.optionReaderFunc("radiusLabelXAdjust")).attr("dy",this.optionReaderFunc("radiusLabelYAdjust")).style("opacity",0).style("fill",this.optionReaderFunc("radiusLabelFillScaleAccessor")).attr("transform","translate(0, 0)").text(this.optionReaderFunc("radiusLabel")).call(function(e){return t.fnInvoke(t.opts.radiusLabelEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(ep,Xr)).style("opacity",1).attr("transform",i).call(function(e){return t.fnInvoke(t.opts.radiusLabelEnterTransitionCustomize,e)}),r.style("fill",this.optionReaderFunc("radiusLabelFillScaleAccessor")).style("opacity",1).call(function(e){return t.fnInvoke(t.opts.radiusLabelUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup(ep,Kr)).attr("transform",i).text(this.optionReaderFunc("radiusLabel")).call(function(e){return t.fnInvoke(t.opts.radiusLabelUpdateTransitionCustomize,e)}),r.exit().call(function(e){return t.fnInvoke(t.opts.radiusLabelExitSelectionCustomize,e)}).transition().call(this._transitionSetup(ep,Zr)).style("opacity",0).call(function(e){return t.fnInvoke(t.opts.radiusLabelExitTransitionCustomize,e)}).remove()}},{key:"_updateWeb",value:function(){var t=this.tryInvoke(this.opts.webMode);if(t===sp)this._updateWebArc();else{if(t!==ap)throw fl.InvalidEnumOption("webMode",t);this._updateWebLine()}}},{key:"_updateWebArc",value:function(){var t=this,e=this.tryInvoke(this.opts.webInnerLevels),n=this.tryInvoke(this.opts.webLevels),r=this.tryInvoke(this.opts.startAngle),i=this.tryInvoke(this.opts.endAngle),o=e.map(function(t){return{radius:t,startAngle:r,endAngle:i,type:"minor"}});n.forEach(function(t){o.push({radius:t,startAngle:r,endAngle:i,type:"major"})});var a=this.bg.selectAll(".monte-radar-web").data(o);a.enter().append("path").attr("class",function(t){return t.type}).classed("monte-radar-web",!0).attr("d",function(e){return t.webArc(e)}).call(function(e){return t.fnInvoke(t.opts.webEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(op,Xr)).call(function(e){return t.fnInvoke(t.opts.webEnterTransitionCustomize,e)}),a.call(function(e){return t.fnInvoke(t.opts.webUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup(op,Kr)).attr("d",function(e){return t.webArc(e)}).call(function(e){return t.fnInvoke(t.opts.webUpdateTransitionCustomize,e)}),a.exit().call(function(e){return t.fnInvoke(t.opts.webExitSelectionCustomize,e)}).transition().call(this._transitionSetup(op,Zr)).call(function(e){return t.fnInvoke(t.opts.webExitTransitionCustomize,e)}).remove()}},{key:"_updateWebLine",value:function(){var t=this,e=this.tryInvoke(this.opts.webInnerLevels),n=this.tryInvoke(this.opts.webLevels),r=e.map(function(e){return{radius:e,values:t.rayData.map(function(t){return{radius:e,angle:t.angle}}),type:"minor"}});n.forEach(function(e){r.push({radius:e,values:t.rayData.map(function(t){return{radius:e,angle:t.angle}}),type:"major"})});var i=this.bg.selectAll(".monte-radar-web").data(r);i.enter().append("path").attr("class",function(t){return t.type}).classed("monte-radar-web",!0).attr("d",function(e){return t.areaRadialLine(e.values)}).call(function(e){return t.fnInvoke(t.opts.webEnterSelectionCustomize,e)}).transition().call(this._transitionSetup(op,Xr)).call(function(e){return t.fnInvoke(t.opts.webEnterTransitionCustomize,e)}),i.call(function(e){return t.fnInvoke(t.opts.webUpdateSelectionCustomize,e)}).transition().call(this._transitionSetup(op,Kr)).attr("d",function(e){return t.areaRadialLine(e.values)}).call(function(e){return t.fnInvoke(t.opts.webUpdateTransitionCustomize,e)}),i.exit().call(function(e){return t.fnInvoke(t.opts.webExitSelectionCustomize,e)}).transition().call(this._transitionSetup(op,Zr)).call(function(e){return t.fnInvoke(t.opts.webExitTransitionCustomize,e)}).remove()}},{key:"_updatePoints",value:function(t){var e=this;t.each(function(t,n,r){return e._updateAreaPoints(r[n],t,n)})}},{key:"_updateAreaPoints",value:function(t,e,n){var r=this,i=d3.select(t),o=Object.keys(e).map(function(t){return{prop:t,value:e[t]}}),a=i.selectAll(".monte-point").data(o),s=function(t,e){var n=r.tryInvoke(r.opts.pointSize,t,e),i=d3.symbol().size(n),o=r.opts.pointSymbol(i,t,e);return o(t,e)};a.enter().append("path").call(this.__bindCommonEvents(rp)).attr("d",s).attr("transform",function(t){return r._translatePoint(t)}).attr("class",function(t){return r._buildCss(["monte-point",r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n)}).call(function(t){return r.fnInvoke(r.opts.pointEnterSelectionCustomize,t)}).transition().call(this._transitionSetup(rp,Xr)).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return r._translatePoint(t)}).call(function(t){return r.fnInvoke(r.opts.pointEnterTransitionCustomize,t)}),a.attr("class",function(t){return r._buildCss(["monte-point",r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n)}).call(function(t){return r.fnInvoke(r.opts.pointUpdateSelectionCustomize,t)}).transition().call(this._transitionSetup(rp,Kr)).style("fill",this.optionReaderFunc("pointFillScaleAccessor")).style("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return r._translatePoint(t)}).attr("d",s).call(function(t){return r.fnInvoke(r.opts.pointUpdateTransitionCustomize,t)}),a.exit().call(function(t){return r.fnInvoke(r.opts.pointExitSelectionCustomize,t)}).transition().call(this._transitionSetup(rp,Zr)).style("opacity",0).call(function(t){return r.fnInvoke(r.opts.pointExitTransitionCustomize,t)}).remove()}},{key:"_translatePoint",value:function(t){var e=this.rayAngleMap[t.prop],n=$e(this.radius(t.value),e);return"translate("+n[0]+", "+n[1]+")"}}]),e}(Tl);lp.EVENTS=tp;var cp={chartCss:"monte-arc-chart monte-wedge-chart",piePadAngle:0,arcWedgeEnter:function(t){return{startAngle:t.startAngle,endAngle:t.startAngle,value:t.value,padAngle:t.padAngle,index:t.index}}},pp=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[cp]))}},{key:"_initCore",value:function(){sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.pie.sortValues(function(t,e){return t.value-e.value})}},{key:"_data",value:function(t){var n,r,i;this.wedgeValueData=t,this.rawData=t;for(var o=this.tryInvoke(this.opts.itemValueProp),a=[(n={},ar(n,o,t),ar(n,"css","monte-wedge"),n),(r={},ar(r,o,100-t),ar(r,"css","monte-arc-placeholder"),r)],s=arguments.length,u=Array(s>1?s-1:0),l=1;l<s;l++)u[l-1]=arguments[l];return(i=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(i,[this,a].concat(u))}},{key:"wedgeValue",value:function(t){return t===yl?this.wedgeValueData:(this.data(t),this)}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(hp),(n=sr(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Bc),hp=["wedgeValue"],dp="horizontal",fp="vertical",yp="none",vp="any",_p=Object.freeze({HORIZONTAL:dp,VERTICAL:fp,NONE:yp,ANY:vp}),gp=0,bp=-1/8*Ic,mp=-.25*Ic,kp=-3/8*Ic,Sp=-Cc,xp=-5/8*Ic,Ap=-.75*Ic,Op=-7/8*Ic,Ip=Ic,Cp=7/8*Ic,Pp=.75*Ic,Ep=5/8*Ic,Rp=Cc,wp=3/8*Ic,jp=.25*Ic,Tp=1/8*Ic,zp=gp,Dp=bp,Lp=mp,Fp=kp,Bp=Sp,Mp=xp,Up=Ap,Np=Op,Hp=Ip,Wp=Cp,Yp=Pp,Vp=Ep,Gp=Rp,Xp=wp,Kp=jp,Zp=Tp,$p=Object.freeze({NORTH:gp,NORTH_NORTHWEST:bp,NORTHWEST:mp,WEST_NORTHWEST:kp,WEST:Sp,WEST_SOUTHWEST:xp,SOUTHWEST:Ap,SOUTH_SOUTHWEST:Op,SOUTH:Ip,SOUTH_SOUTHEAST:Cp,SOUTHEAST:Pp,EAST_SOUTHEAST:Ep,EAST:Rp,EAST_NORTHEAST:wp,NORTHEAST:jp,NORTH_NORTHEAST:Tp,TOP:zp,TOP_BY_TOP_LEFT:Dp,TOP_LEFT:Lp,LEFT_BY_TOP_LEFT:Fp,LEFT:Bp,LEFT_BY_BOTTOM_LEFT:Mp,BOTTOM_LEFT:Up,BOTTOM_BY_BOTTOM_LEFT:Np,BOTTOM:Hp,BOTTOM_BY_BOTTOM_RIGHT:Wp,BOTTOM_RIGHT:Yp,RIGHT_BY_BOTTOM_RIGHT:Vp,RIGHT:Gp,RIGHT_BY_TOP_RIGHT:Xp,TOP_RIGHT:Kp,TOP_BY_TOP_RIGHT:Zp}),qp=Object.freeze({d3:Jr,direction:_p,math:Ec,polar:$p,CLICK:pr,TOUCHSTART:hr,TOUCHEND:dr,MOUSEOVER:fr,MOUSEOUT:yr,SUPPRESSED_ERROR:vr,EXTENSION:_r,BEFORE_RENDER:gr,RENDERED:br,BEFORE_UPDATE:mr,UPDATED:kr,BEFORE_BOUNDS_UPDATE:Sr,BOUNDS_UPDATED:xr,BEFORE_CLEAR:Ar,CLEARED:Or,BEFORE_DESTROY:Ir,DESTROYED:Cr,BEFORE_OPTION_CHANGE:Pr,OPTION_CHANGED:Er,BEFORE_STYLE_DOMAINS_RESET:Rr,STYLE_DOMAINS_RESET:wr,INTERACTION_EVENTS:jr,INTERACTION_SHOW_EVENTS:Tr,INTERACTION_HIDE_EVENTS:zr,CHART_SUPPORT_EVENTS:Dr,CHART_LIFECYCLE_EVENTS:Lr,EXTENSION_LIFECYCLE_EVENTS:Fr,ACTION_ADD:Br,ACTION_REMOVE:Mr,ACTION_CSS_OVER:Ur,ACTION_CSS_TOUCH:Nr,INTERACTION_EVENT_CSS_MAP:Hr,UNDEF:yl}),Jp={layer:"bg",binding:[Ir,br,kr,xr],optionsTriggerUpdate:!1,eventPrefix:null,customEvents:[]},Qp=function(){function t(e){ir(this,t),this._initOptions(e),this._initPublicEvents.apply(this,cr(Fr).concat(cr(this.opts.customEvents))),this.lastUpdateEvent=""}return or(t,[{key:"_initOptions",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.opts=De.apply(void 0,e.concat([Jp])),!this.opts.eventPrefix)throw fl.RequiredOption("eventPrefix");this.opts.binding.indexOf(Ir)===-1&&this.opts.binding.push(Ir)}},{key:"_initPublicEvents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._events=e}},{key:"setChart",value:function(t){if(this.chart&&this.chart!==t)throw new hl("An extension should only have the chart set once.");this.chart=t;var e=this.tryInvoke(this.opts.layer);return e&&(this.layer=this.chart[e]),this.__extId=Sl.getNextExtensionId(),this}},{key:"option",value:function(t,e){return e===yl?this.opts[t]:(this.opts[t]=e,this._shouldOptionUpdate(t)&&this.cachedChart&&this.fire(Er,t),this)}},{key:"_shouldOptionUpdate",value:function(t){return this.opts.optionsTriggerUpdate}},{key:"on",value:function(t,e){if(!this.dispatch){var n;this.dispatch=(n=d3).dispatch.apply(n,cr(this.events))}return e?(this.dispatch.on(t,e),this):this.dispatch.on(t)}},{key:"__notify",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.dispatch){var o;(o=this.dispatch).call.apply(o,[t,this].concat(r))}(e=this.chart).emit.apply(e,["extension",this.opts.eventPrefix+":"+t,this].concat(r))}},{key:"emit",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.__notify.apply(this,[t].concat(n))}},{key:"clear",value:function(){return this.__notify(Ar),this._clearDataElements(),this.__notify(Or),this}},{key:"_clearDataElements",value:function(){this._extCreateSelection.remove()}},{key:"fire",value:function(t){if(!this.chart)throw new hl("A chart must be associated with the extension prior to use.");try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];switch(t){case Ir:this.destroy();break;case xr:this.updateBounds.apply(this,n);break;case br:this.render.apply(this,n);break;case Er:this._optionChanged.apply(this,n);break;default:this.lastUpdateEvent=t,this.update.apply(this,n)}}catch(t){console&&console.error&&console.error(t),this.__notify(vr,t,t.stack||"No stack available.")}}},{key:"update",value:function(){this.__notify(mr),this._update.apply(this,arguments),this.__notify(kr)}},{key:"_update",value:function(t,e){throw hl.UnimplementedMethod("Update","_update","extension")}},{key:"render",value:function(){this._render&&(this.__notify(gr),this._render.apply(this,arguments),this.__notify(br)),this.rendered=!0}},{key:"updateBounds",value:function(){this._boundsUpdate&&(this.__notify(Sr),this._boundsUpdate.apply(this,arguments),this.__notify(xr))}},{key:"_optionChanged",value:function(){var t=arguments.length<=0?void 0:arguments[0],e="_option"+Ue(t);this.__notify(Pr,t),this[e]?this[e]():this.update.apply(this,arguments),this.__notify(Er,t)}},{key:"tryInvoke",value:function(t){try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Pe(t)?t.call.apply(t,[this].concat(n)):t}catch(t){return console&&console.error&&console.error(t),this.__notify(vr,t,t.stack||"No stack available."),null}}},{key:"getProp",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=t+"Prop",i=this.opts[r];return i?e[i]:n}},{key:"_buildCss",value:function(t,e,n,r){var i=this,o=[],a=Array.isArray(t)?t:[t];return a.forEach(function(t){we(t)&&o.push(i.tryInvoke(t,e,n,r))}),o.join(" ")}},{key:"getExtId",value:function(){return this.__extId}},{key:"_getExtAttr",value:function(){return"monte-ext-"+this.getExtId()}},{key:"_setExtAttrs",value:function(t){t.attr(this._getExtAttr(),"")}},{key:"_extCreateSelection",value:function(t){var e=this._getExtAttr(),n="["+e+"]";return t&&(n+="."+t),this.layer.selectAll(n)}},{key:"destroy",value:function(){this.__notify(Ir),this._destroy(),this.__notify(Cr)}},{key:"_destroy",value:function(){}},{key:"toString",value:function(){return this.constructor.name}}],[{key:"featureEventName",value:function(t,e){return"chart"===t?e:t+":"+e}}]),t}(),th={eventPrefix:"arc",startAngle:0,endAngle:Pc,arcCss:"monte-ext-arc",innerRadius:0,outerRadius:100,cornerRadius:0},eh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[th])),this.arc=d3.arc().innerRadius(this.tryInvoke(this.opts.innerRadius)).outerRadius(this.tryInvoke(this.opts.outerRadius)).cornerRadius(this.tryInvoke(this.opts.cornerRadius))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.arcCss),n=this.tryInvoke(this.opts.startAngle),r=this.tryInvoke(this.opts.endAngle),i=we(n)&&we(r)?{startAngle:n,endAngle:r}:{startAngle:we(n)?n:r,endAngle:we(n)?n:r},o=this._extCreateSelection().data([i]);o.enter().append("path").call(this._setExtAttrs.bind(this)).attr("class",e).transition().call(this.chart._transitionSetup("extArc",Xr)).attrTween("d",function(e){return en(t.arc,t.prev,e)}).on("end",function(e){return t.prev=e}),o.transition().call(this.chart._transitionSetup("extArc",Kr)).attrTween("d",function(e){return en(t.arc,t.prev,e)}).on("end",function(e){return t.prev=e}),o.exit().transition().call(this.chart._transitionSetup("extArc",Zr)).style("opacity",.01).remove()}}]),e}(Qp),nh=Object.freeze({commonEventNames:Be,removeClassByPattern:Tn,getTreeSetting:je,invokeMany:Mn,isArray:Re,isDefined:we,isFunc:Pe,isNumeric:Ie,isObject:Ee,isString:Ce,mergeOptions:De,ReplacePreceding:_l,noop:Oe,areCoterminalAngles:Ze,getPolarCoord:$e,degreesToRadians:qe,radiansToDegrees:Je,arcBisect:Qe,wedgeBisect:tn,resetScaleDomain:Me,camelCase:sl,kebabCase:ul,snakeCase:ll,pascalCase:Ue,upperFirst:cl,readTransforms:wn}),rh={binding:new _l(["axisRendered"]),layer:"support",eventPrefix:"axisRotateLabel",axis:"x",rotation:45,translate:function(t,e,n,r){return"y"===r.substring(0,1)?[0,10]:[10,0]},transformCustomize:Oe},ih=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[rh]))}},{key:"_update",value:function(t){var e=this,n=this.tryInvoke(this.opts.axis);if(n===t){var r=this.layer.selectAll("."+n+"-axis.axis .tick text");r.attr("transform",function(t,r,i){var o=wn(this.getAttribute("transform")),a=e.tryInvoke(e.opts.rotation,t,r,i,n);we(a)&&(o.rotate=[a]);var s=e.tryInvoke(e.opts.translate,t,r,i,n);return we(s)&&(o.translate=[s]),e.opts.transformCustomize&&Pe(e.opts.transformCustomize)&&e.opts.transformCustomize!==Oe&&(o=e.opts.transformCustomize(o)),jn(o)})}}}]),e}(Qp),oh={binding:new _l(["axisRendered"]),layer:"support",eventPrefix:"axislabelwrap",axis:"x",labelCustomize:Oe,lineHeightEm:1.1,maxWidth:Number.POSITIVE_INFINITY},ah=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[oh]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.axis),n=+this.tryInvoke(this.opts.lineHeightEm),r=this.tryInvoke(this.opts.maxWidth),i=this.layer.selectAll("."+e+"-axis.axis .tick text");this.layer.select("."+e+"-axis").transition().on("end",function(){i.call(Un,r,n).call(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.tryInvoke.apply(t,[t.opts.labelCustomize].concat(n))})})}}]),e}(Qp),sh={featurePrefix:"point",eventPrefix:"crosshair",crosshairCss:"",lines:["bottom","left"],alignmentShift:Wr,showBindings:Tr,hideBindings:zr,topCustomize:Oe,leftCustomize:Oe,rightCustomize:Oe,bottomCustomize:Oe},uh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=this,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(i,[sh]));var a=this.tryInvoke(this.opts.showBindings),s=this.tryInvoke(this.opts.hideBindings),u=this.tryInvoke(this.opts.featurePrefix);Re(u)||(u=[u]),this.showEvents=[],this.hideEvents=[],u.forEach(function(t){a.forEach(function(e){var r=Qp.featureEventName(t,e);n.opts.binding.push(r),n.showEvents.push(r)}),s.forEach(function(e){var r=Qp.featureEventName(t,e);n.opts.binding.push(r),n.hideEvents.push(r)})})}},{key:"_update",value:function(){function t(t){var e=d3.select(this),r=n.opts[t+"Customize"],i={x1:n.tryInvoke(s[t].x1,n.activeFeatureDatum),y1:n.tryInvoke(s[t].y1,n.activeFeatureDatum),x2:n.tryInvoke(s[t].x2,n.activeFeatureDatum),y2:n.tryInvoke(s[t].y2,n.activeFeatureDatum)};we(r)&&Pe(r)&&r!==Oe&&(i=n.tryInvoke(r,i)),e.attr("x1",i.x1).attr("y1",i.y1).attr("x2",i.x2).attr("y2",i.y2)}var e=this,n=this,r=this.tryInvoke(this.opts.crosshairCss),i=this.tryInvoke(this.opts.lines),o=this._extCreateSelection().data(i).order(),a=this.tryInvoke(this.opts.alignmentShift),s={top:{x1:function(t){return e.chart.getScaledProp("x",t)+a},y1:0,x2:function(t){return e.chart.getScaledProp("x",t)+a},y2:function(t){return e.chart.getScaledProp("y",t)}},left:{x1:0,y1:function(t){return e.chart.getScaledProp("y",t)+a},x2:function(t){return e.chart.getScaledProp("x",t)},y2:function(t){return e.chart.getScaledProp("y",t)+a}},right:{x1:function(t){return e.chart.getScaledProp("x",t)},y1:function(t){return e.chart.getScaledProp("y",t)+a},x2:this.chart.width,y2:function(t){return e.chart.getScaledProp("y",t)+a}},bottom:{x1:function(t){return e.chart.getScaledProp("x",t)+a},y1:function(t){return e.chart.getScaledProp("y",t)},x2:function(t){return e.chart.getScaledProp("x",t)+a},y2:this.chart.height}};if("updated"===this.lastUpdateEvent)o.enter().append("line").call(this._setExtAttrs.bind(this)).attr("opacity",0).attr("class",r).classed("monte-ext-crosshair",!0),this.activeFeatureDatum&&o.transition().call(this.chart._transitionSetup("extCrosshair",Kr)).each(t),o.exit().transition().call(this.chart._transitionSetup("extCrosshair",Zr)).attr("opacity",0).remove();else if(this.isShowEvent(this.lastUpdateEvent)){var u=arguments.length<=0?void 0:arguments[0];this.activeFeatureDatum=u,o.interrupt().attr("opacity",1).each(t)}else this.isHideEvent(this.lastUpdateEvent)&&(this.activeFeatureDatum=null,o.interrupt().attr("opacity",0))}},{key:"isShowEvent",value:function(t){return this.showEvents.indexOf(t)>-1}},{key:"isHideEvent",value:function(t){return this.hideEvents.indexOf(t)>-1}}]),e}(Qp),lh={eventPrefix:"frame",frameLineCss:"monte-ext-frame-line",edges:["top","right","bottom","left"],alignmentShift:Wr},ch=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[lh]))}},{key:"_shouldOptionUpdate",value:function(t){return"edges"===t||"alignmentShift"===t}},{key:"_update",value:function(){var t=this.chart,e=this.tryInvoke(this.opts.frameLineCss),n=this.tryInvoke(this.opts.edges),r=this._extCreateSelection().data(n).order(),i=this.tryInvoke(this.opts.alignmentShift),o={top:[[0+i,0+i],[t.width+i,0+i]],right:[[t.width+i,0+i],[t.width+i,t.height+i]],bottom:[[0+i,t.height+i],[t.width+i,t.height+i]],left:[[0+i,0+i],[0+i,t.height+i]]};r.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",e).attr("x1",function(t){return o[t][0][0]}).attr("y1",function(t){return o[t][0][1]}).attr("x2",function(t){return o[t][1][0]}).attr("y2",function(t){return o[t][1][1]}),r.transition().call(this.chart._transitionSetup("extFrame",Kr)).attr("x1",function(t){return o[t][0][0]}).attr("y1",function(t){return o[t][0][1]}).attr("x2",function(t){return o[t][1][0]}).attr("y2",function(t){return o[t][1][1]}),r.exit().remove()}}]),e}(Qp),ph={eventPrefix:"grid",scalePrefixes:["x","y"],axisLayer:"support",prefixCssMap:{x:"v-line",y:"h-line"},lineCss:"monte-ext-grid-line",binding:new _l(["axisRendered"]),x1Adjust:0,x2Adjust:0,y1Adjust:0,y2Adjust:0,orient:function(t){if("x"===t.charAt(0))return fp;if("y"===t.charAt(0))return dp;throw new fl("Unknown grid direction for scale "+t)}},hh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ph]))}},{key:"_update",value:function(t,e,n){var r=this,i=this.chart;if(!we(n)){var o=this.chart.hasRendered?Kr:Xr,a=this.tryInvoke(this.opts.axisLayer),s=this.chart[a];n=s.transition().call(this.chart._transitionSetup("axis",o))}var u=this.tryInvoke(this.opts.prefixCssMap);i.forEachAxisScale(function(t){if(u[t]){var e=r.getCss(t,u),o=i[t],a=i[t+"Axis"],s=r.tryInvoke(r.opts.orient,t);if(e&&o&&a){var l=a.tickValues(),c=a.tickArguments(),p=null==l?o.ticks?o.ticks.apply(o,c):o.domain():l,h=r._extCreateSelection(e).data(p,function(t){return t});r._updateTicks(h,n,{axesChart:i,axis:a,axisTransition:n,css:e,orient:s,scale:o,scaleName:t,lineCss:r.option("lineCss")})}}})}},{key:"_updateTicks",value:function(t,e,n){var r=[n.lineCss,n.css].join(" "),i=this.tryInvoke(this.opts.x1Adjust),o=this.tryInvoke(this.opts.x2Adjust),a=this.tryInvoke(this.opts.y1Adjust),s=this.tryInvoke(this.opts.y2Adjust);n.orient===dp?(t.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",r).attr("x1",0).attr("x2",0).attr("x1",0+i).attr("x2",n.axesChart.width+o).attr("y1",Wr+a).attr("y2",Wr+s).attr("transform",function(t){return"translate(0,"+n.scale(t)+")"}).style("opacity",0).transition(e).style("opacity",1),t.transition(e).attr("x1",function(){return 0+i}).attr("x2",function(){return n.axesChart.width+o}).attr("transform",function(t){return"translate(0,"+n.scale(t)+")"}).style("opacity",1)):n.orient===fp&&(t.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",r).attr("x1",Wr+i).attr("x2",Wr+o).attr("y1",0+a).attr("y2",n.axesChart.height+s).attr("transform",function(t){return"translate("+n.scale(t)+", 0)"}).style("opacity",0).transition(e).style("opacity",1),t.transition(e).attr("y1",function(){return 0+a}).attr("y2",function(){return n.axesChart.height+s}).attr("transform",function(t){return"translate("+n.scale(t)+", 0)"}).style("opacity",1)),t.exit().transition(e).style("opacity",0).remove()}},{key:"getCss",value:function(t,e){for(var n in e)if(this.opts.prefixCssMap.hasOwnProperty(n)){var r=t.substr(0,n.length)===n;if(r)return this.tryInvoke(this.opts.prefixCssMap[n])}return""}}]),e}(Qp),dh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_updateTicks",value:function(t,n,r){r.orient===dp&&sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateTicks",this).call(this,t,n,r)}}]),e}(hh),fh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_updateTicks",value:function(t,n,r){r.orient===fp&&sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateTicks",this).call(this,t,n,r)}}]),e}(hh),yh={eventPrefix:"label",labelCss:"monte-ext-label",text:"",x:0,y:0,dy:"0.35em",dx:0,anchor:"start",labelCustomize:Oe,maxWidth:Number.POSITIVE_INFINITY},vh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[yh]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.labelCss),n=this.tryInvoke(this.opts.text),r=+this.tryInvoke(this.opts.maxWidth),i=this._extCreateSelection().data([n]);i.enter().append("text").call(this._setExtAttrs.bind(this)).attr("class",e).merge(i).html(function(t){return t}).attr("text-anchor",this.tryInvoke(this.opts.anchor)).call(function(e){return t._checkMaxWidth(e,r)}).attr("x",this.tryInvoke(this.opts.x)).attr("y",this.tryInvoke(this.opts.y)).attr("dx",this.tryInvoke(this.opts.dx)).attr("dy",this.tryInvoke(this.opts.dy)).call(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.tryInvoke.apply(t,[t.opts.labelCustomize].concat(n))}),i.exit().remove()}},{key:"_checkMaxWidth",value:function(t,e){if(Ie(e)&&e>0){var n=t.node(),r=n.getBBox().width;if(r>e){var i=Nn(n),o=i*e/r;this.origFontSize||(this.origFontSize=i),t.style("font-size",o+"px")}else if(we(this.origFontSize)&&r<e){var a=Nn(n),s=a*e/r;s>this.origFontSize?t.style("font-size",this.origFontSize+"px"):t.style("font-size",s+"px")}}}}]),e}(Qp),_h={eventPrefix:"polargrid",startAngle:0,endAngle:Pc,arcRadii:[100],arcCss:"monte-ext-polar-grid-arc",arcSpecificCss:null,arcSort:function(t,e){return e-t},arcWidth:0,cornerRadius:0},gh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[_h]));var o=this.tryInvoke(this.opts.arcWidth);this.arc=d3.arc().innerRadius(function(t){return t.radius}).outerRadius(function(t){return t.radius+o}).cornerRadius(this.tryInvoke(this.opts.cornerRadius))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.arcRadii),n=e.sort(this.opts.arcSort),r=this._extCreateSelection().data(n),i=this.tryInvoke(this.opts.startAngle),o=this.tryInvoke(this.opts.endAngle),a=we(i)&&we(o)?{startAngle:i,endAngle:o}:{startAngle:we(i)?i:o,endAngle:we(i)?i:o};r.enter().append("path").call(this._setExtAttrs.bind(this)).merge(r).attr("class",this.tryInvoke(this.opts.arcCss)).attr("d",function(e){return a.radius=e,t.arc(a)}),r.exit().remove()}}]),e}(Qp),bh={eventPrefix:"polarline",layer:"overlay",angle:0,lineCss:"monte-ext-polar-line",innerRadius:0,outerRadius:100},mh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[bh]))}},{key:"_render",value:function(){this.innerArc=d3.arc(),this.outerArc=d3.arc()}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.innerRadius),n=this.tryInvoke(this.opts.outerRadius),r=this.tryInvoke(this.opts.lineCss),i=this.tryInvoke(this.opts.angle),o=this._extCreateSelection().data([{startAngle:i,endAngle:i}]),a=o.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",r);this.innerArc.innerRadius(e).outerRadius(e),this.outerArc.innerRadius(n).outerRadius(n),we(i)?a.merge(o).transition().call(this.chart._transitionSetup("extPolarLine",Kr)).attr("x1",function(e){return t.innerArc.centroid(e)[0]}).attr("y1",function(e){return t.innerArc.centroid(e)[1]}).attr("x2",function(e){return t.outerArc.centroid(e)[0]}).attr("y2",function(e){return t.outerArc.centroid(e)[1]}):a.merge(o).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0),o.exit().remove()}}]),e}(Qp),kh={layer:"draw",eventPrefix:"polarRotateLabel",labelCss:"monte-arc-label",rotation:bn},Sh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[kh]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.labelCss),n=this.layer.selectAll("."+e);n.attr("transform",function(e,n,r){var i=d3.select(r[n]),o=Je(t.tryInvoke(t.opts.rotation,e,n,r)),a=wn(i.attr("transform"));return a.rotate=[o],jn(a)})}}]),e}(Qp),xh={eventPrefix:"polarticks",startAngle:0,endAngle:Pc,tickInterval:1/8*Pc,innerRadius:0,outerRadius:100,tickCss:"monte-ext-polar-tick",suppressEnd:!1},Ah=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[xh]));var o=this.tryInvoke(this.opts.innerRadius),a=this.tryInvoke(this.opts.outerRadius);this.innerArc=d3.arc().innerRadius(o).outerRadius(o),this.outerArc=d3.arc().innerRadius(a).outerRadius(a)}},{key:"_update",value:function(){var t=this,e=[],n=this.tryInvoke(this.opts.startAngle),r=this.tryInvoke(this.opts.endAngle),i=this.tryInvoke(this.opts.tickInterval),o=this.tryInvoke(this.opts.suppressEnd),a=this.tryInvoke(this.opts.tickCss),s=Math.abs(r-n)/i;o||Ze(n,r)||s++;for(var u=0;u<s;u++){var l=n+u*i;e.push({startAngle:l,endAngle:l,value:u})}var c=this._extCreateSelection().data(e);c.enter().append("line").call(this._setExtAttrs.bind(this)).merge(c).attr("class",a).attr("x1",function(e){return t.innerArc.centroid(e)[0]}).attr("y1",function(e){return t.innerArc.centroid(e)[1]}).attr("x2",function(e){
return t.outerArc.centroid(e)[0]}).attr("y2",function(e){return t.outerArc.centroid(e)[1]}),c.exit().remove()}}]),e}(Qp),Oh={eventPrefix:"barbg",barBgCss:"monte-ext-bar-bg",data:null,maxValue:null,maxValueProp:null,minValue:null,minValueProp:null,enlarge:.05,cornerRadius:0},Ih=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Oh]))}},{key:"_update",value:function(){var t=this,e=this.chart,n=e.data()||[],r=void 0;r=this.opts.data?this.tryInvoke(this.opts.data):this._buildData(e,n);var i=this._extCreateSelection().data(r),o=this._sizeAdjust(e),a=this.tryInvoke(this.opts.barBgCss);i.enter().append("rect").call(this._setExtAttrs.bind(this)).merge(i).attr("class",a).attr("x",function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._x.apply(t,[e,o].concat(r))}).attr("y",function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._y.apply(t,[e,o].concat(r))}).attr("width",function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._width.apply(t,[e,o].concat(r))}).attr("height",function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t._height.apply(t,[e,o].concat(r))}).attr("rx",function(e,n){return t.tryInvoke(t.opts.cornerRadius,e,n)}),i.exit().remove()}},{key:"_buildData",value:function(t,e){for(var n=new Array(e.length),r=t.y.domain(),i=0;i<n.length;i++){var o,a=this.tryInvoke(this.opts.minValueProp),s=this.tryInvoke(this.opts.maxValueProp),u=a?e[i][a]:null,l=s?e[i][s]:null;n[i]=(o={},ar(o,t.option("xProp"),e[i][t.option("xProp")]),ar(o,"min",u||this.opts.minValue||r[0]),ar(o,"max",l||this.opts.maxValue||r[1]),o)}return n}},{key:"_sizeAdjust",value:function(t){var e=this.tryInvoke(this.opts.enlarge);return t.x.bandwidth()*e}},{key:"_x",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t._barX.bind(t).apply(void 0,r)+this._xShift(e);return o}},{key:"_xShift",value:function(t){return-t}},{key:"_y",value:function(t,e,n){return t.y(n.max)+this._yShift(e)}},{key:"_yShift",value:function(t){return 0}},{key:"_widthAdjust",value:function(t){return 2*t}},{key:"_width",value:function(t,e,n){var r=t._barWidth(n),i=this._widthAdjust(e);return r+i}},{key:"_heightAdjust",value:function(t){return 0}},{key:"_height",value:function(t,e,n){var r=t.y(0),i=t.y(n.min)-r+(r-t.y(n.max));return i+this._heightAdjust(e)}}]),e}(Qp),Ch=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_buildData",value:function(t,e){for(var n=new Array(e.length),r=t.x.domain(),i=0;i<n.length;i++){var o,a=this.tryInvoke(this.opts.minValueProp),s=this.tryInvoke(this.opts.maxValueProp),u=a?e[i][a]:null,l=s?e[i][s]:null;n[i]=(o={},ar(o,t.option("yProp"),e[i][t.option("yProp")]),ar(o,"min",u||this.opts.minValue||r[0]),ar(o,"max",l||this.opts.maxValue||r[1]),o)}return n}},{key:"_sizeAdjust",value:function(t){return t.y.bandwidth()*this.opts.enlarge}},{key:"_x",value:function(t,e,n){return t.x(n.min)+this._xShift(e)}},{key:"_xShift",value:function(t){return 0}},{key:"_y",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=t._barY.bind(t).apply(void 0,r)+this._yShift(e);return o}},{key:"_yShift",value:function(t){return-t}},{key:"_widthAdjust",value:function(t){return 0}},{key:"_width",value:function(t,e,n){var r=t.x(0),i=r-t.x(n.min)+(t.x(n.max)-r);return i+this._widthAdjust(e)}},{key:"_heightAdjust",value:function(t){return 2*t}},{key:"_height",value:function(t,e,n){var r=t._barHeight(n),i=this._heightAdjust(e);return r+i}}]),e}(Ih),Ph={eventPrefix:"refline",css:"monte-ext-ref-line-grp",data:Oe,layer:"overlay",labelPlacement:"nw",textAnchor:"start",textProp:"text",x1Prop:"x1",x2Prop:"x2",y1Prop:"y1",y2Prop:"y2"},Eh={nw:function(t,e){t.attr("dy","-0.35em").attr("x",e.x1).attr("y",e.y1)},n:function(t,e){t.attr("dy","-0.35em").attr("x",(e.x2-e.x1)/2+e.x1).attr("y",e.y2)},ne:function(t,e){t.attr("dy","-0.35em").attr("x",e.x2).attr("y",e.y2)},w:function(t,e){t.attr("dy","0.35em").attr("x",e.x1).attr("y",e.y1)},e:function(t,e){t.attr("dy","0.35em").attr("x",e.x2).attr("y",e.y2)},sw:function(t,e){t.attr("dy","1em").attr("x",e.x1).attr("y",e.y1)},s:function(t,e){t.attr("dy","1em").attr("x",(e.x2-e.x1)/2+e.x1).attr("y",e.y2)},se:function(t,e){t.attr("dy","1em").attr("x",e.x2).attr("y",e.y2)}},Rh=function(t){function e(t){ir(this,e);var n=lr(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.lineData=[],n}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ph]))}},{key:"_update",value:function(){var t=this;this.lineData=this.tryInvoke(this.opts.data),!Re(this.lineData)&&we(this.lineData)?this.lineData=[this.lineData]:we(this.lineData)||(this.lineData=[]);var e=this._extCreateSelection().data(this.lineData),n=this.tryInvoke(this.opts.css),r=this.tryInvoke(this.opts.textAnchor),i=e.enter().append("g").call(this._setExtAttrs.bind(this)).attr("class",n);i.append("text"),i.append("line");var o=i.merge(e);o.select("line").attr("x1",function(e){return t.getProp("x1",e)}).attr("x2",function(e){return t.getProp("x2",e)}).attr("y1",function(e){return t.getProp("y1",e)}).attr("y2",function(e){return t.getProp("y2",e)}),o.select("text").attr("text-anchor",r).text(function(e){return t.getProp("text",e)}).each(this._placeLabel.bind(this)),e.exit().remove()}},{key:"_placeLabel",value:function(t,e,n){var r=d3.select(n[e]),i=this.tryInvoke(this.opts.labelPlacement,t,e,n),o=Eh[i],a={x1:this.getProp("x1",t),x2:this.getProp("x2",t),y1:this.getProp("y1",t),y2:this.getProp("y2",t)};o.call(this,r,a)}}]),e}(Qp),wh="selectionChanged",jh="selectionMove",Th="selectionStart",zh="selectionEnd",Dh=[wh,jh,Th,zh],Lh={css:"",layer:"selection",eventPrefix:"selectionRect",selectionDirection:null,handleSize:qr,extent:function(t,e,n){return[[0,0],[t,e]]},initialSelection:function(t,e,n){return this.isXYBrush(n)?[[0,0],[0,0]]:this.isXBrush(n)?[0,t]:this.isYBrush(n)?[0,e]:void 0},filter:null,customHandlePath:null},Fh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Lh]))}},{key:"_initPublicEvents",value:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.push.apply(n,Dh),sr(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this).call(this,n)}},{key:"_brush",value:function(t){var e=void 0,n=void 0;if(this.isXYBrush(t))e=d3.brush(),n="select-dir-all";else if(this.isXBrush(t))e=d3.brushX(),n="select-dir-x";else{if(!this.isYBrush(t)){var r='The "selectionDirection" option must be a direction ('+dp+", "+fp+", or "+yp+"), axis (x or y), or an unset value (null or undefined).";throw new fl(r)}e=d3.brushY(),n="select-dir-y"}return{brush:e,css:n}}},{key:"_handles",value:function(t){return this.isXYBrush(t)?[{type:"n"},{type:"e"},{type:"s"},{type:"w"}]:this.isXBrush(t)?[{type:"e"},{type:"w"}]:this.isYBrush(t)?[{type:"n"},{type:"s"}]:void 0}},{key:"_render",value:function(){var t=this.tryInvoke(this.opts.selectionDirection),e=this.tryInvoke(this.opts.handleSize),n=this.tryInvoke(this.opts.css),r=this.chart.width,i=this.chart.height,o=this.tryInvoke(this.opts.extent,r,i,t),a=this.tryInvoke(this.opts.initialSelection,r,i,t),s=this._brush(t);this.selectionDirection=t,this.extent=o,this.brush=s.brush.extent(o),this.brush.handleSize(e).on("start",this._brushMove.bind(this,Th)).on("brush",this._brushMove.bind(this,jh)).on("end",this._brushMove.bind(this,zh)),this.brushSel=this.layer.classed("monte-ext-selection-rect",!0).classed(s.css,!0).classed(n,!0).call(this.brush),we(this.opts.filter)&&Pe(this.opts.filter)&&this.brush.filter(this.opts.filter),we(this.opts.customHandlePath)&&this.opts.customHandlePath!==Oe?(this._renderCustomHandles(),this.brushSel.classed("custom-handles",!0)):this.brushSel.classed("standard-handles",!0),this.brush.move(this.brushSel,a)}},{key:"_renderCustomHandles",value:function(){var t=this;this.brushSel.selectAll(".handle--custom").data(this._handles(this.selectionDirection)).enter().append("path").attr("display","none").attr("class",function(t){return"handle--custom "+t.type}).attr("d",function(e,n,r){return t.tryInvoke(t.opts.customHandlePath,e,n,r)}),this.usingCustomHandles=!0}},{key:"_boundsUpdate",value:function(){var t=this.chart.width,e=this.chart.height,n=this.tryInvoke(this.opts.extent,t,e,this.selectionDirection);this.extent=n,this.brush.extent(n),this.brushSel.call(this.brush),this.brush.move(this.brushSel,this.unscaleSelection(this._selection.scaled))}},{key:"_update",value:function(){}},{key:"_brushMove",value:function(t){var e=this,n=this.selection();if(this._selection=n,this.usingCustomHandles){var r=this.brushSel.selectAll(".handle--custom");null==n.raw?r.attr("display","none"):r.attr("display",null).attr("transform",function(t){var r=e._handleX(t.type,n.raw),i=e._handleY(t.type,n.raw);return"translate("+r+","+i+")"})}this.emit(t,n),this.emit(wh,n)}},{key:"scaleSelection",value:function(t){var e=this.selectionDirection,n=t;return n?this.isXYBrush(e)?[[this.chart.x.invert(n[0][0]),this.chart.y.invert(n[1][1])],[this.chart.x.invert(n[1][0]),this.chart.y.invert(n[0][1])]]:this.isXBrush(e)?[this.chart.x.invert(n[0]),this.chart.x.invert(n[1])]:this.isYBrush(e)?[this.chart.y.invert(n[1]),this.chart.y.invert(n[0])]:void 0:n}},{key:"unscaleSelection",value:function(t){var e=this.selectionDirection,n=t;return n?this.isXYBrush(e)?[[this.chart.x(n[0][0]),this.chart.y(n[1][1])],[this.chart.x(n[1][0]),this.chart.y(n[0][1])]]:this.isXBrush(e)?[this.chart.x(n[0]),this.chart.x(n[1])]:this.isYBrush(e)?[this.chart.y(n[1]),this.chart.y(n[0])]:void 0:n}},{key:"selection",value:function(){var t=d3.brushSelection(this.brushSel.node()),e=this.scaleSelection(t);return{raw:t,scaled:e}}},{key:"clearSelection",value:function(){this.brushSel.call(this.brush.move,null)}},{key:"destroy",value:function(){}},{key:"isXYBrush",value:function(t){return!we(t)||t===yp||t===vp}},{key:"isXBrush",value:function(t){return t=t||"","x"===t.toLowerCase()||t===dp}},{key:"isYBrush",value:function(t){return t=t||"","y"===t.toLowerCase()||t===fp}},{key:"_handleX",value:function(t,e){var n=this.selectionDirection,r=e,i=this.isXBrush(n),o=this.isYBrush(n);if(!r)return 0;switch(t){case"n":return o?Hn(this.extent[0][0],this.extent[1][0]):Hn(r[0][0],r[1][0]);case"s":return o?Hn(this.extent[0][0],this.extent[1][0]):Hn(r[0][0],r[1][0]);case"e":return i?r[1]:r[1][0];case"w":return i?r[0]:r[0][0]}}},{key:"_handleY",value:function(t,e){var n=this.selectionDirection,r=e,i=this.isXBrush(n),o=this.isYBrush(n);if(!r)return 0;switch(t){case"n":return o?r[0]:r[0][1];case"s":return o?r[1]:r[1][1];case"w":return i?Hn(this.extent[0][1],this.extent[1][1]):Hn(r[0][1],r[1][1]);case"e":return i?Hn(this.extent[0][1],this.extent[1][1]):Hn(r[0][1],r[1][1])}}}]),e}(Qp),Bh={x:0,y:30,rotate:0,textAnchor:"middle"},Mh={x:-30,y:function(t,e){return e/2},rotate:-90,textAnchor:"middle"},Uh=function(){function t(e){ir(this,t),this.opts=e||{}}return or(t,[{key:"option",value:function(t,e){this.opts[t]=e}},{key:"resize",value:function(){throw hl.UnimplementedMethod("Resize","resize")}}]),t}(),Nh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"resize",value:function(t){var e=t.bound.node().parentElement,n=tr(e);t.boundingRect(n.rect.width-n.pl-n.pr,t.opts.boundingHeight)}}]),e}(Uh),Hh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"resize",value:function(t){var e=t.bound.node().parentElement,n=tr(e),r=n.rect.width-n.pl-n.pr,i=this.opts.ratio||1;t.boundingRect(r,r/i)}}]),e}(Uh),Wh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"resize",value:function(t){var e=t.bound.node().parentElement,n=tr(e);t.boundingRect(n.rect.width-n.pl-n.pr,n.rect.height-n.pt-n.pb)}}]),e}(Uh),Yh=function(t){function e(){return ir(this,e),lr(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return ur(e,t),or(e,[{key:"resize",value:function(t){var e=t.bound.node().parentElement,n=tr(e);t.boundingRect(t.opts.boundingWidth,n.rect.height-n.pt-n.pb)}}]),e}(Uh);t.constants=qp,t.tools=nh,t.version=nr,t.Chart=Ol,t.AxesChart=wl,t.PolarChart=Tl,t.LineChart=Fl,t.AreaChart=Ul,t.SparklineChart=Hl,t.BarChart=Zl,t.HorizontalBarChart=Jl,t.SimpleBarChart=tc,t.HorizontalSimpleBarChart=nc,t.SegmentBarChart=hc,t.HorizontalSegmentBarChart=yc,t.ScatterPlot=gc,t.IconArray=Ac,t.iconArrangeBottomTop=kc,t.iconArrangeTopBottom=Sc,t.ArcChart=Bc,t.GaugeChart=Xc,t.PolarAreaChart=$c,t.RadarChart=lp,t.WedgeChart=pp,t.EventWatcher=ml,t.InstanceGroup=dl,t.MonteError=hl,t.MonteOptionError=fl,t.Extension=Qp,t.ExtArc=eh,t.ExtAxisTickTransform=ih,t.ExtAxisLabelWrap=ah,t.ExtCrosshair=uh,t.ExtFrame=ch,t.ExtGrid=hh,t.ExtHorizontalLines=dh,t.ExtVerticalLines=fh,t.ExtLabel=vh,t.ExtPolarGrid=gh,t.ExtPolarLine=mh,t.ExtPolarRotateLabel=Sh,t.ExtPolarTicks=Ah,t.ExtBarBg=Ih,t.ExtHorizontalBarBg=Ch,t.ExtReferenceLine=Rh,t.ExtSelectionRect=Fh,t.axisNoTicks=Wn,t.axisWholeNumberFormat=Yn,t.axisXLabelStart=Gn,t.axisXLabelCenter=Xn,t.axisXLabelGenerator=Vn,t.axisXLabelMiddle=Xn,t.axisXLabelEnd=Kn,t.axisYLabelStart=$n,t.axisYLabelCenter=qn,t.axisYLabelGenerator=Zn,t.axisYLabelMiddle=qn,t.axisYLabelEnd=Jn,t.radiusContrain=Rn,t.extentFromZero=Ne,t.extentBalanced=He,t.extentGeneratorPercentOffset=Ve,t.extentGeneratorValueOffset=Ye,t.extentGeneratorZeroToMax=We,t.needleRoundedEnd=zn,t.needleFlatEnd=Dn,t.needleExtraPointer=Ln,t.needleRect=Fn,t.polarLabelCentroid=rn,t.polarLabelInner=on,t.polarLabelInnerAdjust=un,t.polarLabelInnerFactor=sn,t.polarLabelOuter=an,t.polarLabelOuterAdjust=cn,t.polarLabelOuterFactor=ln,t.gaugeLabelRotateTangentOrigin=An,t.gaugeLabelRotateTangentFlip=On,t.gaugeLabelRotateRay=In,t.gaugeLabelRotateRayFlip=Pn,t.gaugeLabelRotateRayOpposite=Cn,t.gaugeLabelRotateNone=En,t.polarLabelRotateTangentOrigin=gn,t.polarLabelRotateTangentFlip=bn,t.polarLabelRotateRay=mn,t.polarLabelRotateRayFlip=Sn,t.polarLabelRotateRayOpposite=kn,t.polarLabelRotateNone=xn,t.AutoResizer=Wh,t.HorizontalResizer=Nh,t.HorizontalRatioResizer=Hh,t.Resizer=Uh,t.VerticalResizer=Yh,t.arcSimpleTween=en,t.arcLabelTween=nn,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=monte.min.js.map
