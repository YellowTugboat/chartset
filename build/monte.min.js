// https://github.com/YellowTugboat/monte#readme Version 0.0.0-alpha21 Copyright 2016 Yellow Tugboat
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Monte=t.Monte||{})}(this,function(t){"use strict";function e(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),n=n>i?i:n,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function n(t,n,r){var i=t.length;return r=void 0===r?i:r,!n&&r>=i?t:e(t,n,r)}function r(t){return br.test(t)}function i(t){return t.split("")}function o(t){return t.match(Br)||[]}function a(t){return r(t)?o(t):i(t)}function s(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function u(t){var e=Yr.call(t,Zr),n=t[Zr];try{t[Zr]=void 0;var r=!0}catch(t){}var i=Xr.call(t);return r&&(e?t[Zr]=n:delete t[Zr]),i}function c(t){return $r.call(t)}function l(t){return null==t?void 0===t?Jr:qr:(t=Object(t),Qr&&Qr in t?u(t):c(t))}function p(t){return null!=t&&"object"==("undefined"==typeof t?"undefined":bn(t))}function h(t){return"symbol"==("undefined"==typeof t?"undefined":bn(t))||p(t)&&l(t)==ti}function d(t){if("string"==typeof t)return t;if(Gr(t))return s(t,d)+"";if(h(t))return ri?ri.call(t):"";var e=t+"";return"0"==e&&1/t==-ei?"-0":e}function f(t){return null==t?"":d(t)}function y(t){return function(e){e=f(e);var i=r(e)?a(e):void 0,o=i?i[0]:e.charAt(0),s=i?n(i,1).join(""):e.slice(1);return o[t]()+s}}function _(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function v(t){return function(e){return null==t?void 0:t[e]}}function g(t){return t=f(t),t&&t.replace(si,ai).replace(di,"")}function b(t){return t.match(fi)||[]}function m(t){return yi.test(t)}function S(t){return t.match(eo)||[]}function A(t,e,n){return t=f(t),e=n?void 0:e,void 0===e?m(t)?S(t):b(t):t.match(e)||[]}function k(t){return function(e){return _(A(g(e).replace(ro,"")),t,"")}}function x(t){return ii(f(t).toLowerCase())}function O(){this.__data__=[],this.size=0}function P(t,e){return t===e||t!==t&&e!==e}function C(t,e){for(var n=t.length;n--;)if(P(t[n][0],e))return n;return-1}function E(t){var e=this.__data__,n=C(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():ao.call(e,n,1),--this.size,!0}function I(t){var e=this.__data__,n=C(e,t);return n<0?void 0:e[n][1]}function j(t){return C(this.__data__,t)>-1}function R(t,e){var n=this.__data__,r=C(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function T(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function w(){this.__data__=new T,this.size=0}function D(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function z(t){return this.__data__.get(t)}function F(t){return this.__data__.has(t)}function L(t){var e="undefined"==typeof t?"undefined":bn(t);return null!=t&&("object"==e||"function"==e)}function M(t){if(!L(t))return!1;var e=l(t);return e==uo||e==co||e==so||e==lo}function B(t){return!!ho&&ho in t}function N(t){if(null!=t){try{return yo.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function H(t){if(!L(t)||B(t))return!1;var e=M(t)?Ao:vo;return e.test(N(t))}function W(t,e){return null==t?void 0:t[e]}function U(t,e){var n=W(t,e);return H(n)?n:void 0}function G(){this.__data__=xo?xo(null):{},this.size=0}function V(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Y(t){var e=this.__data__;if(xo){var n=e[t];return n===Oo?void 0:n}return Co.call(e,t)?e[t]:void 0}function X(t){var e=this.__data__;return xo?void 0!==e[t]:Io.call(e,t)}function Z(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=xo&&void 0===e?jo:e,this}function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $(){this.size=0,this.__data__={hash:new K,map:new(ko||T),string:new K}}function q(t){var e="undefined"==typeof t?"undefined":bn(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function J(t,e){var n=t.__data__;return q(e)?n["string"==typeof e?"string":"hash"]:n.map}function Q(t){var e=J(this,t).delete(t);return this.size-=e?1:0,e}function tt(t){return J(this,t).get(t)}function et(t){return J(this,t).has(t)}function nt(t,e){var n=J(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function rt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function it(t,e){var n=this.__data__;if(n instanceof T){var r=n.__data__;if(!ko||r.length<Ro-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new rt(r)}return n.set(t,e),this.size=n.size,this}function ot(t){var e=this.__data__=new T(t);this.size=e.size}function at(t){return this.__data__.set(t,To),this}function st(t){return this.__data__.has(t)}function ut(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new rt;++e<n;)this.add(t[e])}function ct(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function lt(t,e){return t.has(e)}function pt(t,e,n,r,i,o){var a=n&wo,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var l=-1,p=!0,h=n&Do?new ut:void 0;for(o.set(t,e),o.set(e,t);++l<s;){var d=t[l],f=e[l];if(r)var y=a?r(f,d,l,e,t,o):r(d,f,l,t,e,o);if(void 0!==y){if(y)continue;p=!1;break}if(h){if(!ct(e,function(t,e){if(!lt(h,e)&&(d===t||i(d,t,n,r,o)))return h.push(e)})){p=!1;break}}else if(d!==f&&!i(d,f,n,r,o)){p=!1;break}}return o.delete(t),o.delete(e),p}function ht(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function dt(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function ft(t,e,n,r,i,o,a){switch(n){case Zo:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Xo:return!(t.byteLength!=e.byteLength||!o(new zo(t),new zo(e)));case Mo:case Bo:case Wo:return P(+t,+e);case No:return t.name==e.name&&t.message==e.message;case Uo:case Vo:return t==e+"";case Ho:var s=ht;case Go:var u=r&Fo;if(s||(s=dt),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=Lo,a.set(t,e);var l=pt(s(t),s(e),r,i,o,a);return a.delete(t),l;case Yo:if($o)return $o.call(t)==$o.call(e)}return!1}function yt(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function _t(t){return p(t)&&l(t)==qo}function vt(){return!1}function gt(t,e){return e=null==e?ua:e,!!e&&("number"==typeof t||ca.test(t))&&t>-1&&t%1==0&&t<e}function bt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=la}function mt(t){return p(t)&&bt(t.length)&&!!za[l(t)]}function St(t){return function(e){return t(e)}}function At(t,e){var n=Gr(t),r=!n&&ea(t),i=!n&&!r&&sa(t),o=!n&&!r&&!i&&Wa(t),a=n||r||i||o,s=a?yt(t.length,String):[],u=s.length;for(var c in t)!e&&!Ga.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||gt(c,u))||s.push(c);return s}function kt(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||Va;return t===n}function xt(t,e){return function(n){return t(e(n))}}function Ot(t){if(!kt(t))return Ya(t);var e=[];for(var n in Object(t))Za.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Pt(t){return null!=t&&bt(t.length)&&!M(t)}function Ct(t){return Pt(t)?At(t):Ot(t)}function Et(t,e,n,r,i,o){var a=n&Ka,s=Ct(t),u=s.length,c=Ct(e),l=c.length;if(u!=l&&!a)return!1;for(var p=u;p--;){var h=s[p];if(!(a?h in e:qa.call(e,h)))return!1}var d=o.get(t);if(d&&o.get(e))return d==e;var f=!0;o.set(t,e),o.set(e,t);for(var y=a;++p<u;){h=s[p];var _=t[h],v=e[h];if(r)var g=a?r(v,_,h,e,t,o):r(_,v,h,t,e,o);if(!(void 0===g?_===v||i(_,v,n,r,o):g)){f=!1;break}y||(y="constructor"==h)}if(f&&!y){var b=t.constructor,m=e.constructor;b!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m)&&(f=!1)}return o.delete(t),o.delete(e),f}function It(t,e,n,r,i,o){var a=Gr(t),s=Gr(e),u=vs,c=vs;a||(u=fs(t),u=u==_s?gs:u),s||(c=fs(e),c=c==_s?gs:c);var l=u==gs,p=c==gs,h=u==c;if(h&&sa(t)){if(!sa(e))return!1;a=!0,l=!1}if(h&&!l)return o||(o=new ot),a||Wa(t)?pt(t,e,n,r,i,o):ft(t,e,u,n,r,i,o);if(!(n&ys)){var d=l&&ms.call(t,"__wrapped__"),f=p&&ms.call(e,"__wrapped__");if(d||f){var y=d?t.value():t,_=f?e.value():e;return o||(o=new ot),i(y,_,n,r,o)}}return!!h&&(o||(o=new ot),Et(t,e,n,r,i,o))}function jt(t,e,n,r,i){return t===e||(null==t||null==e||!L(t)&&!p(e)?t!==t&&e!==e:It(t,e,n,r,jt,i))}function Rt(t,e){return jt(t,e)}function Tt(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function wt(t){return Gr(t)||ea(t)||!!(Ss&&t&&t[Ss])}function Dt(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=wt),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Dt(s,e-1,n,r,i):Tt(i,s):r||(i[i.length]=s)}return i}function zt(t){var e=null==t?0:t.length;return e?Dt(t,As):[]}function Ft(t,e){return null!=t&&xs.call(t,e)}function Lt(t,e){if(Gr(t))return!1;var n="undefined"==typeof t?"undefined":bn(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!h(t))||(Ps.test(t)||!Os.test(t)||null!=e&&t in Object(e))}function Mt(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(Cs);var n=function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Mt.Cache||rt),n}function Bt(t){var e=Mt(t,function(t){return n.size===Es&&n.clear(),t}),n=e.cache;return e}function Nt(t,e){return Gr(t)?t:Lt(t,e)?[t]:Ts(f(t))}function Ht(t){if("string"==typeof t||h(t))return t;var e=t+"";return"0"==e&&1/t==-ws?"-0":e}function Wt(t,e,n){e=Nt(e,t);for(var r=-1,i=e.length,o=!1;++r<i;){var a=Ht(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:(i=null==t?0:t.length,!!i&&bt(i)&&gt(a,i)&&(Gr(t)||ea(t)))}function Ut(t,e){return null!=t&&Wt(t,e,Ft)}function Gt(t,e){e=Nt(e,t);for(var n=0,r=e.length;null!=t&&n<r;)t=t[Ht(e[n++])];return n&&n==r?t:void 0}function Vt(t,e,n){var r=null==t?void 0:Gt(t,e);return void 0===r?n:r}function Yt(t,e,n){"__proto__"==e&&Ds?Ds(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Xt(t,e,n){var r=t[e];Fs.call(t,e)&&P(r,n)&&(void 0!==n||e in t)||Yt(t,e,n)}function Zt(t,e,n,r){if(!L(t))return t;e=Nt(e,t);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=Ht(e[i]),c=n;if(i!=a){var l=s[u];c=r?r(l,u,s):void 0,void 0===c&&(c=L(l)?l:gt(e[i+1])?[]:{})}Xt(s,u,c),s=s[u]}return t}function Kt(t,e,n){return null==t?t:Zt(t,e,n)}function $t(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function qt(t){return t}function Jt(t,e,n){return e=Ls(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=Ls(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),$t(t,this,s)}}function Qt(t){return function(){return t}}function te(t){var e=0,n=0;return function(){var r=Hs(),i=Ns-(r-n);if(n=r,i>0){if(++e>=Bs)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function ee(t,e){return Ws(Jt(t,e,qt),t+"")}function ne(t,e,n){(void 0===n||P(t[e],n))&&(void 0!==n||e in t)||Yt(t,e,n)}function re(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}function ie(t,e){if(e)return t.slice();var n=t.length,r=Zs?Zs(n):new t.constructor(n);return t.copy(r),r}function oe(t){var e=new t.constructor(t.byteLength);return new zo(e).set(new zo(t)),e}function ae(t,e){var n=e?oe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function se(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function ue(t){return"function"!=typeof t.constructor||kt(t)?{}:$s(qs(t))}function ce(t){return p(t)&&Pt(t)}function le(t){if(!p(t)||l(t)!=Js)return!1;var e=qs(t);if(null===e)return!0;var n=nu.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&eu.call(n)==ru}function pe(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?Yt(n,s,u):Xt(n,s,u)}return n}function he(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function de(t){if(!L(t))return he(t);var e=kt(t),n=[];for(var r in t)("constructor"!=r||!e&&ou.call(t,r))&&n.push(r);return n}function fe(t){return Pt(t)?At(t,!0):de(t)}function ye(t){return pe(t,fe(t))}function _e(t,e,n,r,i,o,a){var s=t[n],u=e[n],c=a.get(u);if(c)return void ne(t,n,c);var l=o?o(s,u,n+"",t,e,a):void 0,p=void 0===l;if(p){var h=Gr(u),d=!h&&sa(u),f=!h&&!d&&Wa(u);l=u,h||d||f?Gr(s)?l=s:ce(s)?l=se(s):d?(p=!1,l=ie(u,!0)):f?(p=!1,l=ae(u,!0)):l=[]:le(u)||ea(u)?(l=s,ea(s)?l=ye(s):(!L(s)||r&&M(s))&&(l=ue(u))):p=!1}p&&(a.set(u,l),i(l,u,r,o,a),a.delete(u)),ne(t,n,l)}function ve(t,e,n,r,i){t!==e&&Us(e,function(o,a){if(L(o))i||(i=new ot),_e(t,e,a,n,ve,r,i);else{var s=r?r(t[a],o,a+"",t,e,i):void 0;void 0===s&&(s=o),ne(t,a,s)}},fe)}function ge(t,e,n,r,i,o){return L(t)&&L(e)&&(o.set(e,t),ve(t,e,void 0,ge,o),o.delete(e)),t}function be(t,e,n){if(!L(n))return!1;var r="undefined"==typeof e?"undefined":bn(e);return!!("number"==r?Pt(n)&&gt(e,n.length):"string"==r&&e in n)&&P(n[e],t)}function me(t){return ee(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=t.length>3&&"function"==typeof o?(i--,o):void 0,a&&be(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Se(t){return"number"==typeof t&&isFinite(t)}function Ae(t){return"string"==typeof t}function ke(t){return"function"==typeof t}function xe(t){return null!==t&&"object"===("undefined"==typeof t?"undefined":bn(t))}function Oe(t){return Array.isArray(t)}function Pe(t){return null!==t&&t!==_u}function Ce(t,e,n,r){var i=r;if(t)for(var o=-1;o<e.length;o++){var a=e.slice(o+1).join(".");if(a&&(a+="."),a+=n,pu(t,a)){i=lu(t,a);break}}return i}function Ee(t){return t instanceof Su?t.value:t}function Ie(t){var e=null;if(Array.isArray(t)){for(var n=-1,r=t.length-1;r>=0;r--){var i=t[r];if(i instanceof Au){n=r;break}}e=n!==-1?t.slice(n):t;for(var o=0;o<e.length;o++)e[o]=Ee(e[o])}else e=Ee(t);return e}function je(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=uu.apply(void 0,[{}].concat(e));for(var i in r)r.hasOwnProperty(i)&&(r[i]=Ie(r[i]));return r}function Re(){}function Te(){for(var t=[],e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var i=0;i<n.length;i++){var o=n[i],a=!0,s=!1,u=void 0;try{for(var c,l=Zn[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var p=c.value;t.push(o+":"+p)}}catch(t){s=!0,u=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw u}}}return t}function we(t){t&&t.domain&&t.domain([])}function De(t){return[0,t[1]]}function ze(t){var e=t[0],n=t[1];if(e>=0)return[0,n];if(e<0&&n<0)return[e,0];var r=Math.abs(e),i=Math.abs(n),o=i>r?i:r;return[-o,o]}function Fe(t){return function(){return[0,t]}}function Le(t,e){return null==e&&(e=t),function(n){return[n[0]-t,n[1]+e]}}function Me(t){return function(e){var n=Math.abs(e[1]-e[0])*t;return[e[0]-n,e[1]+n]}}function Be(t,e){var n=[];for(var r in t)t.hasOwnProperty(r)&&r!==e&&n.push(t[r]);return n}function Ne(t,e,n){var r=this.tryInvoke(this.opts.placement.columnIndex,t,e,n),i=this.tryInvoke(this.opts.placement.rowIndex,t,e,n),o=this.getScaledProp("x",r),a=this.getScaledProp("y",i);return"translate("+o+", "+a+")"}function He(t,e,n){var r=this.tryInvoke(this.opts.placement.columnIndex,t,e,n),i=this.tryInvoke(this.opts.placement.rowIndex,t,e,n),o=this.getScaledProp("x",r),a=this.getScaledProp("y",i),s=this.opts.iconSvgWidth/2,u=this.opts.iconSvgHeight/2;return"translate("+(o-s)+", "+(a-u)+")"}function We(){return Oc.CENTROID}function Ue(){return Oc.INNER}function Ge(){return Oc.OUTER}function Ve(t){return{css:xc+"inner-"+t,radius:function(e,n){var r=this.tryInvoke(this.option("innerRadius"),e,n);return r*t}}}function Ye(t){return{css:xc+"outer-"+t,radius:function(e,n){var r=this.tryInvoke(this.option("outerRadius"),e,n);return r*t}}}function Xe(t){var e=(t.endAngle-t.startAngle)/2+t.startAngle;return e}function Ze(t){var e=(t.endAngle-t.startAngle)/2+t.startAngle,n=Math.abs(e);return n>Sc&&n<=3*Sc&&(e-=mc),e}function Ke(t){var e=(t.endAngle-t.startAngle)/2+t.startAngle-Sc;return e}function $e(t){var e=(t.endAngle-t.startAngle)/2+t.startAngle-Sc-mc;return e}function qe(t,e,n){var r=d3.interpolate(e,n);return function(e){return t(r(e))}}function Je(t,e,n){var r=t.node(),i=r.getAttribute("class"),o=i.trim().split(/^|\s+/),a=void 0;if("string"==typeof e)a=new RegExp(e);else{if(!(e instanceof RegExp))throw vu.InvalidArgumentType("classedPattern","pattern","String or RegExp",e);a=e}o.forEach(function(e){a.test(e)&&t.classed(e,n)})}function Qe(t,e){var n=(t-e)/Ac;return Number.isInteger(n)}function tn(t,e){var n=e-Sc;return[Math.cos(n)*t,Math.sin(n)*t]}function en(t){return t*(180/mc)}function nn(t,e){var n=t/2,r=e/2;return n<r?n:r}function rn(){return function(t,e){var n=t,r=e/2,i="-"+r+" 0",o="0 -"+n,a=r+" 0",s=[r+" "+r,0,0,1,"-"+r+" 0"].join(","),u=["M",i,o,a,"A",s,"Z"].join(" ");return u}}function on(){return function(t,e){var n=t,r=e/2,i="-"+r+" 0",o="0 -"+n,a=r+" 0",s=["M",i,o,a,"Z"].join(" ");return s}}function an(t){var e=je(t,Tc);return function(t,n){var r=t,i=e.smallNeedleHeight||t*e.smallNeedleRatio,o=n/2,a="-"+o+" 0",s="0 -"+r,u=o+" 0",c="0 "+i,l=["M",a,s,u,c,"Z"].join(" ");return l}}function sn(t){var e=je(t,Tc);return function(t,n){var r=t,i=e.smallNeedleHeight||t*e.smallNeedleRatio,o=n/2;return"M -"+o+" 0  -"+o+" -"+r+"  "+o+" -"+r+"  "+o+" 0 "+o+" "+i+" -"+o+" "+i+" Z"}}function un(t){return yu(fu(t))}function cn(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach(function(t){return t.apply(void 0,n)})}}function ln(t){var e=/(.*?)\((.*?)\)\s*/g,n=e.exec(t),r={};if(n)for(var i=1;i<n.length;i+=2){var o=n[i],a=n[i+1].trim();(a.indexOf(" ")>-1||a.indexOf(",")>-1)&&(a=a.split(/,\s*|\s+/)),r[o]=a}return r}function pn(t){var e="";for(var n in t)if(t.hasOwnProperty(n)){var r=t[n].join(", ");e+=n+"("+r+")"}return e}function hn(t){var e=window.getComputedStyle(t,null);return parseFloat(e.getPropertyValue("font-size"),10)}function dn(t){return t.tickSize(0),t}function fn(t){return t.tickFormat(d3.format(",.0f")),t}function yn(t,e){var n=parseFloat(t.getPropertyValue(e),10);return isNaN(n)?0:n}function _n(t){var e=window.getComputedStyle(t,null);return{rect:t.getBoundingClientRect(),style:e,pl:yn(e,"padding-left"),pr:yn(e,"padding-right"),pt:yn(e,"padding-top"),pb:yn(e,"padding-bottom")}}var vn,gn="0.0.0-alpha21",bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},mn=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Sn=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),An=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},kn=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},xn=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},On=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Pn=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)},Cn="click",En="touchstart",In="touchend",jn="mouseover",Rn="mouseout",Tn="suppressedError",wn="extension",Dn="rendering",zn="rendered",Fn="updating",Ln="updated",Mn="updatingBounds",Bn="updatedBounds",Nn="clearing",Hn="cleared",Wn="destroying",Un="destroyed",Gn="optionChanging",Vn="optionChanged",Yn="cssDomainsResetting",Xn="cssDomainsReset",Zn=[Cn,En,In,jn,Rn],Kn=[Tn,wn],$n=[Dn,zn,Fn,Ln,Mn,Bn,Nn,Hn,Yn,Xn,Gn,Vn,Wn,Un],qn=[Fn,Ln,Nn,Hn,Gn,Vn,Wn,Un],Jn="add",Qn="remove",tr="over",er="touch",nr=(vn={},An(vn,jn,{action:Jn,css:tr}),An(vn,Rn,{action:Qn,css:tr}),An(vn,En,{action:Jn,css:er}),An(vn,In,{action:Qn,css:er}),vn),rr=.5,ir=250,or=0,ar=d3.easeCubic,sr="enter",ur="update",cr="exit",lr={ENTER:sr,UPDATE:ur,EXIT:cr},pr=Object.freeze({AXIS_SHIFT:rr,TRANSITION_DURATION_MS:ir,TRANSITION_DELAY_MS:or,TRANSITION_EASE:ar,ENTER:sr,UPDATE:ur,EXIT:cr,UPDATE_PATTERN:lr}),hr="\\ud800-\\udfff",dr="\\u0300-\\u036f",fr="\\ufe20-\\ufe2f",yr="\\u20d0-\\u20ff",_r=dr+fr+yr,vr="\\ufe0e\\ufe0f",gr="\\u200d",br=RegExp("["+gr+hr+_r+vr+"]"),mr="\\ud800-\\udfff",Sr="\\u0300-\\u036f",Ar="\\ufe20-\\ufe2f",kr="\\u20d0-\\u20ff",xr=Sr+Ar+kr,Or="\\ufe0e\\ufe0f",Pr="["+mr+"]",Cr="["+xr+"]",Er="\\ud83c[\\udffb-\\udfff]",Ir="(?:"+Cr+"|"+Er+")",jr="[^"+mr+"]",Rr="(?:\\ud83c[\\udde6-\\uddff]){2}",Tr="[\\ud800-\\udbff][\\udc00-\\udfff]",wr="\\u200d",Dr=Ir+"?",zr="["+Or+"]?",Fr="(?:"+wr+"(?:"+[jr,Rr,Tr].join("|")+")"+zr+Dr+")*",Lr=zr+Dr+Fr,Mr="(?:"+[jr+Cr+"?",Cr,Rr,Tr,Pr].join("|")+")",Br=RegExp(Er+"(?="+Er+")|"+Mr+Lr,"g"),Nr="object"==("undefined"==typeof global?"undefined":bn(global))&&global&&global.Object===Object&&global,Hr="object"==("undefined"==typeof self?"undefined":bn(self))&&self&&self.Object===Object&&self,Wr=Nr||Hr||Function("return this")(),Ur=Wr.Symbol,Gr=Array.isArray,Vr=Object.prototype,Yr=Vr.hasOwnProperty,Xr=Vr.toString,Zr=Ur?Ur.toStringTag:void 0,Kr=Object.prototype,$r=Kr.toString,qr="[object Null]",Jr="[object Undefined]",Qr=Ur?Ur.toStringTag:void 0,ti="[object Symbol]",ei=1/0,ni=Ur?Ur.prototype:void 0,ri=ni?ni.toString:void 0,ii=y("toUpperCase"),oi={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},ai=v(oi),si=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ui="\\u0300-\\u036f",ci="\\ufe20-\\ufe2f",li="\\u20d0-\\u20ff",pi=ui+ci+li,hi="["+pi+"]",di=RegExp(hi,"g"),fi=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,yi=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_i="\\ud800-\\udfff",vi="\\u0300-\\u036f",gi="\\ufe20-\\ufe2f",bi="\\u20d0-\\u20ff",mi=vi+gi+bi,Si="\\u2700-\\u27bf",Ai="a-z\\xdf-\\xf6\\xf8-\\xff",ki="\\xac\\xb1\\xd7\\xf7",xi="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Oi="\\u2000-\\u206f",Pi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ci="A-Z\\xc0-\\xd6\\xd8-\\xde",Ei="\\ufe0e\\ufe0f",Ii=ki+xi+Oi+Pi,ji="['’]",Ri="["+Ii+"]",Ti="["+mi+"]",wi="\\d+",Di="["+Si+"]",zi="["+Ai+"]",Fi="[^"+_i+Ii+wi+Si+Ai+Ci+"]",Li="\\ud83c[\\udffb-\\udfff]",Mi="(?:"+Ti+"|"+Li+")",Bi="[^"+_i+"]",Ni="(?:\\ud83c[\\udde6-\\uddff]){2}",Hi="[\\ud800-\\udbff][\\udc00-\\udfff]",Wi="["+Ci+"]",Ui="\\u200d",Gi="(?:"+zi+"|"+Fi+")",Vi="(?:"+Wi+"|"+Fi+")",Yi="(?:"+ji+"(?:d|ll|m|re|s|t|ve))?",Xi="(?:"+ji+"(?:D|LL|M|RE|S|T|VE))?",Zi=Mi+"?",Ki="["+Ei+"]?",$i="(?:"+Ui+"(?:"+[Bi,Ni,Hi].join("|")+")"+Ki+Zi+")*",qi="\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)",Ji="\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)",Qi=Ki+Zi+$i,to="(?:"+[Di,Ni,Hi].join("|")+")"+Qi,eo=RegExp([Wi+"?"+zi+"+"+Yi+"(?="+[Ri,Wi,"$"].join("|")+")",Vi+"+"+Xi+"(?="+[Ri,Wi+Gi,"$"].join("|")+")",Wi+"?"+Gi+"+"+Yi,Wi+"+"+Xi,Ji,qi,wi,to].join("|"),"g"),no="['’]",ro=RegExp(no,"g"),io=k(function(t,e,n){return e=e.toLowerCase(),t+(n?x(e):e)}),oo=Array.prototype,ao=oo.splice;T.prototype.clear=O,T.prototype.delete=E,T.prototype.get=I,T.prototype.has=j,T.prototype.set=R;var so="[object AsyncFunction]",uo="[object Function]",co="[object GeneratorFunction]",lo="[object Proxy]",po=Wr["__core-js_shared__"],ho=function(){var t=/[^.]+$/.exec(po&&po.keys&&po.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),fo=Function.prototype,yo=fo.toString,_o=/[\\^$.*+?()[\]{}|]/g,vo=/^\[object .+?Constructor\]$/,go=Function.prototype,bo=Object.prototype,mo=go.toString,So=bo.hasOwnProperty,Ao=RegExp("^"+mo.call(So).replace(_o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ko=U(Wr,"Map"),xo=U(Object,"create"),Oo="__lodash_hash_undefined__",Po=Object.prototype,Co=Po.hasOwnProperty,Eo=Object.prototype,Io=Eo.hasOwnProperty,jo="__lodash_hash_undefined__";K.prototype.clear=G,K.prototype.delete=V,K.prototype.get=Y,K.prototype.has=X,K.prototype.set=Z,rt.prototype.clear=$,rt.prototype.delete=Q,rt.prototype.get=tt,rt.prototype.has=et,rt.prototype.set=nt;var Ro=200;ot.prototype.clear=w,ot.prototype.delete=D,ot.prototype.get=z,ot.prototype.has=F,ot.prototype.set=it;var To="__lodash_hash_undefined__";ut.prototype.add=ut.prototype.push=at,ut.prototype.has=st;var wo=1,Do=2,zo=Wr.Uint8Array,Fo=1,Lo=2,Mo="[object Boolean]",Bo="[object Date]",No="[object Error]",Ho="[object Map]",Wo="[object Number]",Uo="[object RegExp]",Go="[object Set]",Vo="[object String]",Yo="[object Symbol]",Xo="[object ArrayBuffer]",Zo="[object DataView]",Ko=Ur?Ur.prototype:void 0,$o=Ko?Ko.valueOf:void 0,qo="[object Arguments]",Jo=Object.prototype,Qo=Jo.hasOwnProperty,ta=Jo.propertyIsEnumerable,ea=_t(function(){return arguments}())?_t:function(t){return p(t)&&Qo.call(t,"callee")&&!ta.call(t,"callee")},na="object"==("undefined"==typeof t?"undefined":bn(t))&&t&&!t.nodeType&&t,ra=na&&"object"==("undefined"==typeof module?"undefined":bn(module))&&module&&!module.nodeType&&module,ia=ra&&ra.exports===na,oa=ia?Wr.Buffer:void 0,aa=oa?oa.isBuffer:void 0,sa=aa||vt,ua=9007199254740991,ca=/^(?:0|[1-9]\d*)$/,la=9007199254740991,pa="[object Arguments]",ha="[object Array]",da="[object Boolean]",fa="[object Date]",ya="[object Error]",_a="[object Function]",va="[object Map]",ga="[object Number]",ba="[object Object]",ma="[object RegExp]",Sa="[object Set]",Aa="[object String]",ka="[object WeakMap]",xa="[object ArrayBuffer]",Oa="[object DataView]",Pa="[object Float32Array]",Ca="[object Float64Array]",Ea="[object Int8Array]",Ia="[object Int16Array]",ja="[object Int32Array]",Ra="[object Uint8Array]",Ta="[object Uint8ClampedArray]",wa="[object Uint16Array]",Da="[object Uint32Array]",za={};za[Pa]=za[Ca]=za[Ea]=za[Ia]=za[ja]=za[Ra]=za[Ta]=za[wa]=za[Da]=!0,za[pa]=za[ha]=za[xa]=za[da]=za[Oa]=za[fa]=za[ya]=za[_a]=za[va]=za[ga]=za[ba]=za[ma]=za[Sa]=za[Aa]=za[ka]=!1;var Fa="object"==("undefined"==typeof t?"undefined":bn(t))&&t&&!t.nodeType&&t,La=Fa&&"object"==("undefined"==typeof module?"undefined":bn(module))&&module&&!module.nodeType&&module,Ma=La&&La.exports===Fa,Ba=Ma&&Nr.process,Na=function(){try{return Ba&&Ba.binding&&Ba.binding("util")}catch(t){}}(),Ha=Na&&Na.isTypedArray,Wa=Ha?St(Ha):mt,Ua=Object.prototype,Ga=Ua.hasOwnProperty,Va=Object.prototype,Ya=xt(Object.keys,Object),Xa=Object.prototype,Za=Xa.hasOwnProperty,Ka=1,$a=Object.prototype,qa=$a.hasOwnProperty,Ja=U(Wr,"DataView"),Qa=U(Wr,"Promise"),ts=U(Wr,"Set"),es=U(Wr,"WeakMap"),ns="[object Map]",rs="[object Object]",is="[object Promise]",os="[object Set]",as="[object WeakMap]",ss="[object DataView]",us=N(Ja),cs=N(ko),ls=N(Qa),ps=N(ts),hs=N(es),ds=l;(Ja&&ds(new Ja(new ArrayBuffer(1)))!=ss||ko&&ds(new ko)!=ns||Qa&&ds(Qa.resolve())!=is||ts&&ds(new ts)!=os||es&&ds(new es)!=as)&&(ds=function(t){var e=l(t),n=e==rs?t.constructor:void 0,r=n?N(n):"";if(r)switch(r){case us:return ss;case cs:return ns;case ls:return is;case ps:return os;case hs:return as}return e});var fs=ds,ys=1,_s="[object Arguments]",vs="[object Array]",gs="[object Object]",bs=Object.prototype,ms=bs.hasOwnProperty,Ss=Ur?Ur.isConcatSpreadable:void 0,As=1/0,ks=Object.prototype,xs=ks.hasOwnProperty,Os=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ps=/^\w*$/,Cs="Expected a function";Mt.Cache=rt;var Es=500,Is=/^\./,js=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rs=/\\(\\)?/g,Ts=Bt(function(t){var e=[];return Is.test(t)&&e.push(""),t.replace(js,function(t,n,r,i){e.push(r?i.replace(Rs,"$1"):n||t)}),e}),ws=1/0,Ds=function(){try{var t=U(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),zs=Object.prototype,Fs=zs.hasOwnProperty,Ls=Math.max,Ms=Ds?function(t,e){return Ds(t,"toString",{configurable:!0,enumerable:!1,value:Qt(e),writable:!0})}:qt,Bs=800,Ns=16,Hs=Date.now,Ws=te(Ms),Us=re(),Gs="object"==("undefined"==typeof t?"undefined":bn(t))&&t&&!t.nodeType&&t,Vs=Gs&&"object"==("undefined"==typeof module?"undefined":bn(module))&&module&&!module.nodeType&&module,Ys=Vs&&Vs.exports===Gs,Xs=Ys?Wr.Buffer:void 0,Zs=Xs?Xs.allocUnsafe:void 0,Ks=Object.create,$s=function(){function t(){}return function(e){if(!L(e))return{};if(Ks)return Ks(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),qs=xt(Object.getPrototypeOf,Object),Js="[object Object]",Qs=Function.prototype,tu=Object.prototype,eu=Qs.toString,nu=tu.hasOwnProperty,ru=eu.call(Object),iu=Object.prototype,ou=iu.hasOwnProperty,au=me(function(t,e,n,r){ve(t,e,n,r)}),su=ee(function(t){return t.push(void 0,ge),$t(au,void 0,t)}),uu=su,cu=Kt,lu=Vt,pu=Ut,hu=zt,du=Rt,fu=io,yu=ii,_u=void 0,vu=function(t){function e(t){mn(this,e);var n=On(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name=n.constructor.name,n.message=t,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(n,n.constructor):n.stack=new Error(t).stack,n}return xn(e,t),Sn(e,null,[{key:"UnimplementedMethod",value:function(t,n){return new e(t+" (`"+n+"`) needs to be defined in order for the chart to be useful.")}},{key:"InvalidArgumentType",value:function(t,n,r,i){return new e("Method ("+t+') argument "'+n+'" of unexpected type. Expected '+r+", but was given "+i+".")}}]),e}(Error),gu=function(){function t(e,n){var r=this;mn(this,t),this._instances=[];for(var i=arguments.length,o=Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];this._methodsToProxy=n.concat(hu.apply(void 0,o)),this._methodsToProxy.forEach(function(t){return r.addProxyMethod(t)}),e.forEach(function(t){return r.addInstance(t)})}return Sn(t,[{key:"addProxyMethod",value:function(t){this[t]=this.invokeProxyMethod.bind(this,t)}},{key:"removeProxyMethod",value:function(t){var e=this._methodsToProxy.indexOf(t);e>-1&&this._methodsToProxy.splice(e,1)}},{key:"addInstance",value:function(t){t&&this._instances.push(t);
}},{key:"removeChart",value:function(t){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1)}},{key:"invokeProxyMethod",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return this._instances.forEach(function(e){if(!(e&&e[t]&&ke(e[t])))throw new vu("Cannot invoke "+t+" on "+e);e[t].apply(e,n)}),this}},{key:"getProxiedMethods",value:function(){return this._methodsToProxy}},{key:"destroy",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._instances.forEach(function(t){t&&t.destroy&&ke(t.destroy)&&t.destroy.apply(t,e)}),this._instances.length=0}}]),t}(),bu=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,null,[{key:"RequiredOption",value:function(t){return new vu('Option "'+t+'" is required.')}},{key:"InvalidEnumOption",value:function(t,e){return new vu('Option "'+t+'" must be set to a valid option. The value "'+e+'" is not valid.')}}]),e}(vu),mu=void 0,Su=function t(e){mn(this,t),this.value=e},Au=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),e}(Su),ku={FPS_30:33,FPS_20:50,FPS_15:66,FPS_10:100,FPS_05:200},xu={timeoutDelayMs:ku.FPS_15,target:window,eventName:"resize",documentLoadRun:!0},Ou=function(){function t(e){var n=this;if(mn(this,t),this.opts=je(e,xu),this.callbacks=[],this.running=!1,this.pendingFrame=null,this.pendingTimeout=null,this.listenerAttached=!1,this.documentReady=null,!this.opts.eventName)throw new t.EventWatcherException("An event name must be given!");this.opts.documentLoadRun&&!function(){var t=n,e=function e(){setTimeout(function(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t.documentReady=!0,t.runCallbacks()},0)};n.documentReady=!1,document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e),"complete"===document.readyState&&e()}()}return Sn(t,[{key:"_fired",value:function(){if(!this.running){this.running=!0;var t=this._runCallbacks.bind(this);window.requestAnimationFrame?this.pendingFrame=window.requestAnimationFrame(t):this.pendingTimeout=setTimeout(t,this.opts.timeoutDelayMs)}}},{key:"_runCallbacks",value:function(){this.pendingFrame=this.pendingTimeout=null,this.runCallbacks(),this.running=!1}},{key:"runCallbacks",value:function(){this.callbacks.forEach(function(t){return t()})}},{key:"add",value:function(t){this.listenerAttached||(this.opts.target.addEventListener(this.opts.eventName,this._fired.bind(this)),this.listenerAttached=!0),t&&this.callbacks.push(t)}},{key:"remove",value:function(t){if(this.callbacks.length){var e=this.callbacks.indexOf(t);e>-1&&this.callbacks.splice(e,1)}return this}},{key:"destroy",value:function(){this.pendingFrame?window.cancelAnimationFrame(this.pendingFrame):this.pendingTimeout&&clearTimeout(this.pendingTimeout),this.listenerAttached&&this.opts.target.removeEventListener(this.opts.eventName,this._fired.bind(this))}},{key:"timeoutDelay",value:function(){var t=arguments.length<=0||void 0===arguments[0]?null:arguments[0];return null===t?this.opts.timeoutDelayMs:(this.opts.timeoutDelayMs=t,this)}}]),t}(),Pu=function(){function t(){mn(this,t),this._developerMode=!1,this._developerModeEvents=null,this._resizeWatch=new Ou,this.extensionId=0}return Sn(t,[{key:"getNextExtensionId",value:function(){return this.extensionId++}},{key:"getResizeWatcher",value:function(){return this._resizeWatch}},{key:"isDeveloperMode",value:function(){return this._developerMode}},{key:"setDeveloperModeEvents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._developerModeEvents=hu(e),this._developerMode=!0}},{key:"getDeveloperModeEvents",value:function(){return this._developerModeEvents}},{key:"clearDeveloperModeEvents",value:function(){this._developerModeEvents=null}},{key:"clearDeveloperMode",value:function(){this._developerMode=!1}},{key:"enableDeveloperMode",value:function(){this._developerMode=!0}}]),t}(),Cu=new Pu;window&&(window.MonteGlobal=Cu);var Eu="drawPath",Iu={css:"",boundingWidth:800,boundingHeight:450,margin:{top:0,right:0,bottom:0,left:0},customEvents:[],extensions:[],transition:{duration:ir,ease:ar,delay:or},resize:null,autoResetCssDomains:!0,directUse:!1},ju=function(){function t(e,n,r){mn(this,t),this._constructed=!1,this._optsSet=!1,this.parentSelector=e,this.hasRendered=!1,this.layers=[],this.extensions=[],this._optionReaderCache={},this._initOptions(n),this._initPublicEvents.apply(this,Pn(Zn).concat(Pn(Kn),Pn($n),Pn(this.opts.customEvents))),(this.opts.developerMode||Cu.isDeveloperMode())&&this._initDeveloperMode(),this._initCore(),this._initCustomize(),this._updateBounds(),this._bindExt(this.opts.extensions),this._initRender(),this._constructed=!0,this._resizeHandler&&Cu.getResizeWatcher().documentReady&&this._resizeHandler(),r&&this.data(r)}return Sn(t,[{key:"_initOptions",value:function(){this.opts={};for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=je.apply(void 0,e.concat([Iu]));for(var i in r)r.hasOwnProperty(i)&&this.option(i,r[i]);this._optsSet=!0}},{key:"_initCore",value:function(){var t=this,e=d3.select(this.parentSelector);"svg"===e.node().tagName.toLowerCase()?this.bound=e:this.bound=e.append("svg"),this.bound.attr("class",this._buildCss(["monte-chart",this.opts.css,this.opts.chartCss])),this.defs=this.bound.append("defs"),this.clip=this.defs.append("clipPath").attr("id",Eu),this.clipRect=this.clip.append("rect").attr("x",0).attr("y",0),this.addLayer("bg"),this.addLayer("support"),this.addLayer("draw"),this.addLayer("overlay");var n=this;if(Zn.forEach(function(e){t.bound.on(e,function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];n.__notify.apply(n,[e,this].concat(r))})}),this.opts.resize){var r=this.opts.resize;this._resizeHandler=r.resize.bind(r,this),Cu.getResizeWatcher().add(this._resizeHandler)}}},{key:"_initPublicEvents",value:function(){for(var t,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];this._events=n,this.dispatch=(t=d3).dispatch.apply(t,n)}},{key:"_initDeveloperMode",value:function(){var t=this,e=function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o="(no arguments)";r&&r.length>0&&(o="\n",r.forEach(function(t,e){return o+="\t"+e+": "+t+"\n"})),console.log("["+t+'] "'+e+'": '+o)};this.developerMode=!0;var n=Oe(this.opts.developerMode)||Cu.getDeveloperModeEvents()?this.opts.developerMode||Cu.getDeveloperModeEvents():this._events;n.forEach(function(n){console.log("["+t+'] Adding listener for "'+n+'"'),t.on(n+".developerMode",e.bind(t,n))})}},{key:"_initCustomize",value:function(){}},{key:"_initRender",value:function(){}},{key:"_updateBounds",value:function(){var t=this,e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];this.__notify(Mn),this.margin=this.opts.margin,this.width=this.opts.boundingWidth-this.margin.left-this.margin.right,this.height=this.opts.boundingHeight-this.margin.top-this.margin.bottom,this.layers.forEach(function(e){return e.attr("transform",t._getLayerTranslate())}),this.bound&&this.bound.attr("width",this.opts.boundingWidthAttr||this.opts.boundingWidth).attr("height",this.opts.boundingHeightAttr||this.opts.boundingHeight),this.clipRect&&this.clipRect.attr("width",this.width).attr("height",this.height);var r=function(){t._constructed&&t.__notify(Bn)},i=function(){t.hasRendered&&t.update()};return e||r(),n||i(),{notify:r,update:i}}},{key:"checkSize",value:function(){return this._resizeHandler&&this._resizeHandler(),this}},{key:"destroy",value:function(){this.__notify(Wn),this._resizeHandler&&Cu.resizeWatch.remove(this._resizeHandler),this._destroy(),this.bound.node()===d3.select(this.parentSelector).node()?this.bound.node().innerHTML="":this.bound.remove(),this.__notify(Un)}},{key:"_destroy",value:function(){}},{key:"addLayer",value:function(t){var e=this.bound.append("g").attr("class","monte-"+t);return this[t]=e,this.layers.push(e),this}},{key:"layerUseClipPath",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?Eu:arguments[1];return this[t].attr("clip-path","url(#"+e+")"),this}},{key:"_getLayerTranslate",value:function(){return"translate("+this.margin.left+", "+this.margin.top+")"}},{key:"boundingRect",value:function(t,e){if(0===arguments.length)return[this.opts.boundingWidth,this.opts.boundingHeight];var n=this.option("margin.left")+this.option("margin.right");if(t<n&&(t=n),this.opts.boundingWidth=t,2===arguments.length){var r=this.option("margin.top")+this.option("margin.bottom");e<r&&(e=r),this.opts.boundingHeight=e}return this._updateBounds(),this.update(),this}},{key:"on",value:function(t,e){return e?(this.dispatch.on(t,e),this):this.dispatch.on(t)}},{key:"emit",value:function(t){if(t){if(!this.dispatch._[t]){var e="Unknown event "+t+". Double check the spelling or register the event. Custom events must registered at chart creation.";throw new vu(e)}for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.__notify.apply(this,[t].concat(r)),this}}},{key:"option",value:function(t,e){var n=lu(this.opts,t);if(e===mu)return n;this._optsSet&&this.__notify(Gn,t),cu(this.opts,t,e);var r=this.__handleMarginOptions(t,e,n);return this._optsSet&&(r&&this._updateBounds(),this.__notify(Vn,t)),this}},{key:"__handleMarginOptions",value:function(t,e,n){var r=!1;if("margin"===t)if(xe(e))du(n,e)||(r=!0);else{var i={top:e,left:e,right:e,bottom:e};du(n,i)||(this.opts.margin=i,r=!0)}else/^margin\./.test(t)&&n!==e&&(r=!0);return r}},{key:"optionReaderFunc",value:function(t){var e=this;if(!Ae(t))throw vu.InvalidArgumentType("optionReaderFunc","optionKey","string",t);return this._optionReaderCache[t]||(this._optionReaderCache[t]=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return e.tryInvoke.apply(e,[e.opts[t]].concat(r))}),this._optionReaderCache[t]}},{key:"tryInvoke",value:function(t){if(null===t)return null;if(t===mu)throw new bu("Value not initialized.");try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ke(t)?t.call.apply(t,[this].concat(n)):t}catch(t){return this.__notify(Tn,t),null}}},{key:"getProp",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=t+"Prop",i=this.opts[r];return i?e[i]:n}},{key:"getScaledProp",value:function(t,e,n){var r=void 0,i=void 0,o=void 0;if(2===arguments.length)i=t,o=e;else{if(3!==arguments.length)throw new vu("Incorrect number of arguments. Expected 2 or 3 recieved "+arguments.length);i=e,o=n}var a=lu(this,t);if(!a)throw new vu('Scale "'+t+'" is not defined.');return a===Re?mu:ke(a)?(r=xe(o)?o[this.opts[i+"Prop"]]:o,a(r)):a}},{key:"clear",value:function(){return this.__notify(Nn),this.displayData=null,this._clearDataElements(),this.opts.autoResetCssDomains&&this.resetCssDomains(),this.__notify(Hn),this}},{key:"_clearDataElements",value:function(){}},{key:"resetCssDomains",value:function(){return this.__notify(Yn),this._resetCssDomains(),this.__notify(Xn),this}},{key:"_resetCssDomains",value:function(){}},{key:"_buildCss",value:function(t,e,n,r){var i=this,o=[],a=Array.isArray(t)?t:[t];return a.forEach(function(t){Pe(t)&&o.push(i.tryInvoke(t,e,n,r))}),o.join(" ").replace(/\s+/," ")}},{key:"_transitionSetup",value:function(){for(var t=this,e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){var r=t.tryInvoke(t.opts.transition),i=Ce(r,n,"duration",ir),o=Ce(r,n,"delay",or),a=Ce(r,n,"ease",ar);e.duration(i).delay(o).ease(a)}}},{key:"attr",value:function(t,e){return e===mu?this.bound.attr(t):(this.bound.attr(t,e),this)}},{key:"classed",value:function(){var t;return(t=this.bound).classed.apply(t,arguments),this}},{key:"call",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.call.apply(t,[this].concat(n)),this}},{key:"updateData",value:function(t){return this.data(t,!0),this}},{key:"data",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];return t===mu?this.displayData:(e||this.clear(),this._data(t),n||this.update(),this)}},{key:"_data",value:function(t){this.displayData=t}},{key:"getRawData",value:function(){return this.rawData?this.rawData:this.displayData}},{key:"addExt",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this._bindExt(e),this}},{key:"_bindExt",value:function(t){var e=this;t.forEach(function(t){t.opts.binding?(t.setChart(e),e.extensions.push(t)):e.__notify(Tn,"Extensions must have the `binding` option specified.")})}},{key:"__updateExt",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.extensions.forEach(function(e){e.opts.binding.indexOf(t)>-1&&e.fire.apply(e,[t].concat(n))})}},{key:"replaceScale",value:function(t,e){var n=e();return n.range(this[t].range()).domain(this[t].domain()),this[t]=n,this.update(),this}},{key:"update",value:function(){if(this.data())return this.hasRendered||(this.__notify(Dn),this._render(),this.hasRendered=!0,this.__notify(zn)),this.__notify(Fn),this._update(),this.__notify(Ln),this}},{key:"_render",value:function(){}},{key:"_update",value:function(){if(!this.opts.directUse)throw vu.UnimplementedMethod("Update","_update")}},{key:"__bindCommonEvents",value:function(t){var e=this;return function(n){Zn.forEach(function(r){return n.on(r,function(n,i,o){return e.__elemEvent(r,t+":"+r,n,i,o)})})}}},{key:"__notify",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.__updateExt.apply(this,[t].concat(r)),(e=this.dispatch).call.apply(e,[t,this].concat(r))}},{key:"__elemEvent",value:function(t,e,n,r,i){var o=i[r],a=nr[t];a&&("add"===a.action?o.classList.add(a.css):"remove"===a.action&&o.classList.remove(a.css)),this.__notify(e,n,r,i)}},{key:"toString",value:function(){return this.constructor.name}}],[{key:"generateScaleAccessor",value:function(t,e){return e?function(n){var r="opts."+t,i=this.getScaledProp(r,e,n);return this.developerMode&&console.log(r,i),i}:function(e,n){var r=lu(this,"opts."+t)(n);return this.developerMode&&console.log(r),r}}},{key:"createInstanceGroup",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new gu(t,Ru,n)}}]),t}(),Ru=["addExt","addLayer","boundingRect","call","checkSize","classed","clear","data","emit","layerUseClipPath","on","option","replaceScale","resetCssDomains","update","updateData"],Tu="axisRendered",wu="axisRendering",Du=[Tu,wu],zu={axes:["x","y"],suppressAxes:!1,xProp:"x",xScale:d3.scaleLinear,xAxisCustomize:null,xDomainCustomize:null,xRange:function(t,e){return[0,t]},xAxisConstructor:d3.axisBottom,xAxisTransform:function(t,e){return"translate(0,"+e+")"},xLabel:null,xLabelCustomize:Re,yProp:"y",yScale:d3.scaleLinear,yAxisCustomize:null,yDomainCustomize:null,yRange:function(t,e){return[e,0]},yAxisConstructor:d3.axisLeft,yAxisTransform:null,yLabel:null,yLabelCustomize:Re},Fu=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"__axisOpt",value:function(t,e){return this.opts[""+t+e]}},{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[zu])),Pe(this.opts.axes)||(this.opts.axes=[]),this.axes=this.tryInvoke(this.opts.axes)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Du))}},{key:"_initCore",value:function(){var t=this;kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"Range")(t.width,t.height),r=t.__axisOpt(e,"Scale")().range(n);t[e]=r,t[e+"Axis"]=t.__axisOpt(e,"AxisConstructor")(r)})}},{key:"_initCustomize",value:function(){var t=this;this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"AxisCustomize");Oe(n)?!function(){var r=t[e+"Axis"];n.forEach(function(t){return t(r)})}():ke(n)&&n(t[e+"Axis"])})}},{key:"_initRender",value:function(){var t=this;this.forEachAxisScale(function(e){t.support.append("g").attr("class",e+"-axis axis")}),this.updateAxesTransforms(),kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initRender",this).call(this)}},{key:"_updateBounds",value:function(){var t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateBounds",this).call(this,!0,!0);this.updateAxesRanges(),this.updateAxesTransforms(),this.renderAxes(),t.notify(),t.update()}},{key:"_data",value:function(t){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t),this.updateAxesDomains(),this.renderAxes()}},{key:"replaceScale",value:function(t,n){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceScale",this).call(this,t,n),this[t+"Axis"].scale(this[t]),this.renderAxes()}},{key:"updateAxesTransforms",value:function(){var t=this;this.forEachAxisScale(function(e){var n=t.support.select("."+e+"-axis"),r=t.__axisOpt(e,"AxisTransform");r&&n.attr("transform",r(t.width,t.height))})}},{key:"updateAxesRanges",value:function(){var t=this;this.forEachAxisScale(function(e){var n=t.__axisOpt(e,"Range")(t.width,t.height);t[e].range(n)})}},{key:"updateAxesDomains",value:function(){var t=this,e=this.data();this.forEachAxisScale(function(n){var r=t.opts[n+"DomainCustomize"],i=e?t._domainExtent(e,n):[];r&&(i=t.tryInvoke(r,i)),t[n].domain(i)})}},{key:"renderAxes",value:function(){var t=this,e=this.tryInvoke(this.opts.suppressAxes);if(e!==!0){var n=Oe(e),r=this.hasRendered?ur:sr,i=this.bound.transition().call(this._transitionSetup("axis",r));this.forEachAxisScale(function(r){n&&e.indexOf(r)>-1||t.support.select("."+r+"-axis").transition(i).on("start",function(){return t.emit(wu)}).call(t[r+"Axis"]).call(t._setLabel.bind(t,r)).call(function(e){return t.emit(Tu,e)})})}}},{key:"_domainExtent",value:function(t,e){throw vu.UnimplementedMethod("Domain Extent","_domainExtent")}},{key:"forEachAxisScale",value:function(t){this.axes.forEach(t)}},{key:"_setLabel",value:function(t,e){var n=this,r=this.tryInvoke(this.opts[t+"Label"]),i=null===r?[]:[r],o=this.support.select("."+t+"-axis").selectAll(".monte-axis-label").data(i);o.enter().append("text").merge(o).attr("class","monte-axis-label").text(function(t){return t}).call(function(){return n.tryInvoke(n.opts[t+"LabelCustomize"],o)}),o.exit().remove()}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(Lu),(n=kn(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(ju);Fu.EVENTS=Du;var Lu=["forEachAxisScale","renderAxes","replaceScale","updateAxesDomains","updateAxesRanges","updateAxesTransforms"],Mu=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_getLayerTranslate",value:function(){var t=void 0,e=void 0;return this.opts.origin?(t=this.tryInvoke(this.opts.origin.left,this),e=this.tryInvoke(this.opts.origin.top,this)):(t=this.width/2+this.margin.left,e=this.height/2+this.margin.top),"translate("+t+", "+e+")"}}]),e}(ju),Bu={chartCss:"monte-line-chart",margin:{top:10,right:10,bottom:30,left:40},valuesProp:"values",lineProp:"",lineCustomize:null,lineStrokeScale:Re,lineStrokeScaleAccessor:Fu.generateScaleAccessor("lineStrokeScale","lineProp"),lineCssScale:Re,lineCssScaleAccessor:Fu.generateScaleAccessor("lineCssScale","lineProp"),lineCss:"line",includePoints:!0,pointProp:"",pointFillScale:Re,pointFillScaleAccessor:Fu.generateScaleAccessor("pointFillScale","pointProp"),pointStrokeScale:Re,pointStrokeScaleAccessor:Fu.generateScaleAccessor("pointStrokeScale","pointProp"),pointCssScale:Re,pointCssScaleAccessor:Fu.generateScaleAccessor("pointCssScale","pointProp"),pointCss:"point",pointSize:64,pointSymbol:function(t){return t.type(d3.symbolCircle)}},Nu=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Bu]))}},{key:"_initCore",value:function(){var t=this;kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.line=d3.line().x(function(e){return t.getScaledProp("x",e)}).y(function(e){return t.getScaledProp("y",e)})}},{key:"_initCustomize",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.lineCustomize&&this.opts.lineCustomize(this.line)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Pn(Te("line")),Pn(Te("point"))))}},{key:"_domainExtent",value:function(t,e){var n=this.opts.valuesProp,r=this.opts[e+"Prop"],i=t.map(function(t){return d3.extent(t[n],function(t){return t[r]})}),o=[d3.min(i,function(t){return t[0]}),d3.max(i,function(t){return t[1]})];return o}},{key:"_resetCssDomains",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetCssDomains",this).call(this),we(this.opts.lineStrokeScale),we(this.opts.lineCssScale),we(this.opts.pointFillScale),we(this.opts.pointStrokeScale),we(this.opts.pointCssScale)}},{key:"_update",value:function(){var t=this,e=this._updateLines();return this.opts.includePoints&&e.each(function(e,n,r){return t._updateLinePoints(r[n],e,n)}),e}},{key:"_updateLines",value:function(){var t=this,e=this.draw.selectAll(".monte-line-grp").data(this.displayData,function(t,e){return t.id||e});return e.enter().append("g").attr("class","monte-line-grp").append("path").call(this.__bindCommonEvents("line")).merge(e.select(".monte-line")).attr("class",function(e,n){return t._buildCss(["monte-line",t.opts.lineCss,t.opts.lineCssScaleAccessor,e.css],e,n)}).transition().call(this._transitionSetup("line",ur)).attr("d",function(e){return t.line(t.getProp("values",e))}).attr("stroke",this.optionReaderFunc("lineStrokeScaleAccessor")),e.exit().transition().call(this._transitionSetup("line",cr)).style("opacity",0).remove(),e.merge(e.enter().selectAll(".monte-line-grp"))}},{key:"_updateLinePoints",value:function(t,e,n){var r=this,i=d3.select(t),o=i.selectAll(".monte-point").data(function(t){return r.getProp("values",t)}),a=function(t,e){var n=r.tryInvoke(r.opts.pointSize,t,e),i=d3.symbol().size(n),o=r.opts.pointSymbol(i,t,e);return o(t,e)};o.enter().append("path").attr("d",a).call(this.__bindCommonEvents("point")).merge(o).attr("transform",function(t){return"translate("+r.getScaledProp("x",t)+", "+r.getScaledProp("y",t)+")"}).attr("class",function(t){return r._buildCss(["monte-point",e.css,r.opts.lineCssScaleAccessor,r.opts.pointCss,r.opts.pointCssScaleAccessor,t.css],e,n)}),o.transition().call(this._transitionSetup("point",ur)).attr("fill",this.optionReaderFunc("pointFillScaleAccessor")).attr("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(t){return"translate("+r.getScaledProp("x",t)+", "+r.getScaledProp("y",t)+")"}).attr("d",a),o.exit().transition().call(this._transitionSetup("point",cr)).style("opacity",0).remove()}}]),e}(Fu),Hu={chartCss:"monte-area-chart",margin:{top:10,right:10,bottom:30,left:40},areaProp:"",areaCustomize:null,areaFillScale:Re,areaFillScaleAccessor:Nu.generateScaleAccessor("areaFillScale","  areaProp"),areaCssScale:Re,areaCssScaleAccessor:Nu.generateScaleAccessor("areaCssScale","  areaProp"),areaCss:"area",yDomainCustomize:De},Wu=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Hu]))}},{key:"_initCore",value:function(){var t=this;kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.area=d3.area().x(function(e){return t.getScaledProp("x",e)}).y0(function(){return t.height}).y1(function(e){return t.getScaledProp("y",e)})}},{key:"_initCustomize",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.areaCustomize&&this.tryInvoke(this.opts.areaCustomize,this.area)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Pn(Te("area"))))}},{key:"_resetCssDomains",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetCssDomains",this).call(this),we(this.opts.areaCssScale),we(this.opts.areaFillScaleAccessor)}},{key:"_update",value:function(){var t=this,n=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this);n.each(function(e,n,r){t._updateLineArea(r[n],e,n)})}},{key:"_updateLineArea",value:function(t,e,n){var r=this,i=d3.select(t),o=i.selectAll(".monte-area").data(function(t){return[t]}),a=o.enter().insert("path",":first-child").call(this.__bindCommonEvents("area")).merge(o).attr("class",function(t){return r._buildCss(["monte-area",e.css,r.opts.lineCssScaleAccessor,r.opts.areaCss,r.opts.areaCssScaleAccessor,t.css],e,n)});a.transition().call(this._transitionSetup(ur)).attr("d",function(t){return r.area(r.getProp("values",t))}).attr("fill",this.optionReaderFunc("areaFillScaleAccessor")),o.exit().transition().call(this._transitionSetup(cr)).style("opacity",0).remove()}}]),e}(Nu),Uu={chartCss:"monte-sparkline-chart",boundingWidth:80,boundingHeight:30,margin:{top:0,right:0,bottom:0,left:0},suppressAxes:!0,pointSize:24},Gu=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Uu]))}},{key:"_data",value:function(t){var n;this.rawData=t;for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];(n=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[t]].concat(i))}}]),e}(Nu),Vu="updatingLabels",Yu="updatedLabels",Xu=[Vu,Yu],Zu={chartCss:"monte-bar-chart",margin:{top:0,right:0,bottom:30,left:40},barCssScale:Re,barCssScaleAccessor:Fu.generateScaleAccessor("barCssScale","x"),barFillScale:Re,barFillScaleAccessor:Fu.generateScaleAccessor("barFillScale","x"),barCss:"bar",barGrpCss:function(t){var e=this.getProp("y",t),n="monte-bar-zero";return e>0?n="monte-bar-pos":e<0&&(n="monte-bar-neg"),n},xProp:"id",yProp:"value",xScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},yDomainCustomize:ze,includeLabels:!1,labelProp:"value",labelFillScale:Re,labelFillScaleAccessor:Fu.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t)},labelXAdjust:"",labelX:function(t){return this._barX(t)+this.x.bandwidth()/2},labelYAdjust:function(t){var e=this.getProp("y",t);return e>0?"-0.05em":"1.05em"},labelY:function(t){var e=this.getProp("y",t);return e>0?this._barY(t):this._barY(t)+this._barHeight(t)}},Ku=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Zu]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Pn(Te("bar")),Xu))}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;return"y"===e?r=d3.extent(t,function(t){return n.getProp("y",t)}):"x"===e&&(r=t.map(function(t){return n.getProp("x",t)})),r}},{key:"_resetCssDomains",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetCssDomains",this).call(this),we(this.opts.barCssScale),we(this.opts.barFillScale),we(this.opts.labelFillScale)}},{key:"_update",value:function(){var t=this,e=this._updateBars();this.opts.includeLabels&&(this.emit(Vu),e.each(function(e,n,r){var i=d3.select(r[n]);t._updateBarLabel(i,e,n,r)}),this.emit(Yu))}},{key:"_updateBars",value:function(){var t=this,e=this.draw.selectAll(".monte-bar-grp").data(this.displayData,function(t,e){return t.id||e}),n=this._barX.bind(this),r=this._barY.bind(this),i=this._barWidth.bind(this),o=this._barHeight.bind(this);return e.enter().append("g").attr("class",function(e,n){return t._buildCss(["monte-bar-grp",t.opts.barGrpCss],e,n)}).append("rect").attr("x",n).attr("y",r).attr("width",i).attr("height",o).attr("fill-test","red").attr("fill",this.optionReaderFunc("barFillScaleAccessor")).call(this.__bindCommonEvents("bar")).merge(e.select("rect")).attr("class",function(e,n){return t._buildCss([t.opts.barCss,t.opts.barCssScale,e.css],e,n)}).transition().call(this._transitionSetup(sr)),e.select("rect").attr("fill",this.optionReaderFunc("barFillScaleAccessor")).transition().call(this._transitionSetup(ur)).attr("x",n).attr("y",r).attr("width",i).attr("height",o),e.exit().transition().call(this._transitionSetup(cr)).style("opacity",0).remove(),e.merge(e.enter().selectAll(".monte-bar-grp"))}},{key:"_updateBarLabel",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-bar-label").data([e]);o.enter().append("text").attr("class","monte-bar-label").merge(o).attr("fill",function(t){return i.tryInvoke(i.opts.labelFillScaleAccessor,t,n,r)}).attr("x",function(t){return i.tryInvoke(i.opts.labelX,t,n,r)}).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("y",function(t){return i.tryInvoke(i.opts.labelY,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}),o.exit().remove()}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barWidth",value:function(){return this.x.bandwidth()}},{key:"_barY",value:function(t){var e=this.getProp("y",t);return e<0?this.y(0):this.getScaledProp("y",t)}},{key:"_barHeight",value:function(t){return this.y.domain()[0]<0?Math.abs(this.height-this.getScaledProp("y",t)-this.y(0)):this.height-this.getScaledProp("y",t)}}]),e}(Fu);Ku.EVENTS=Xu;var $u,qu={chartCss:"monte-horizontal-bar-chart",margin:{top:0,right:0,bottom:40,left:40},barCssScaleAccessor:Ku.generateScaleAccessor("barCssScale","y"),barFillScaleAccessor:Ku.generateScaleAccessor("barFillScale","y"),xProp:"value",yProp:"id",xScale:d3.scaleLinear,yScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},xDomainCustomize:ze,yDomainCustomize:null,barGrpCss:function(t){var e=this.getProp("x",t),n="monte-bar-zero";return e>0?n="monte-bar-pos":e<0&&(n="monte-bar-neg"),n},labelX:function(t){var e=this.getProp("x",t);return e>0?this._barWidth(t)+this._barX(t):this._barX(t)},labelXAdjust:"",labelY:function(t){
return this._barY(t)+this.y.bandwidth()/2},labelYAdjust:"0.35em"},Ju=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[qu]))}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;return"x"===e?r=d3.extent(t,function(t){return t[n.opts.xProp]}):"y"===e&&(r=t.map(function(t){return t[n.opts.yProp]})),r}},{key:"_barX",value:function(t){var e=this.getProp("x",t);return e>0?this.x(0):this.x(0)-this._barWidth(t)}},{key:"_barWidth",value:function(t){return Math.abs(this.getScaledProp("x",t)-this.x(0))}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barHeight",value:function(){return this.y.bandwidth()}}]),e}(Ku),Qu={chartCss:"monte-simple-bar-chart",boundingWidth:10,boundingHeight:100,margin:{top:0,right:0,bottom:0,left:0},suppressAxes:!0,xScale:function(){return d3.scaleBand().paddingInner(0).round(!0)},yDomainCustomize:[0,100]},tc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Qu]))}},{key:"_data",value:function(t){var n,r=this.tryInvoke(this.opts.yProp),i=xe(t)?t:An({},r,t);i.css||(i.css="monte-simple-bar-value"),this.rawData=t;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(n=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[i]].concat(a))}}]),e}(Ku),ec={chartCss:"monte-simple-horizontal-bar-chart",boundingWidth:100,boundingHeight:10,margin:{top:0,right:0,bottom:0,left:0},suppressAxes:!0,xDomainCustomize:[0,100],yScale:function(){return d3.scaleBand().paddingInner(0).round(!0)}},nc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ec]))}},{key:"_data",value:function(t){var n,r=this.tryInvoke(this.opts.xProp),i=xe(t)?t:An({},r,t);i.css||(i.css="monte-simple-hort-bar-value"),this.rawData=t;for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];(n=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(n,[this,[i]].concat(a))}}]),e}(Ju),rc={GROUPED:"grouped",STACKED:"stacked"},ic=($u={},An($u,rc.GROUPED,"monte-segment-mode-grouped"),An($u,rc.STACKED,"monte-segment-mode-stacked"),$u),oc="modeChanging",ac="modeChanged",sc=[oc,ac],uc={chartCss:"monte-segment-bar-chart",barSegmentCss:"bar-segment",margin:{top:10,right:0,bottom:30,left:40},segmentBarMode:rc.STACKED,xProp:"id",yProp:"values",xInnerProp:"type",yInnerProp:"value",xInnerScale:function(){return d3.scaleBand().paddingInner(.1).paddingOuter(.1).round(!0)},barSegCssScale:Re,barSegCssScaleAccessor:Fu.generateScaleAccessor("barSegCssScale","x"),barSegFillScale:Re,barSegFillScaleAccessor:Fu.generateScaleAccessor("barSegFillScale","x"),xScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},yDomainCustomize:ze,includeLabels:!1,labelProp:"value",labelFillScale:Re,labelFillScaleAccessor:Fu.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t)},labelXAdjust:"",labelX:function(t){var e=this.option("segmentBarMode");return e===rc.STACKED?this.x.bandwidth()/2:e===rc.GROUPED?this._barXInnerGrouped(t)+this.xInner.bandwidth()/2:void 0},labelYAdjust:"1.05em",labelY:function(t,e,n){var r=this.option("segmentBarMode");return r===rc.STACKED?this._barYInnerStacked(t,e,n):r===rc.GROUPED?this._barYInnerGrouped(t):void 0}},cc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[uc]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Pn(Te("bargrp")),Pn(Te("barseg")),sc))}},{key:"_initCore",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this._initInnerScales()}},{key:"_initInnerScales",value:function(){this.xInner=this.opts.xInnerScale()}},{key:"_extentInner",value:function(t,e){var n=this,r=[];return t.forEach(function(t){n.getProp(e,t).forEach(function(t){return r.push(n.getProp(e+"Inner",t))})}),d3.extent(r)}},{key:"_extentMaxes",value:function(t,e){var n=this,r=t.map(function(t){return d3.sum(n.getProp(e,t),function(t){return n.getProp(e+"Inner",t)})});return[0,d3.max(r)]}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;if("x"===e)r=t.map(function(t){return n.getProp("x",t)});else if("y"===e){var i=this.tryInvoke(this.opts.segmentBarMode);if(i===rc.GROUPED)r=this._extentInner(t,"y");else{if(i!==rc.STACKED)throw bu.InvalidEnumOption("segmentBarMode",i);r=this._extentMaxes(t,"y")}}return r}},{key:"_resetCssDomains",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetCssDomains",this).call(this),we(this.opts.barSegCssScale),we(this.opts.barSegFillScale),we(this.opts.labelFillScaleAccessor)}},{key:"setMode",value:function(t){this.option("segmentBarMode",t),this.emit(oc),this.updateAxesDomains(),this.renderAxes(),this.update(),this.emit(ac)}},{key:"updateAxesRanges",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"updateAxesRanges",this).call(this),this._updateXInnerRange(),this._updateYInnerRange()}},{key:"_updateXInnerRange",value:function(){this.xInner.range([0,this.x.bandwidth()])}},{key:"_updateXInnerDomain",value:function(){var t=this.data(),e=this.tryInvoke(this.opts.yProp),n=this.tryInvoke(this.opts.xInnerProp),r=t[0][e].map(function(t){return t[n]});this.xInner.domain(r)}},{key:"_updateYInnerRange",value:function(){}},{key:"_updateYInnerDomain",value:function(){}},{key:"_data",value:function(t){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t),this._updateXInnerDomain(),this._updateXInnerRange(),this._updateYInnerDomain(),this._updateYInnerRange()}},{key:"_render",value:function(){var t=this.tryInvoke(this.opts.segmentBarMode),e=ic[t];this.classed(e,!0)}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.segmentBarMode),n=Be(ic,e),r=ic[e],i=void 0,o=void 0;if(this.classed(r,!0),e===rc.STACKED){var a=this._updateStackedBars();i=a.barGrps,o=a.transition}else{if(e!==rc.GROUPED)throw bu.InvalidEnumOption("segmentBarMode",e);var s=this._updateGroupedBars();i=s.barGrps,o=s.transition}this.opts.includeLabels&&i&&(i.size()?this._updateLabels(i,o):o.on("end.labels",function(){t._updateLabels(t.draw.selectAll(".monte-segment-bar-grp"),o)})),o&&o.on("end.classes",function(){n.forEach(function(e){return t.classed(e,!1)})})}},{key:"_updateStackedBars",value:function(){var t=this._barXInnerStacked.bind(this),e=this._barYInnerStacked.bind(this),n=this._barWidthStacked.bind(this),r=this._barHeightStacked.bind(this);return this._updateBars(t,e,n,r)}},{key:"_updateGroupedBars",value:function(){var t=this._barXInnerGrouped.bind(this),e=this._barYInnerGrouped.bind(this),n=this._barWidthGrouped.bind(this),r=this._barHeightGrouped.bind(this);return this._updateBars(t,e,n,r)}},{key:"_updateBars",value:function(t,e,n,r){var i=this,o=this._barGroupTranslate.bind(this),a=this.draw.selectAll(".monte-segment-bar-grp").data(this.displayData),s=this.draw.transition().call(this._transitionSetup("bars",ur));return a.enter().append("g").attr("class","monte-segment-bar-grp").call(this.__bindCommonEvents("bargrp")).merge(a).attr("transform",function(t){return"translate("+o(t)+")"}).each(function(o,a,u){var c=i._barProp(),l=o[c],p=d3.select(u[a]).selectAll("rect").data(l);p.enter().append("rect").call(i.__bindCommonEvents("barseg")).merge(p).attr("class",function(t,e){return i._buildCss(["monte-segment-bar-seg",i.opts.barSegCss,i.opts.barSegCssScaleAccessor,t.css],t,e)}).transition(s).attr("fill",i.optionReaderFunc("barSegFillScaleAccessor")).attr("x",t).attr("y",e).attr("width",n).attr("height",r)}),a.exit().transition().call(this._transitionSetup(cr)).remove(),{barGrps:a.merge(a.enter().selectAll(".monte-bar-grp")),transition:s}}},{key:"_segLabels",value:function(t){return this.getProp("y",t)}},{key:"_updateLabels",value:function(t,e){var n=this;t.each(function(t,r,i){var o=d3.select(i[r]);n._updateBarSegLabel(o,e,t,r,i)})}},{key:"_updateBarSegLabel",value:function(t,e,n){var r=this,i=t.selectAll(".monte-bar-label").data(this._segLabels(n));i.enter().append("text").attr("class","monte-bar-label").merge(i).text(function(t,e,n){return r.tryInvoke(r.opts.label,t,e,n)}).transition(e).attr("fill",function(t,e,n){return r.tryInvoke(r.opts.labelFillScaleAccessor,t,e,n)}).attr("x",function(t,e,n){return r.tryInvoke(r.opts.labelX,t,e,n)}).attr("dx",function(t,e,n){return r.tryInvoke(r.opts.labelXAdjust,t,e,n)}).attr("y",function(t,e,n){return r.tryInvoke(r.opts.labelY,t,e,n)}).attr("dy",function(t,e,n){return r.tryInvoke(r.opts.labelYAdjust,t,e,n)}),i.exit().transition().call(this._transitionSetup(cr)).remove()}},{key:"_barProp",value:function(){return this.tryInvoke(this.opts.yProp)}},{key:"_barGroupTranslate",value:function(t){return this._barX(t)+", 0"}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barXInnerGrouped",value:function(t){return this.getScaledProp("xInner",t)}},{key:"_barXInnerStacked",value:function(){return 0}},{key:"_barWidthStacked",value:function(){return this.x.bandwidth()}},{key:"_barWidthGrouped",value:function(){return this.xInner.bandwidth()}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barYInnerGrouped",value:function(t){return this.height-this._barHeightGrouped(t)}},{key:"_barYInnerStacked",value:function(t,e,n){for(var r=this.getScaledProp("y","yInner",t),i=0,o=0;o<e;o++){var a=d3.select(n[o]),s=a.datum();i-=this._barHeightStacked(s)}return r+i}},{key:"_barHeightGrouped",value:function(t){return this.height-this.getScaledProp("y","yInner",t)}},{key:"_barHeightStacked",value:function(t){return this.height-this.getScaledProp("y","yInner",t)}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(lc),(n=kn(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Fu);cc.EVENTS=sc;var lc=["setMode","updateAxesRanges"],pc={chartCss:"monte-horizontal-segment-bar-chart",barSegmentCss:"bar-segment",margin:{top:0,right:10,bottom:20,left:40},segmentBarMode:rc.STACKED,barSegCssScaleAccessor:cc.generateScaleAccessor("barSegCssScale","y"),barSegFillScaleAccessor:cc.generateScaleAccessor("barSegFillScale","y"),yProp:"id",xProp:"values",yInnerProp:"type",xInnerProp:"value",xScale:d3.scaleLinear,yInnerScale:function(){return d3.scaleBand().paddingInner(.1).paddingOuter(.1).round(!0)},yScale:function(){return d3.scaleBand().paddingInner(.1).round(!0)},xDomainCustomize:ze,yDomainCustomize:null,labelXAdjust:"-0.1em",labelX:function(t,e,n){var r=this.option("segmentBarMode");return r===rc.STACKED?this._barXInnerStacked(t,e,n)+this._barWidthStacked(t):r===rc.GROUPED?this._barWidthGrouped(t):void 0},labelYAdjust:"0.35em",labelY:function(t){var e=this.option("segmentBarMode");return e===rc.STACKED?this.y.bandwidth()/2:e===rc.GROUPED?this._barYInnerGrouped(t)+this.yInner.bandwidth()/2:void 0}},hc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[pc]))}},{key:"_initInnerScales",value:function(){this.yInner=this.opts.yInnerScale()}},{key:"_updateXInnerRange",value:function(){}},{key:"_updateXInnerDomain",value:function(){}},{key:"_updateYInnerRange",value:function(){this.yInner.range([0,this.y.bandwidth()])}},{key:"_updateYInnerDomain",value:function(){var t=this.data(),e=this.tryInvoke(this.opts.xProp),n=this.tryInvoke(this.opts.yInnerProp),r=t[0][e].map(function(t){return t[n]});this.yInner.domain(r)}},{key:"_domainExtent",value:function(t,e){var n=this,r=null;if("y"===e)r=t.map(function(t){return n.getProp("y",t)});else if("x"===e){var i=this.tryInvoke(this.opts.segmentBarMode);if(i===rc.GROUPED)r=this._extentInner(t,"x");else{if(i!==rc.STACKED)throw bu.InvalidEnumOption("segmentBarMode",i);r=this._extentMaxes(t,"x")}}return r}},{key:"_segLabels",value:function(t){return this.getProp("x",t)}},{key:"_barProp",value:function(){return this.tryInvoke(this.opts.xProp)}},{key:"_barGroupTranslate",value:function(t){return"0, "+this._barY(t)}},{key:"_barX",value:function(t){return this.getScaledProp("x",t)}},{key:"_barXInnerGrouped",value:function(){return 0}},{key:"_barXInnerStacked",value:function(t,e,n){for(var r=0,i=0,o=0;o<e;o++){var a=d3.select(n[o]),s=a.datum();i+=this._barWidthStacked(s)}return r+i}},{key:"_barWidthGrouped",value:function(t){return this.getScaledProp("x","xInner",t)}},{key:"_barWidthStacked",value:function(t){return this.getScaledProp("x","xInner",t)}},{key:"_barY",value:function(t){return this.getScaledProp("y",t)}},{key:"_barYInnerGrouped",value:function(t){return this.getScaledProp("yInner",t)}},{key:"_barYInnerStacked",value:function(){return 0}},{key:"_barHeightGrouped",value:function(){return this.yInner.bandwidth()}},{key:"_barHeightStacked",value:function(){return this.y.bandwidth()}}]),e}(cc),dc={chartCss:"monte-scatter-plot",margin:{top:10,right:10,bottom:30,left:40},pointSize:64,pointProp:"",pointFillScale:Re,pointFillScaleAccessor:Fu.generateScaleAccessor("pointFillScale","point"),pointStrokeScale:Re,pointStrokeScaleAccessor:Fu.generateScaleAccessor("pointStrokeScale","point"),pointCssScale:Re,pointCssScaleAccessor:Fu.generateScaleAccessor("pointCssScale","point"),pointCss:"monte-point",pointSymbol:function(t){return t.type(d3.symbolCircle)}},fc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[dc]))}},{key:"_initCore",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.symbol=d3.symbol()}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Pn(Te("point"))))}},{key:"_domainExtent",value:function(t,e){var n=this.opts[e+"Prop"],r=d3.extent(t,function(t){return t[n]});return r}},{key:"_resetCssDomains",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetCssDomains",this).call(this),we(this.opts.pointCssScale),we(this.opts.pointFillScaleAccessor),we(this.opts.pointStrokeScaleAccessor)}},{key:"_update",value:function(){var t=this._updatePoints();return t}},{key:"_updatePoints",value:function(){var t=this,e=this.draw.selectAll(".monte-point").data(this.displayData);return e.enter().append("path").call(this.__bindCommonEvents("point")).merge(e).attr("d",function(e,n){var r=d3.symbol().size(t.opts.pointSize),i=t.opts.pointSymbol(r,e,n);return i(e,n)}).attr("class",function(e,n){return t._buildCss(["monte-point",t.opts.pointCss,t.opts.pointCssScaleAccessor,e.css],e,n)}).transition().call(this._transitionSetup("point",ur)).attr("fill",this.optionReaderFunc("pointFillScaleAccessor")).attr("stroke",this.optionReaderFunc("pointStrokeScaleAccessor")).attr("transform",function(e){return"translate("+t.getScaledProp("x",e)+", "+t.getScaledProp("y",e)+")"}),e.exit().transition().call(this._transitionSetup("point",cr)).style("opacity",0).remove(),e.merge(e.enter().selectAll(".point"))}}]),e}(Fu),yc={D3_SYMBOL:"d3Symbol",SVG_USE_DEF:"svgUseDef",SVG_USE_EXTERNAL:"svgUseExternal"},_c={BottomToTopLeftToRightPlacement:{rowIndex:function(t,e){return Math.floor(e/this.opts.columns)},columnIndex:function(t,e){return e%this.opts.columns}},TopToBottomLeftToRightPlacement:{rowIndex:function(t,e){return this.opts.rows-Math.floor(e/this.opts.columns)-1},columnIndex:function(t,e){return e%this.opts.columns}}},vc={chartCss:"monte-icon-array",boundingWidth:100,boundingHeight:100,margin:{top:0,right:0,bottom:0,left:0},suppressAxes:!0,xScale:function(){return d3.scalePoint().padding(.5)},yScale:function(){return d3.scalePoint().padding(.5)},iconProp:"",iconFillScale:Re,iconFillScaleAccessor:Fu.generateScaleAccessor("iconFillScale","icon"),iconStrokeScale:Re,iconStrokeScaleAccessor:Fu.generateScaleAccessor("iconStrokeScale","icon"),iconCssScale:Re,iconCssScaleAccessor:Fu.generateScaleAccessor("iconCssScale","icon"),iconCss:"icon",iconSize:24,iconSymbol:function(t){return t.type(d3.symbolCircle)},iconMode:yc.D3_SYMBOL,iconDefId:"svgIcon",iconSvgWidth:24,iconSvgHeight:24,iconHref:"",iconSvgSymbol:function(t){t.attr("viewbox","0 0 24 24").append("path").attr("d","m 0,0 24,24 m -24,0 24,-24")},rows:10,columns:10,placement:_c.TopToBottomLeftToRightPlacement,svgVersion:1},gc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[vc]))}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Pn(Te("icon"))))}},{key:"_resetCssDomains",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetCssDomains",this).call(this),we(this.opts.iconCssScale),we(this.opts.iconFillScale),we(this.opts.iconStrokeScale)}},{key:"_domainExtent",value:function(t,e){var n=null;return"y"===e?n=new Array(this.opts.rows):"x"===e&&(n=new Array(this.opts.columns)),n.fill().map(function(t,e){return e})}},{key:"_render",value:function(){var t=this;this.opts.iconMode===yc.SVG_USE_DEF&&!function(){var e=t;t.defs.append("symbol").attr("id","svgIcon").each(function(){e.opts.iconSvgSymbol(d3.select(this))})}()}},{key:"_update",value:function(){var t=this.opts.rows*this.opts.columns;if(t<this.displayData.length)throw new vu("Maximum number of items is "+t+". Data contains "+this.displayData.length+".");this._updateIcons()}},{key:"_updateIcons",value:function(){var t,e=(t={},An(t,yc.D3_SYMBOL,this._updateD3Symbol),An(t,yc.SVG_USE_DEF,this._updateSvgUse),An(t,yc.SVG_USE_EXTERNAL,this._updateSvgUse),t),n=this.draw.selectAll(".monte-icon").data(this.displayData);e[this.opts.iconMode].call(this,n,this.opts.iconMode),n.exit().transition().call(this._transitionSetup("icon",cr)).style("opacity",0).remove()}},{key:"_updateD3Symbol",value:function(t){var e=this,n=function(t,n){var r=e.tryInvoke(e.opts.iconSize,t,n),i=d3.symbol().size(r),o=e.opts.iconSymbol(i,t,n);return o(t,n)};this._updateCommon("path",t,Ne).attr("d",n)}},{key:"_updateSvgUse",value:function(t,e){var n=this,r=e===yc.SVG_USE_DEF?function(t,e,r){return"#"+n.tryInvoke(n.opts.iconDefId,t,e,r)}:function(t,e,r){return n.tryInvoke(n.opts.iconHref,t,e,r)},i=function(t,e,r){var i=d3.select(r[e]);i.attr("width",n.opts.iconSvgWidth).attr("height",n.opts.iconSvgHeight)},o=2===this.tryInvoke(this.opts.svgVersion)?"href":"xlink:href";this._updateCommon("use",t,He,i).attr(o,r)}},{key:"_updateCommon",value:function(t,e,n){var r=this,i=arguments.length<=3||void 0===arguments[3]?Re:arguments[3],o=e.enter().append(t).call(this.__bindCommonEvents("icon")).merge(e).each(i).attr("transform",function(t,e,i){return n.call(r,t,e,i)}).attr("class",function(t,e){return r._buildCss(["monte-icon",r.opts.iconCss,r.opts.iconCssScaleAccessor,t.css],t,e)}).transition().call(this._transitionSetup("icon",ur)).attr("fill",this.optionReaderFunc("iconFillScaleAccessor")).attr("stroke",this.optionReaderFunc("iconStrokeScaleAccessor"));return o}}]),e}(Fu),bc=1e-12,mc=Math.PI,Sc=mc/2,Ac=2*mc,kc=Object.freeze({EPSILON:bc,PI:mc,HALF_PI:Sc,TAU:Ac}),xc="monte-polar-label-",Oc={CENTROID:{css:xc+"centroid",radius:function(t,e){var n=this.tryInvoke(this.option("innerRadius"),t,e),r=this.tryInvoke(this.option("outerRadius"),t,e);return n+.5*(r-n)}},INNER:{css:xc+"inner",radius:function(t,e){var n=this.tryInvoke(this.option("innerRadius"),t,e);return.9*n}},OUTER:{css:xc+"outer",radius:function(t,e){var n=this.tryInvoke(this.option("outerRadius"),t,e);return 1.1*n}}},Pc=new RegExp("^"+xc+"*"),Cc="updatingLabels",Ec="updatedLabels",Ic=[Cc,Ec],jc={chartCss:"monte-arc-chart",cornerRadius:0,innerRadius:0,outerRadius:nn,arcCustomize:null,arcCss:"arc",arcWedgeCss:"wedge",arcWedgeCssScale:Re,arcWedgeCssScaleAccessor:Mu.generateScaleAccessor("arcWedgeCssScale","itemValue"),arcWedgeFillScale:Re,arcWedgeFillScaleAccessor:Mu.generateScaleAccessor("arcWedgeFillScale","itemValue"),arcWedgeStrokeScale:Re,arcWedgeStrokeScaleAccessor:Mu.generateScaleAccessor("arcWedgeStrokeScale","itemValue"),arcWedgeEnter:function(t){return{startAngle:t.endAngle,endAngle:t.endAngle,value:t.value,padAngle:t.padAngle,index:t.index}},arcBgWedgeCssScale:Re,arcBgWedgeCssScaleAccessor:Mu.generateScaleAccessor("arcBgWedgeCssScale","itemValue"),arcBgWedgeFillScale:Re,arcBgWedgeFillScaleAccessor:Mu.generateScaleAccessor("arcBgWedgeFillScale","itemValue"),itemValueProp:"value",pieStartAngle:0,pieEndAngle:Ac,piePadAngle:.02,includeLabels:!1,labelPlacement:We,labelAngle:function(t){return t.startAngle+(t.endAngle-t.startAngle)/2},labelProp:"value",labelFillScale:Re,labelFillScaleAccessor:Mu.generateScaleAccessor("labelFillScale","label"),label:function(t){return this.getProp("label",t.data)},labelXAdjust:"",labelYAdjust:"0.35em"},Rc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[jc]))}},{key:"_initCore",value:function(){var t=this;kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.arc=d3.arc().cornerRadius(this.opts.cornerRadius),this.pie=d3.pie().value(function(e){return e[t.opts.itemValueProp]}).sortValues(null).startAngle(this.opts.pieStartAngle).endAngle(this.opts.pieEndAngle).padAngle(this.opts.piePadAngle)}},{key:"_initCustomize",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCustomize",this).call(this),this.opts.arcCustomize&&this.opts.arcCustomize(this.arc),this.opts.pieCustomize&&this.opts.pieCustomize(this.pie)}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Pn(Te("wedge")),Ic))}},{key:"_resetCssDomains",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetCssDomains",this).call(this),we(this.opts.arcWedgeCssScale),we(this.opts.arcWedgeFillScale),we(this.opts.arcWedgeStrokeScale),we(this.opts.arcBgWedgeCssScaleAccessor),we(this.opts.arcBgWedgeFillScaleAccessor),we(this.opts.labelFillScaleAccessor)}},{key:"_updateBounds",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateBounds",this).call(this),this.arc.innerRadius(this.tryInvoke(this.opts.innerRadius,this.width,this.height)).outerRadius(this.tryInvoke(this.opts.outerRadius,this.width,this.height))}},{key:"_data",value:function(t){this.pieDisplayData=this.pie(t),kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t)}},{key:"_render",value:function(){this.hasRendered||(kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_render",this).call(this),this._updateBackground())}},{key:"_update",value:function(){var t=this._updateArcs();this.opts.includeLabels&&this._updateLabels(t)}},{key:"_updateArcs",value:function(){var t=this,e=this.draw.selectAll(".monte-arc").data(this.pieDisplayData),n=this.arc;return e.enter().append("g").attr("class","monte-arc "+this.opts.arcCss).append("path").attr("class",function(e,n){return t._buildCss(["monte-arc-wedge",t.opts.arcWedgeCss,t.opts.arcWedgeCssScaleAccessor,e.data.css],e,n)}).call(this.__bindCommonEvents("wedge")).transition().call(this._transitionSetup("arc",sr)).attrTween("d",function(e){var r=t.tryInvoke(t.opts.arcWedgeEnter,e);return qe(n,r,e)}).attr("stroke",this.optionReaderFunc("arcWedgeStrokeScaleAccessor")).attr("fill",this.optionReaderFunc("arcWedgeFillScaleAccessor")),e.selectAll(".monte-arc-wedge").each(function(){var t=d3.select(this.parentElement).datum(),e=d3.select(this),n=e.datum();t.prev=n,e.datum(t),delete n.prev}).attr("class",function(e,n){return t._buildCss(["monte-arc-wedge",t.opts.arcWedgeCss,t.opts.arcWedgeCssScaleAccessor,e.data.css],e,n)}).transition().call(this._transitionSetup("arc",ur)).attrTween("d",function(t){return qe(n,t.prev,t)}).attr("stroke",this.optionReaderFunc("arcWedgeStrokeScaleAccessor")).attr("fill",this.optionReaderFunc("arcWedgeFillScaleAccessor")),e.exit().transition().call(this._transitionSetup("arc",cr)).style("opacity",.01).remove(),e.merge(e.enter().selectAll(".monte-arc"))}},{key:"_updateBackground",value:function(){var t=this,e=this.displayData.reduce(function(t,e){return t+e.value},0),n=this.arc({index:0,startAngle:this.opts.pieStartAngle,endAngle:this.opts.pieEndAngle,value:e}),r=this.bg.selectAll(".monte-arc-bg").data([n]);r.enter().append("path").merge(r).attr("d",function(t){return t}).attr("fill",this.optionReaderFunc("arcBgWedgeFillScaleAccessor")).attr("class",function(e,n){return t._buildCss(["monte-arc-bg",t.opts.arcBgWedgeCssScaleAccessor],e,n)})}},{key:"_updateLabels",value:function(t){var e=this;this.emit(Cc);var n=this.tryInvoke(this.opts.labelPlacement),r=this.tryInvoke(n.css);Je(this.bound,Pc,!1),this.classed(r,!0),t.each(function(t,n,r){var i=d3.select(r[n]);e._updateArcLabel(i,t,n,r)}),this.emit(Ec)}},{key:"_updateArcLabel",value:function(t,e,n,r){var i=this,o=t.selectAll(".monte-arc-label").data([e]),a=this.tryInvoke(this.opts.labelPlacement),s=this.tryInvoke(a.radius,this.width,this.height);o.enter().append("text").attr("class","monte-arc-label").merge(o).attr("dx",function(t){return i.tryInvoke(i.opts.labelXAdjust,t,n,r)}).attr("dy",function(t){return i.tryInvoke(i.opts.labelYAdjust,t,n,r)}).attr("fill",this.optionReaderFunc("labelFillScaleAccessor")).attr("transform",function(t){var e=i.tryInvoke(i.opts.labelAngle,t,n,r),o=tn(s,e);return"translate("+o+")"}).text(function(t){return i.tryInvoke(i.opts.label,t,n,r)}),o.exit().transition().call(this._transitionSetup("label",cr)).remove()}}]),e}(Mu);Rc.EVENTS=Ic;var Tc={smallNeedleHeight:0,smallNeedleRatio:.05},wc="updatingBackgroundArc",Dc="updatedBackgroundArc",zc="updatingNeedle",Fc="updatedNeedle",Lc=[wc,Dc,zc,Fc],Mc={chartCss:"monte-arc-chart monte-gauge-chart",piePadAngle:0,pieStartAngle:-Sc,pieEndAngle:Sc,arcBgCssScale:Re,arcBgCssScaleAccessor:Rc.generateScaleAccessor("arcBgCssScale","itemValue"),arcBgFillScale:Re,arcBgFillScaleAccessor:Rc.generateScaleAccessor("arcBgFillScale","itemValue"),needleBase:20,needleHeight:function(t,e){return(t-e)/2+e},needlePath:rn(),innerRadius:function(t,e){return.9*nn(t,e)},labelPlacement:Ue,segmentsProp:"segments",itemValueProp:"interval",startValueProp:"start",startLabelProp:"startLabel",needleValueProp:"value",labelProp:"label",labelAngle:function(t){return t.endAngle},suppressLabels:!1,includeLabels:function(){return!this.tryInvoke(this.opts.suppressLabels)}},Bc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Mc]))}},{key:"_initCore",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this._prevNeedleAngleValueData=0,this.needleValueData=0,this.needleValueAngleData=0}},{key:"_initRender",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initRender",this).call(this),this.bgArc=d3.arc().startAngle(this.tryInvoke(this.opts.pieStartAngle)).endAngle(this.tryInvoke(this.opts.pieEndAngle)).innerRadius(0).outerRadius(this.tryInvoke(this.opts.outerRadius,this.width,this.height)).cornerRadius(this.tryInvoke(this.opts.cornerRadius)),this.angleScale=d3.scaleLinear().range([this.opts.pieStartAngle,this.opts.pieEndAngle])}},{key:"_initPublicEvents",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initPublicEvents",this)).call.apply(t,[this].concat(r,Lc))}},{key:"_getLayerTranslate",value:function(){var t=this.tryInvoke(this.opts.outerRadius,this.width,this.height),e=this.width/2+this.margin.left,n=this.height-(this.height-t)+this.margin.top;return"translate("+e+", "+n+")"}},{key:"_resetCssDomains",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_resetCssDomains",this).call(this),we(this.opts.arcBgCssScaleAccessor),we(this.opts.arcBgFillScaleAccessor)}},{key:"_data",value:function(t){this.rawData=t;var n=this.tryInvoke(this.opts.segmentsProp),r=this.tryInvoke(this.opts.startValueProp),i=this.tryInvoke(this.opts.startLabelProp),o=this.tryInvoke(this.opts.itemValueProp),a=this.tryInvoke(this.opts.needleValueProp);Pe(t[i])&&t[n].unshift({interval:0,label:t[i]}),kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this).call(this,t[n]);var s=this.displayData.reduce(function(t,e){return t+Math.abs(e[o])},0),u=t[r]||0;this.angleScale.domain([u,u+s]),this.needleValue(t[a],!0)}},{key:"needleValue",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return t===mu?this.needleValueData:(this._prevNeedleAngleValueData=this.needleValueAngleData,this.needleValueData=t,this.needleValueAngleData=this.angleScale(t),e||this.update(),this)}},{key:"needleValueAngle",value:function(t){return t===mu?this.needleValueAngleData:(this.needleValue(this.angleScale.invert(t)),this)}},{key:"_render",value:function(){this.hasRendered||(kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_render",this).call(this),this._updateBackgroundArc())}},{key:"_update",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_update",this).call(this),this._updateNeedle()}},{key:"_updateBackgroundArc",value:function(){var t=this;this.emit(wc),
this.bg.append("path").attr("fill",this.optionReaderFunc("arcBgFillScale")).attr("class",function(e,n){return t._buildCss(["monte-gauge-bg",t.opts.arcBgCssScaleAccessor],e,n)}).attr("d",this.bgArc()),this.emit(Dc)}},{key:"_updateNeedle",value:function(){var t=this,e=this.tryInvoke(this.opts.needleBase),n=this.tryInvoke(this.opts.outerRadius,this.width,this.height),r=this.tryInvoke(this.opts.innerRadius,this.width,this.height),i=this.tryInvoke(this.opts.needleHeight,n,r),o=this.tryInvoke(this.opts.needlePath,i,e),a=this.overlay.selectAll(".monte-gauge-needle").data([this.needleValueAngleData||0]);this.emit(zc),a.enter().append("path").attr("class","monte-gauge-needle").attr("d",o).transition().call(this._transitionSetup("needle",sr)).style("transform",function(t){return"rotate("+t+"rad)"}),a.transition().call(this._transitionSetup("needle",ur)).styleTween("transform",function(e){var n=t._prevNeedleAngleValueData,r=e;return function(t){var e=n*(1-t)+r*t;return"rotate("+e+"rad)"}}),a.exit().transition().call(this._transitionSetup("needle",cr)).remove(),this.emit(Fc)}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(Nc),(n=kn(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Rc);Bc.EVENTS=Lc;var Nc=["needleValue"],Hc={chartCss:"monte-arc-chart monte-wedge-chart",piePadAngle:0,arcWedgeEnter:function(t){return{startAngle:t.startAngle,endAngle:t.startAngle,value:t.value,padAngle:t.padAngle,index:t.index}}},Wc=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Hc]))}},{key:"_initCore",value:function(){kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initCore",this).call(this),this.pie.sortValues(function(t,e){return t.value-e.value})}},{key:"_data",value:function(t){var n,r,i;this.wedgeValueData=t,this.rawData=t;for(var o=this.tryInvoke(this.opts.itemValueProp),a=[(n={},An(n,o,t),An(n,"css","monte-wedge"),n),(r={},An(r,o,100-t),An(r,"css","monte-arc-placeholder"),r)],s=arguments.length,u=Array(s>1?s-1:0),c=1;c<s;c++)u[c-1]=arguments[c];return(i=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_data",this)).call.apply(i,[this,a].concat(u))}},{key:"wedgeValue",value:function(t){return t===mu?this.wedgeValueData:(this.data(t),this)}}],[{key:"createInstanceGroup",value:function(t){for(var n,r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.push(Uc),(n=kn(e.__proto__||Object.getPrototypeOf(e),"createInstanceGroup",this)).call.apply(n,[this,t].concat(i))}}]),e}(Rc),Uc=["wedgeValue"],Gc="horizontal",Vc="vertical",Yc=Object.freeze({HORIZONTAL:Gc,VERTICAL:Vc}),Xc=0,Zc=-1/8*mc,Kc=-.25*mc,$c=-3/8*mc,qc=-Sc,Jc=-5/8*mc,Qc=-.75*mc,tl=-7/8*mc,el=mc,nl=7/8*mc,rl=.75*mc,il=5/8*mc,ol=Sc,al=3/8*mc,sl=.25*mc,ul=1/8*mc,cl=Xc,ll=Zc,pl=Kc,hl=$c,dl=qc,fl=Jc,yl=Qc,_l=tl,vl=el,gl=nl,bl=rl,ml=il,Sl=ol,Al=al,kl=sl,xl=ul,Ol=Object.freeze({NORTH:Xc,NORTH_NORTHWEST:Zc,NORTHWEST:Kc,WEST_NORTHWEST:$c,WEST:qc,WEST_SOUTHWEST:Jc,SOUTHWEST:Qc,SOUTH_SOUTHWEST:tl,SOUTH:el,SOUTH_SOUTHEAST:nl,SOUTHEAST:rl,EAST_SOUTHEAST:il,EAST:ol,EAST_NORTHEAST:al,NORTHEAST:sl,NORTH_NORTHEAST:ul,TOP:cl,TOP_BY_TOP_LEFT:ll,TOP_LEFT:pl,LEFT_BY_TOP_LEFT:hl,LEFT:dl,LEFT_BY_BOTTOM_LEFT:fl,BOTTOM_LEFT:yl,BOTTOM_BY_BOTTOM_LEFT:_l,BOTTOM:vl,BOTTOM_BY_BOTTOM_RIGHT:gl,BOTTOM_RIGHT:bl,RIGHT_BY_BOTTOM_RIGHT:ml,RIGHT:Sl,RIGHT_BY_TOP_RIGHT:Al,TOP_RIGHT:kl,TOP_BY_TOP_RIGHT:xl}),Pl=Object.freeze({D3:pr,DIRECTION:Yc,MATH:kc,POLAR:Ol,CLICK:Cn,TOUCHSTART:En,TOUCHEND:In,MOUSEOVER:jn,MOUSEOUT:Rn,SUPPRESSED_ERROR:Tn,EXTENSION:wn,RENDERING:Dn,RENDERED:zn,UPDATING:Fn,UPDATED:Ln,UPDATING_BOUNDS:Mn,UPDATED_BOUNDS:Bn,CLEARING:Nn,CLEARED:Hn,DESTROYING:Wn,DESTROYED:Un,OPTION_CHANGING:Gn,OPTION_CHANGED:Vn,CSS_DOMAINS_RESETTING:Yn,CSS_DOMAINS_RESET:Xn,INTERACTION_EVENTS:Zn,CHART_SUPPORT_EVENTS:Kn,CHART_LIFECYCLE_EVENTS:$n,EXTENSION_LIFECYCLE_EVENTS:qn,ACTION_ADD:Jn,ACTION_REMOVE:Qn,ACTION_CSS_OVER:tr,ACTION_CSS_TOUCH:er,INTERACTION_EVENT_CSS_MAP:nr,UNDEF:mu}),Cl={layer:"bg",binding:[Wn,zn,Bn],optionsTriggerUpdate:!1,eventPrefix:null,customEvents:[]},El=function(){function t(e){mn(this,t),this._initOptions(e),this._initPublicEvents.apply(this,Pn(qn).concat(Pn(this.opts.customEvents)))}return Sn(t,[{key:"_initOptions",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.opts=je.apply(void 0,e.concat([Cl])),!this.opts.eventPrefix)throw bu.RequiredOption("eventPrefix");this.opts.binding.indexOf(Wn)===-1&&this.opts.binding.push(Wn)}},{key:"_initPublicEvents",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];this._events=e}},{key:"setChart",value:function(t){if(this.chart&&this.chart!==t)throw new vu("An extension should only have the chart set once.");this.chart=t;var e=this.tryInvoke(this.opts.layer);return e&&(this.layer=this.chart[e]),this.__extId=Cu.getNextExtensionId(),this}},{key:"option",value:function(t,e){return e===mu?this.opts[t]:(this.opts[t]=e,this._shouldOptionUpdate(t)&&this.cachedChart&&this.fire(Vn,t),this)}},{key:"_shouldOptionUpdate",value:function(t){return this.opts.optionsTriggerUpdate}},{key:"on",value:function(t,e){if(!this.dispatch){var n;this.dispatch=(n=d3).dispatch.apply(n,Pn(this.events))}return e?(this.dispatch.on(t,e),this):this.dispatch.on(t)}},{key:"__notify",value:function(t){for(var e,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(this.dispatch){var o;(o=this.dispatch).call.apply(o,[t,this].concat(r))}(e=this.chart).emit.apply(e,["extension",this.opts.eventPrefix+":"+t,this].concat(r))}},{key:"clear",value:function(){return this.__notify(Nn),this._clearDataElements(),this.__notify(Hn),this}},{key:"_clearDataElements",value:function(){this._extCreateSelection.remove()}},{key:"fire",value:function(t){if(!this.chart)throw new vu("A chart must be associated with the extension prior to use.");try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];switch(t){case Wn:this.destroy();break;case Bn:this.updateBounds.apply(this,n);break;case zn:this.render.apply(this,n);break;case Vn:this._optionChanged.apply(this,n);break;default:this.update.apply(this,n)}}catch(t){console&&console.error&&console.error(t),this.__notify(Tn,t,t.stack||"No stack available.")}}},{key:"update",value:function(){this.__notify(Fn),this._update.apply(this,arguments),this.__notify(Ln)}},{key:"_update",value:function(t,e){throw vu.UnimplementedMethod("Update","_update")}},{key:"render",value:function(){this._render?(this.__notify(Dn),this._render.apply(this,arguments),this.__notify(zn)):this.update.apply(this,arguments)}},{key:"updateBounds",value:function(){this._updateBounds?(this.__notify(Mn),this._updateBounds.apply(this,arguments),this.__notify(Bn)):this.update.apply(this,arguments)}},{key:"_optionChanged",value:function(){var t=arguments.length<=0?void 0:arguments[0],e="_option"+un(t);this.__notify(Gn,t),this[e]?this[e]():this.update.apply(this,arguments),this.__notify(Vn,t)}},{key:"tryInvoke",value:function(t){try{for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return ke(t)?t.call.apply(t,[this].concat(n)):t}catch(t){return console&&console.error&&console.error(t),this.__notify(Tn,t,t.stack||"No stack available."),null}}},{key:"getProp",value:function(t,e){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=t+"Prop",i=this.opts[r];return i?e[i]:n}},{key:"_buildCss",value:function(t,e,n,r){var i=this,o=[],a=Array.isArray(t)?t:[t];return a.forEach(function(t){Pe(t)&&o.push(i.tryInvoke(t,e,n,r))}),o.join(" ")}},{key:"getExtId",value:function(){return this.__extId}},{key:"_getExtAttr",value:function(){return"monte-ext-"+this.getExtId()}},{key:"_setExtAttrs",value:function(t){t.attr(this._getExtAttr(),"")}},{key:"_extCreateSelection",value:function(t){var e=this._getExtAttr(),n="["+e+"]";return t&&(n+="."+t),this.layer.selectAll(n)}},{key:"destroy",value:function(){this.__notify(Wn),this._destroy(),this.__notify(Un)}},{key:"_destroy",value:function(){}},{key:"toString",value:function(){return this.constructor.name}}]),t}(),Il={eventPrefix:"arc",startAngle:0,endAngle:Ac,arcCss:"monte-ext-arc",innerRadius:0,outerRadius:100,cornerRadius:0},jl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Il])),this.arc=d3.arc().innerRadius(this.tryInvoke(this.opts.innerRadius)).outerRadius(this.tryInvoke(this.opts.outerRadius)).cornerRadius(this.tryInvoke(this.opts.cornerRadius))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.arcCss),n=this.tryInvoke(this.opts.startAngle),r=this.tryInvoke(this.opts.endAngle),i=Pe(n)&&Pe(r)?{startAngle:n,endAngle:r}:{startAngle:Pe(n)?n:r,endAngle:Pe(n)?n:r},o=this._extCreateSelection().data([i]);o.enter().append("path").call(this._setExtAttrs.bind(this)).attr("class",e).transition().call(this.chart._transitionSetup("extArc",sr)).attrTween("d",function(e){return t.arc(e)}),o.transition().call(this.chart._transitionSetup("extArc",ur)).attrTween("d",function(e){return qe(t.arc,t.prev,e)}).on("end",function(e){return t.prev=e}),o.exit().transition().call(this.chart._transitionSetup("extArc",cr)).style("opacity",.01).remove()}}]),e}(El),Rl={eventPrefix:"frame",frameLineCss:"monte-ext-frame-line",edges:["top","right","bottom","left"],alignmentShift:rr},Tl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Rl]))}},{key:"_shouldOptionUpdate",value:function(t){return"edges"===t||"alignmentShift"===t}},{key:"_update",value:function(){var t=this.chart,e=this.opts.frameLineCss,n=this._extCreateSelection().data(this.opts.edges).order(),r=this.opts.alignmentShift,i={top:[[0+r,0+r],[t.width+r,0+r]],right:[[t.width+r,0+r],[t.width+r,t.height+r]],bottom:[[0+r,t.height+r],[t.width+r,t.height+r]],left:[[0+r,0+r],[0+r,t.height+r]]};n.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",e).attr("x1",function(t){return i[t][0][0]}).attr("y1",function(t){return i[t][0][1]}).attr("x2",function(t){return i[t][1][0]}).attr("y2",function(t){return i[t][1][1]}),n.transition().call(this.chart._transitionSetup("extFrame",ur)).attr("x1",function(t){return i[t][0][0]}).attr("y1",function(t){return i[t][0][1]}).attr("x2",function(t){return i[t][1][0]}).attr("y2",function(t){return i[t][1][1]}),n.exit().remove()}}]),e}(El),wl={eventPrefix:"grid",scalePrefixes:["x","y"],prefixCssMap:{x:"v-line",y:"h-line"},lineCss:"monte-ext-grid-line",binding:new Au(["axisRendered"]),x1Adjust:0,x2Adjust:0,y1Adjust:0,y2Adjust:0},Dl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[wl]))}},{key:"_update",value:function(t,e){var n=this,r=this.chart;r.forEachAxisScale(function(t){var i=n.getCss(t),o=r[t],a=r[t+"Axis"],s="x"===t[0]?Vc:Gc;if(i&&o&&a){var u=a.tickValues(),c=a.tickArguments(),l=null==u?o.ticks?o.ticks.apply(o,c):o.domain():u,p=n.layer.selectAll("."+i).data(l).order();n._updateTicks(p,e,{axesChart:r,axis:a,axisTransition:e,css:i,orient:s,scale:o,scaleName:t,lineCss:n.option("lineCss")})}})}},{key:"_updateTicks",value:function(t,e,n){var r=[n.lineCss,n.css].join(" "),i=this.tryInvoke(this.opts.x1Adjust),o=this.tryInvoke(this.opts.x2Adjust),a=this.tryInvoke(this.opts.y1Adjust),s=this.tryInvoke(this.opts.y2Adjust);n.orient===Gc?(t.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",r).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0).transition(e).attr("x1",0+i).attr("y1",rr+a).attr("x2",n.axesChart.width+o).attr("y2",rr+s).attr("transform",function(t){return"translate(0,"+n.scale(t)+")"}),t.transition(e).attr("x1",function(){return 0+i}).attr("x2",function(){return n.axesChart.width+o}).attr("transform",function(t){return"translate(0,"+n.scale(t)+")"})):n.orient===Vc&&(t.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",r).attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0).transition(e).attr("x1",rr+i).attr("y1",0+a).attr("x2",rr+o).attr("y2",n.axesChart.height+s).attr("transform",function(t){return"translate("+n.scale(t)+", 0)"}),t.transition(e).attr("y1",function(){return 0+a}).attr("y2",function(){return n.axesChart.height+s}).attr("transform",function(t){return"translate("+n.scale(t)+", 0)"})),t.exit().remove()}},{key:"getCss",value:function(t){for(var e in this.opts.prefixCssMap)if(this.opts.prefixCssMap.hasOwnProperty(e)){var n=t.substr(0,e.length)===e;if(n)return this.tryInvoke(this.opts.prefixCssMap[e])}return""}}]),e}(El),zl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_updateTicks",value:function(t,n,r){r.orient===Gc&&kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateTicks",this).call(this,t,n,r)}}]),e}(Dl),Fl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_updateTicks",value:function(t,n,r){r.orient===Vc&&kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_updateTicks",this).call(this,t,n,r)}}]),e}(Dl),Ll=Object.freeze({isArray:Oe,isDefined:Pe,isFunc:ke,isNumeric:Se,isObject:xe,isString:Ae,compose:cn,getDepthFirst:Ce,mergeOptions:je,ReplacePreceding:Au,noop:Re,readTransforms:ln,resetScaleDomain:we}),Ml={eventPrefix:"label",labelCss:"monte-ext-label",text:"",x:0,y:0,dy:"0.35em",dx:0,anchor:"start",labelCustomize:Re,maxWidth:Number.POSITIVE_INFINITY},Bl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Ml]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.labelCss),n=this.tryInvoke(this.opts.text),r=+this.tryInvoke(this.opts.maxWidth),i=this._extCreateSelection().data([n]);i.enter().append("text").call(this._setExtAttrs.bind(this)).attr("class",e).merge(i).text(function(t){return t}).attr("text-anchor",this.tryInvoke(this.opts.anchor)).call(function(e){return t._checkMaxWidth(e,r)}).attr("x",this.tryInvoke(this.opts.x)).attr("y",this.tryInvoke(this.opts.y)).attr("dx",this.tryInvoke(this.opts.dx)).attr("dy",this.tryInvoke(this.opts.dy)).call(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.tryInvoke.apply(t,[t.opts.labelCustomize].concat(n))}),i.exit().remove()}},{key:"_checkMaxWidth",value:function(t,e){if(Se(e)&&e>0){var n=t.node(),r=n.getBBox().width;if(r>e){var i=hn(n),o=i*e/r;this.origFontSize||(this.origFontSize=i),t.style("font-size",o+"px")}else if(Pe(this.origFontSize)&&r<e){var a=hn(n),s=a*e/r;s>this.origFontSize?t.style("font-size",this.origFontSize+"px"):t.style("font-size",s+"px")}}}}]),e}(El),Nl={eventPrefix:"polargrid",startAngle:0,endAngle:Ac,arcRadii:[100],arcCss:"monte-ext-polar-grid-arc",arcSpecificCss:null,arcSort:function(t,e){return e-t},arcDepth:0,cornerRadius:0},Hl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Nl]));var o=this.tryInvoke(this.opts.arcDepth);this.arc=d3.arc().innerRadius(function(t){return t.radius}).outerRadius(function(t){return t.radius+o}).cornerRadius(this.tryInvoke(this.opts.cornerRadius))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.arcRadii),n=e.sort(this.opts.arcSort),r=this._extCreateSelection().data(n),i=this.tryInvoke(this.opts.startAngle),o=this.tryInvoke(this.opts.endAngle),a=Pe(i)&&Pe(o)?{startAngle:i,endAngle:o}:{startAngle:Pe(i)?i:o,endAngle:Pe(i)?i:o};r.enter().append("path").call(this._setExtAttrs.bind(this)).merge(r).attr("class",this.tryInvoke(this.opts.arcCss)).attr("d",function(e){return a.radius=e,t.arc(a)}),r.exit().remove()}}]),e}(El),Wl={eventPrefix:"polarline",layer:"overlay",angle:0,lineCss:"monte-ext-polar-line",innerRadius:0,outerRadius:100},Ul=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Wl])),this.innerArc=d3.arc().innerRadius(this.opts.innerRadius).outerRadius(this.opts.innerRadius),this.outerArc=d3.arc().innerRadius(this.opts.outerRadius).outerRadius(this.opts.outerRadius)}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.lineCss),n=this.tryInvoke(this.opts.angle),r=this._extCreateSelection().data([{startAngle:n,endAngle:n}]),i=r.enter().append("line").call(this._setExtAttrs.bind(this)).attr("class",e);Pe(n)?i.merge(r).transition().call(this.chart._transitionSetup("extPolarLine",ur)).attr("x1",function(e){return t.innerArc.centroid(e)[0]}).attr("y1",function(e){return t.innerArc.centroid(e)[1]}).attr("x2",function(e){return t.outerArc.centroid(e)[0]}).attr("y2",function(e){return t.outerArc.centroid(e)[1]}):i.merge(r).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0),r.exit().remove()}}]),e}(El),Gl={layer:"draw",eventPrefix:"polarRotateLabel",labelCss:"monte-arc-label",rotation:Ze},Vl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Gl]))}},{key:"_update",value:function(){var t=this,e=this.tryInvoke(this.opts.labelCss),n=this.layer.selectAll("."+e);n.attr("transform",function(e,n,r){var i=d3.select(r[n]),o=en(t.tryInvoke(t.opts.rotation,e,n,r)),a=ln(i.attr("transform"));return a.rotate=[o],pn(a)})}}]),e}(El),Yl={eventPrefix:"polarticks",startAngle:0,endAngle:Ac,tickInterval:1/8*Ac,innerRadius:0,outerRadius:100,tickCss:"monte-ext-polar-tick",suppressEnd:!1},Xl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Yl])),this.innerArc=d3.arc().innerRadius(this.opts.innerRadius).outerRadius(this.opts.innerRadius),this.outerArc=d3.arc().innerRadius(this.opts.outerRadius).outerRadius(this.opts.outerRadius)}},{key:"_update",value:function(){var t=this,e=[],n=this.tryInvoke(this.opts.startAngle),r=this.tryInvoke(this.opts.endAngle),i=this.tryInvoke(this.opts.tickInterval),o=this.tryInvoke(this.opts.suppressEnd),a=this.tryInvoke(this.opts.tickCss),s=Math.abs(r-n)/i;o||Qe(n,r)||s++;for(var u=0;u<s;u++){var c=n+u*i;e.push({startAngle:c,endAngle:c,value:u})}var l=this._extCreateSelection().data(e);l.enter().append("line").call(this._setExtAttrs.bind(this)).merge(l).attr("class",a).attr("x1",function(e){return t.innerArc.centroid(e)[0]}).attr("y1",function(e){return t.innerArc.centroid(e)[1]}).attr("x2",function(e){return t.outerArc.centroid(e)[0]}).attr("y2",function(e){return t.outerArc.centroid(e)[1]}),l.exit().remove()}}]),e}(El),Zl={eventPrefix:"barbg",barBgCss:"monte-ext-bar-bg",data:null,maxValue:null,maxValueProp:null,enlarge:.05,cornerRadius:0},Kl=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[Zl]))}},{key:"_update",value:function(){var t=this,e=this.chart,n=e.data()||[],r=void 0;r=this.opts.data?this.opts.data:this._buildData(e,n);var i=this._extCreateSelection().data(r),o=this._sizeAdjust(e);i.enter().append("rect").call(this._setExtAttrs.bind(this)).merge(i).attr("class",this.opts.barBgCss).attr("x",function(){return e._barX.bind(e).apply(void 0,arguments)+t._xShift(o)}).attr("y",function(){return e._barY.bind(e).apply(void 0,arguments)+t._yShift(o)}).attr("width",function(n){var r=e._barWidth(n),i=t._widthAdjust(o),a=r+i;return a}).attr("height",function(){return e._barHeight.bind(e).apply(void 0,arguments)+t._heightAdjust(o)}).attr("rx",function(e,n){return t.tryInvoke(t.opts.cornerRadius,e,n)})}},{key:"_buildData",value:function(t,e){for(var n=new Array(e.length),r=t.y.domain(),i=0;i<n.length;i++){var o,a=this.opts.maxValue?e[i][this.opts.maxValue]:null;n[i]=(o={},An(o,t.option("xProp"),e[i][t.option("xProp")]),An(o,t.option("yProp"),a||this.opts.maxValue||r[1]),o)}return n}},{key:"_sizeAdjust",value:function(t){return t.x.bandwidth()*this.opts.enlarge}},{key:"_xShift",value:function(t){return-t}},{key:"_yShift",value:function(t){return 0}},{key:"_widthAdjust",value:function(t){return 2*t}},{key:"_heightAdjust",value:function(t){return 0}}]),e}(El),$l=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"_buildData",value:function(t,e){for(var n=new Array(e.length),r=t.x.domain(),i=0;i<n.length;i++){var o,a=this.opts.maxValueProp?e[i][this.opts.maxValueProp]:null;n[i]=(o={},An(o,t.option("xProp"),a||this.opts.maxValue||r[1]),An(o,t.option("yProp"),e[i][t.option("yProp")]),o)}return n}},{key:"_sizeAdjust",value:function(t){return t.y.bandwidth()*this.opts.enlarge}},{key:"_xShift",value:function(t){return 0}},{key:"_yShift",value:function(t){return-t}},{key:"_widthAdjust",value:function(t){return 0}},{key:"_heightAdjust",value:function(t){return 2*t}}]),e}(Kl),ql={eventPrefix:"refline",css:"monte-ext-ref-line-grp",data:Re,layer:"overlay",labelPlacement:"nw",textAnchor:"start",textProp:"text",x1Prop:"x1",x2Prop:"x2",y1Prop:"y1",y2Prop:"y2"},Jl={nw:function(t,e){t.attr("dy","-0.35em").attr("x",e.x1).attr("y",e.y1)},n:function(t,e){t.attr("dy","-0.35em").attr("x",(e.x2-e.x1)/2+e.x1).attr("y",e.y2)},ne:function(t,e){t.attr("dy","-0.35em").attr("x",e.x2).attr("y",e.y2)},w:function(t,e){t.attr("dy","0.35em").attr("x",e.x1).attr("y",e.y1)},e:function(t,e){t.attr("dy","0.35em").attr("x",e.x2).attr("y",e.y2)},sw:function(t,e){t.attr("dy","1em").attr("x",e.x1).attr("y",e.y1)},s:function(t,e){t.attr("dy","1em").attr("x",(e.x2-e.x1)/2+e.x1).attr("y",e.y2)},se:function(t,e){t.attr("dy","1em").attr("x",e.x2).attr("y",e.y2)}},Ql=function(t){function e(t){mn(this,e);var n=On(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.lineData=[],n}return xn(e,t),Sn(e,[{key:"_initOptions",value:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];(t=kn(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"_initOptions",this)).call.apply(t,[this].concat(r,[ql]))}},{key:"_update",value:function(){var t=this;this.lineData=this.tryInvoke(this.opts.data,this.chart.data()),!Oe(this.lineData)&&Pe(this.lineData)?this.lineData=[this.lineData]:Pe(this.lineData)||(this.lineData=[]);var e=this._extCreateSelection().data(this.lineData),n=e.enter().append("g").call(this._setExtAttrs.bind(this)).attr("class",this.opts.css);n.append("text"),n.append("line");var r=n.merge(e);r.select("line").attr("x1",function(e){return t.getProp("x1",e)}).attr("x2",function(e){return t.getProp("x2",e)}).attr("y1",function(e){return t.getProp("y1",e)}).attr("y2",function(e){return t.getProp("y2",e)}),r.select("text").attr("text-anchor",this.opts.textAnchor).text(function(e){return t.getProp("text",e)}).each(this._placeLabel.bind(this)),e.exit().remove()}},{key:"_placeLabel",value:function(t,e,n){var r=d3.select(n[e]),i=this.tryInvoke(this.opts.labelPlacement,t,e,n),o=Jl[i],a={x1:this.getProp("x1",t),x2:this.getProp("x2",t),y1:this.getProp("y1",t),y2:this.getProp("y2",t)};o.call(this,r,a)}}]),e}(El),tp=function(){function t(e){mn(this,t),this.opts=e||{}}return Sn(t,[{key:"option",value:function(t,e){this.opts[t]=e}},{key:"resize",value:function(){throw vu.UnimplementedMethod("Resize","resize")}}]),t}(),ep=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"resize",value:function(t){var e=t.bound.node().parentElement,n=_n(e);t.boundingRect(n.rect.width-n.pl-n.pr,t.opts.boundingHeight)}}]),e}(tp),np=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"resize",value:function(t){var e=t.bound.node().parentElement,n=_n(e),r=n.rect.width-n.pl-n.pr,i=this.opts.ratio||1;t.boundingRect(r,r/i)}}]),e}(tp),rp=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"resize",value:function(t){var e=t.bound.node().parentElement,n=_n(e);t.boundingRect(n.rect.width-n.pl-n.pr,n.rect.height-n.pt-n.pb)}}]),e}(tp),ip=function(t){function e(){return mn(this,e),On(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return xn(e,t),Sn(e,[{key:"resize",value:function(t){var e=t.bound.node().parentElement,n=_n(e);t.boundingRect(t.opts.boundingHeight,n.rect.height-n.pt-n.pb)}}]),e}(tp);t.constants=Pl,t.tools=Ll,t.version=gn,t.Chart=ju,t.AxesChart=Fu,t.PolarChart=Mu,t.LineChart=Nu,t.AreaChart=Wu,t.SparklineChart=Gu,t.BarChart=Ku,t.HorizontalBarChart=Ju,t.SimpleBarChart=tc,t.HorizontalSimpleBarChart=nc,t.SegmentBarChart=cc,t.HorizontalSegmentBarChart=hc,t.ScatterPlot=fc,t.IconArray=gc,t.ArcChart=Rc,t.GaugeChart=Bc,t.WedgeChart=Wc,t.EventWatcher=Ou,t.InstanceGroup=gu,t.MonteError=vu,t.MonteOptionError=bu,t.Extension=El,t.ExtArc=jl,t.ExtFrame=Tl,t.ExtGrid=Dl,t.ExtHorizontalLines=zl,t.ExtVerticalLines=Fl,t.ExtLabel=Bl,t.ExtPolarGrid=Hl,t.ExtPolarLine=Ul,t.ExtPolarRotateLabel=Vl,t.ExtPolarTicks=Xl,t.ExtBarBg=Kl,t.ExtHorizontalBarBg=$l,t.ExtReferenceLine=Ql,t.axisNoTicks=dn,t.axisWholeNumberFormat=fn,t.needleRoundedEnd=rn,t.needleFlatEnd=on,t.needleExtraPointer=an,t.needleRect=sn,t.extentFromZero=De,t.extentBalanced=ze,t.extentGeneratorPercentOffset=Me,t.extentGeneratorValueOffset=Le,t.extentGeneratorZeroToMax=Fe,t.AutoResizer=rp,t.HorizontalResizer=ep,t.HorizontalRatioResizer=np,t.Resizer=tp,t.VerticalResizer=ip,t.polarLabelCentroid=We,t.polarLabelInner=Ue,t.polarLabelOuter=Ge,t.polarLabelInnerFactor=Ve,t.polarLabelOuterFactor=Ye,t.polarLabelRotateTangentOrigin=Xe,t.polarLabelRotateTangentFlip=Ze,t.polarLabelRotateRay=Ke,t.polarLabelRotateRayOpposite=$e,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=monte.min.js.map
